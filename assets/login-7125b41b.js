import{d as b,ao as V,m as y,o as P,aP as R,a as S,f as o,w as r,b1 as C,b2 as g,n as F,b3 as N,h as B,b as a,i,b4 as T,aQ as c,aN as U,b5 as M,r as I}from"./index-3cd95e0c.js";/* empty css             */import{E as $,a as j,_ as Q}from"./logo-f8794844.js";import{E as q}from"./button-dc6b6b9b.js";/* empty css              */import{E as z}from"./index-9e9b2539.js";import{b as f}from"./route-block-83d24a4e.js";import"./event-e06a23af.js";import"./index-682a4c7d.js";import"./_Uint8Array-cd64dbc9.js";import"./favicon-d22aecf5.js";import"./index-86b42190.js";import"./index-3dfa2f8d.js";import"./index-94ce4232.js";import"./isNil-c75b1b34.js";const A={class:"h-screen font-github"},D={class:"flex justify-center items-center flex-col"},G=a("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign in to tov-template ",-1),H={class:"h-57 w-77 bg-github_bg dark:bg-github_bg_dark border-github_b rounded-xl border-1 p-4"},J=i("Sign in"),K={class:"mt-3 w-77 border-github_b rounded-xl border-1 p-4"},L=i(" New to Tov? "),O={class:"text-github_a"},W=i("Create an account"),X=i(" . "),Y=b({name:"***",beforeRouteEnter(h,m,e){e(n=>{C.isEmpty(g().value)||n.router.replace(m.path)})}}),Z=b({...Y,setup(h,{expose:m}){const e=V({username:"",password:""}),n=y(),p=F(),v=N();P(()=>{});const w=_=>{_&&_.validate(t=>{if(t)T()(e.username,e.password).then(s=>{g().value=s.getSessionToken(),c.success(`登录成功，欢迎您${s.getUsername()}回来~`);let{fromParams:l}=U(M());p.push(l.value.fromPath)},s=>{c.error(s.rawMessage)});else return!1})};return m({router:p,currentUser:R,route:v}),(_,t)=>{const s=Q,l=z,d=$,k=q,x=I("router-link"),E=j;return B(),S("div",A,[o(E,{ref_key:"ruleFormRef",ref:n,model:e,"label-position":"top"},{default:r(()=>[a("div",D,[o(s),G,a("div",H,[o(d,{label:"Phone number"},{default:r(()=>[o(l,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=u=>e.username=u)},null,8,["modelValue"])]),_:1}),o(d,{label:"Password"},{default:r(()=>[o(l,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=u=>e.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,null,{default:r(()=>[o(k,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:t[2]||(t[2]=u=>w(n.value))},{default:r(()=>[J]),_:1})]),_:1})]),a("div",K,[L,a("a",O,[o(x,{to:"signup"},{default:r(()=>[W]),_:1})]),X])])]),_:1},8,["model"])])}}});typeof f=="function"&&f(Z);export{Z as default};
