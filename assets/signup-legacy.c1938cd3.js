System.register(["./index-legacy.2cb661c9.js","./index-legacy.9e1e093d.js","./base-legacy.5aa23bc0.js","./logo-legacy.e13ac88f.js","./popper-legacy.8e2324d4.js","./popover-legacy.ab90a6c0.js","./button-legacy.66d1bacb.js","./input-legacy.47eb6b6d.js","./route-block-legacy.6f0c4e8e.js","./error-legacy.3397af0e.js","./index-legacy.00fb7939.js","./favicon-legacy.99295790.js","./isNil-legacy.e59e30e8.js","./index-legacy.0a8462fc.js","./index-legacy.a4b9b1e7.js","./index-legacy.45dffb3f.js","./event-legacy.39ad8904.js"],(function(e,a){"use strict";var s,l,o,t,d,r,n,i,u,c,m,p,b,g,f,h,C,w,y,v,_,k,x,V,j,P,S,I;return{setters:[e=>{s=e.a},e=>{l=e.h,o=e.a,t=e.b,d=e.d,r=e.ak,n=e.m,i=e.am,u=e.f,c=e.w,m=e.e,p=e.by,b=e.Q,g=e.i,f=e.t,h=e.p,C=e.a8,w=e.n,y=e.aq,v=e.bz,_=e.r},()=>{},e=>{k=e.E,x=e.a,V=e._},()=>{},e=>{j=e.E},e=>{P=e.E},e=>{S=e.E},e=>{I=e.b},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},E=[t("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1)],N={name:"mdi-check",render:function(e,s){return l(),o("svg",a,E)}},U={class:"h-screen font-github"},L={class:"flex justify-center items-center flex-col"},M=t("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign up to tov-template ",-1),F={class:"w-77 bg-github_bg dark:bg-github_bg_dark border-github_b rounded-xl border-1 p-4"},T={class:"w-max h-max cursor-pointer"},q=["src"],z={class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},A={class:"text-github_a"},B=e("default",d({__name:"signup",setup(e){s.get("api/article/all").then((e=>{}));const a=r({username:"",password:"",checkPass:"",nickName:"",smsCodeInput:"",smsCode:"",smsCodeVisible:!1,smsCodeCanSend:!1,smsCodeTip:"刷新验证码",captcha:n()}),d=e=>{a.smsCodeVisible=e},I=i.debounce((()=>{d(!0),a.smsCodeCanSend=!1,p().then((e=>{a.smsCode=e.url,a.captcha=e}))}),1e3,{leading:!0,trailing:!1}),E=w(),B=r({password:[{validator:(e,s,l)=>{if(""===s)l(new Error("Please input the password"));else{if(""!==a.checkPass){if(!Q.value)return;Q.value.validateField("checkPass",(()=>null))}l()}},trigger:"blur"}],checkPass:[{validator:(e,s,l)=>{""===s?l(new Error("Please input the password again")):s!==a.password?l(new Error("Two inputs don't match!")):l()},trigger:"blur"}],smsCodeInput:[{validator:(e,s,l)=>{a.smsCodeCanSend?l():l(new Error("SmsCode don't match!"))},trigger:"blur"}]}),Q=n();return(e,s)=>{const r=V,n=S,i=k,p=N,w=P,R=j,Z=_("router-link"),$=x;return l(),o("div",U,[u($,{ref_key:"ruleFormRef",ref:Q,model:m(a),"label-position":"top",rules:m(B)},{default:c((()=>[t("div",L,[u(r),M,t("div",F,[u(i,{label:"Phone number"},{default:c((()=>[u(n,{modelValue:m(a).username,"onUpdate:modelValue":s[0]||(s[0]=e=>m(a).username=e)},null,8,["modelValue"])])),_:1}),u(i,{label:"Password",prop:"password"},{default:c((()=>[u(n,{modelValue:m(a).password,"onUpdate:modelValue":s[1]||(s[1]=e=>m(a).password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(i,{label:"Confirm",prop:"checkPass"},{default:c((()=>[u(n,{modelValue:m(a).checkPass,"onUpdate:modelValue":s[2]||(s[2]=e=>m(a).checkPass=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(i,{label:"nickName"},{default:c((()=>[u(n,{modelValue:m(a).nickName,"onUpdate:modelValue":s[3]||(s[3]=e=>m(a).nickName=e)},null,8,["modelValue"])])),_:1}),u(i,{prop:"smsCodeInput"},{default:c((()=>[u(R,{visible:m(a).smsCodeVisible,placement:"top"},{reference:c((()=>[u(w,{id:"verify",class:b("text-github_a mb-1"),onClick:m(I)},{default:c((()=>[t("span",{class:b(m(a).smsCodeCanSend?"text-green-500":"")},[g(f(m(a).smsCodeTip)+" ",1),h(u(p,null,null,512),[[C,m(a).smsCodeCanSend]])],2)])),_:1},8,["onClick"])])),default:c((()=>[t("div",T,[t("img",{src:m(a).smsCode},null,8,q)])])),_:1},8,["visible"]),u(n,{modelValue:m(a).smsCodeInput,"onUpdate:modelValue":s[4]||(s[4]=e=>m(a).smsCodeInput=e),modelModifiers:{trim:!0},class:"w-8",disabled:!m(a).smsCodeVisible,onFocus:s[5]||(s[5]=e=>d(!0)),onInput:s[6]||(s[6]=e=>{var s;""!=a.smsCodeInput&&4==a.smsCodeInput.length&&(null===(s=a.captcha)||void 0===s||s.verify(a.smsCodeInput).then((e=>{d(!1),a.smsCodeCanSend=!0,a.smsCodeVisible=!1}),(e=>{"800"==e.code?I():y.error(e.rawMessage)})).catch((e=>{y.error(e)})))})},null,8,["modelValue","disabled"])])),_:1}),u(i,null,{default:c((()=>[u(w,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:s[7]||(s[7]=e=>{var s;(s=m(Q))&&s.validate((e=>{if(!e)return!1;v()(a.username,a.password).then((e=>{y.success("注册成功"),E.push("login")}),(e=>{y.error(`注册失败：${e.rawMessage}`)}))}))})},{default:c((()=>[g("Sign up")])),_:1})])),_:1})]),t("div",z,[g(" Already have an account? "),t("a",A,[u(Z,{to:"login"},{default:c((()=>[g(" Sign in → ")])),_:1})]),g(" . ")])])])),_:1},8,["model","rules"])])}}}));"function"==typeof I&&I(B)}}}));
