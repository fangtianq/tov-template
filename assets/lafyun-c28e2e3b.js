/* empty css             */import{E as bi}from"./button-f3a18c29.js";import{_ as xi}from"./delete-1366f1d4.js";/* empty css              */import{aX as _i,d as Ei,m as Oi,a as At,b as Ut,F as Si,s as Ni,f as Ti,h as Ft,w as Bi,e as Pt,j as Sn,t as Ii}from"./index-23313af2.js";import{E as Ai}from"./index-ee2075d8.js";import"./index-488e1ae9.js";import"./index-7f632015.js";import"./index-3a8182f9.js";import"./index-94ce4232.js";import"./event-e06a23af.js";import"./isNil-c75b1b34.js";var Fe,Oe;(function(t){t.DocIDError="文档ID不合法",t.CollNameError="集合名称不合法",t.OpStrError="操作符不合法",t.DirectionError="排序字符不合法",t.IntegerError="must be integer",t.QueryParamTypeError="查询参数必须为对象",t.QueryParamValueError="查询参数对象值不能均为undefined"})(Oe||(Oe={}));var P={String:"String",Number:"Number",Object:"Object",Array:"Array",Boolean:"Boolean",Null:"Null",GeoPoint:"GeoPoint",GeoLineString:"GeoLineString",GeoPolygon:"GeoPolygon",GeoMultiPoint:"GeoMultiPoint",GeoMultiLineString:"GeoMultiLineString",GeoMultiPolygon:"GeoMultiPolygon",Timestamp:"Date",Command:"Command",ServerDate:"ServerDate",BsonDate:"BsonDate",ObjectId:"ObjectId",Binary:"Binary"},Ui=["desc","asc"],Fi=["<","<=","==",">=",">"],je;(function(t){t.lt="<",t.gt=">",t.lte="<=",t.gte=">=",t.eq="=="})(je||(je={}));Fe={},Fe[je.eq]="$eq",Fe[je.lt]="$lt",Fe[je.lte]="$lte",Fe[je.gt]="$gt",Fe[je.gte]="$gte";var Se;(function(t){t.add="database.addDocument",t.query="database.queryDocument",t.update="database.updateDocument",t.count="database.countDocument",t.remove="database.deleteDocument",t.aggregate="database.aggregateDocuments"})(Se||(Se={}));function Pi(t,e){return e={exports:{}},t(e,e.exports),e.exports}var ji=Mi,$i=ki,Ri=Gi,ge=[],ae=[],Ci=typeof Uint8Array<"u"?Uint8Array:Array,jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Me=0,Li=jt.length;Me<Li;++Me)ge[Me]=jt[Me],ae[jt.charCodeAt(Me)]=Me;ae["-".charCodeAt(0)]=62;ae["_".charCodeAt(0)]=63;function Nn(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Mi(t){var e=Nn(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Di(t,e,r){return(e+r)*3/4-r}function ki(t){var e,r=Nn(t),n=r[0],o=r[1],i=new Ci(Di(t,n,o)),s=0,l=o>0?n-4:n,d;for(d=0;d<l;d+=4)e=ae[t.charCodeAt(d)]<<18|ae[t.charCodeAt(d+1)]<<12|ae[t.charCodeAt(d+2)]<<6|ae[t.charCodeAt(d+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return o===2&&(e=ae[t.charCodeAt(d)]<<2|ae[t.charCodeAt(d+1)]>>4,i[s++]=e&255),o===1&&(e=ae[t.charCodeAt(d)]<<10|ae[t.charCodeAt(d+1)]<<4|ae[t.charCodeAt(d+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function qi(t){return ge[t>>18&63]+ge[t>>12&63]+ge[t>>6&63]+ge[t&63]}function Hi(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(qi(n));return o.join("")}function Gi(t){for(var e,r=t.length,n=r%3,o=[],i=16383,s=0,l=r-n;s<l;s+=i)o.push(Hi(t,s,s+i>l?l:s+i));return n===1?(e=t[r-1],o.push(ge[e>>2]+ge[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(ge[e>>10]+ge[e>>4&63]+ge[e<<2&63]+"=")),o.join("")}var $t={byteLength:ji,toByteArray:$i,fromByteArray:Ri};var Ji=function(e,r,n,o,i){var s,l,d=i*8-o-1,f=(1<<d)-1,p=f>>1,y=-7,g=n?i-1:0,b=n?-1:1,O=e[r+g];for(g+=b,s=O&(1<<-y)-1,O>>=-y,y+=d;y>0;s=s*256+e[r+g],g+=b,y-=8);for(l=s&(1<<-y)-1,s>>=-y,y+=o;y>0;l=l*256+e[r+g],g+=b,y-=8);if(s===0)s=1-p;else{if(s===f)return l?NaN:(O?-1:1)*(1/0);l=l+Math.pow(2,o),s=s-p}return(O?-1:1)*l*Math.pow(2,s-o)},Vi=function(e,r,n,o,i,s){var l,d,f,p=s*8-i-1,y=(1<<p)-1,g=y>>1,b=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=o?0:s-1,T=o?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(d=isNaN(r)?1:0,l=y):(l=Math.floor(Math.log(r)/Math.LN2),r*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+g>=1?r+=b/f:r+=b*Math.pow(2,1-g),r*f>=2&&(l++,f/=2),l+g>=y?(d=0,l=y):l+g>=1?(d=(r*f-1)*Math.pow(2,i),l=l+g):(d=r*Math.pow(2,g-1)*Math.pow(2,i),l=0));i>=8;e[n+O]=d&255,O+=T,d/=256,i-=8);for(l=l<<i|d,p+=i;p>0;e[n+O]=l&255,O+=T,l/=256,p-=8);e[n+O-T]|=_*128},De={read:Ji,write:Vi},vt=Pi(function(t,e){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=R,e.INSPECT_MAX_BYTES=50;var n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var c=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(c,u),c.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function i(c){if(c>n)throw new RangeError('The value "'+c+'" is invalid for option "size"');var u=new Uint8Array(c);return Object.setPrototypeOf(u,s.prototype),u}function s(c,u,a){if(typeof c=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(c)}return l(c,u,a)}s.poolSize=8192;function l(c,u,a){if(typeof c=="string")return y(c,u);if(ArrayBuffer.isView(c))return b(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(c));if(de(c,ArrayBuffer)||c&&de(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(c,SharedArrayBuffer)||c&&de(c.buffer,SharedArrayBuffer)))return O(c,u,a);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=c.valueOf&&c.valueOf();if(h!=null&&h!==c)return s.from(h,u,a);var m=T(c);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return s.from(c[Symbol.toPrimitive]("string"),u,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(c))}s.from=function(c,u,a){return l(c,u,a)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function d(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function f(c,u,a){return d(c),c<=0?i(c):u!==void 0?typeof a=="string"?i(c).fill(u,a):i(c).fill(u):i(c)}s.alloc=function(c,u,a){return f(c,u,a)};function p(c){return d(c),i(c<0?0:_(c)|0)}s.allocUnsafe=function(c){return p(c)},s.allocUnsafeSlow=function(c){return p(c)};function y(c,u){if((typeof u!="string"||u==="")&&(u="utf8"),!s.isEncoding(u))throw new TypeError("Unknown encoding: "+u);var a=U(c,u)|0,h=i(a),m=h.write(c,u);return m!==a&&(h=h.slice(0,m)),h}function g(c){for(var u=c.length<0?0:_(c.length)|0,a=i(u),h=0;h<u;h+=1)a[h]=c[h]&255;return a}function b(c){if(de(c,Uint8Array)){var u=new Uint8Array(c);return O(u.buffer,u.byteOffset,u.byteLength)}return g(c)}function O(c,u,a){if(u<0||c.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<u+(a||0))throw new RangeError('"length" is outside of buffer bounds');var h;return u===void 0&&a===void 0?h=new Uint8Array(c):a===void 0?h=new Uint8Array(c,u):h=new Uint8Array(c,u,a),Object.setPrototypeOf(h,s.prototype),h}function T(c){if(s.isBuffer(c)){var u=_(c.length)|0,a=i(u);return a.length===0||c.copy(a,0,0,u),a}if(c.length!==void 0)return typeof c.length!="number"||It(c.length)?i(0):g(c);if(c.type==="Buffer"&&Array.isArray(c.data))return g(c.data)}function _(c){if(c>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return c|0}function R(c){return+c!=c&&(c=0),s.alloc(+c)}s.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==s.prototype},s.compare=function(u,a){if(de(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),de(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(u)||!s.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===a)return 0;for(var h=u.length,m=a.length,w=0,x=Math.min(h,m);w<x;++w)if(u[w]!==a[w]){h=u[w],m=a[w];break}return h<m?-1:m<h?1:0},s.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(u,a){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return s.alloc(0);var h;if(a===void 0)for(a=0,h=0;h<u.length;++h)a+=u[h].length;var m=s.allocUnsafe(a),w=0;for(h=0;h<u.length;++h){var x=u[h];if(de(x,Uint8Array))w+x.length>m.length?s.from(x).copy(m,w):Uint8Array.prototype.set.call(m,x,w);else if(s.isBuffer(x))x.copy(m,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=x.length}return m};function U(c,u){if(s.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||de(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(c));var a=c.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&a===0)return 0;for(var m=!1;;)switch(u){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return Bt(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return Nr(c).length;default:if(m)return h?-1:Bt(c).length;u=(""+u).toLowerCase(),m=!0}}s.byteLength=U;function C(c,u,a){var h=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,u>>>=0,a<=u))return"";for(c||(c="utf8");;)switch(c){case"hex":return ce(this,u,a);case"utf8":case"utf-8":return fe(this,u,a);case"ascii":return Le(this,u,a);case"latin1":case"binary":return k(this,u,a);case"base64":return X(this,u,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,u,a);default:if(h)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),h=!0}}s.prototype._isBuffer=!0;function E(c,u,a){var h=c[u];c[u]=c[a],c[a]=h}s.prototype.swap16=function(){var u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<u;a+=2)E(this,a,a+1);return this},s.prototype.swap32=function(){var u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<u;a+=4)E(this,a,a+3),E(this,a+1,a+2);return this},s.prototype.swap64=function(){var u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<u;a+=8)E(this,a,a+7),E(this,a+1,a+6),E(this,a+2,a+5),E(this,a+3,a+4);return this},s.prototype.toString=function(){var u=this.length;return u===0?"":arguments.length===0?fe(this,0,u):C.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(u){if(!s.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:s.compare(this,u)===0},s.prototype.inspect=function(){var u="",a=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(u+=" ... "),"<Buffer "+u+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(u,a,h,m,w){if(de(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(u));if(a===void 0&&(a=0),h===void 0&&(h=u?u.length:0),m===void 0&&(m=0),w===void 0&&(w=this.length),a<0||h>u.length||m<0||w>this.length)throw new RangeError("out of range index");if(m>=w&&a>=h)return 0;if(m>=w)return-1;if(a>=h)return 1;if(a>>>=0,h>>>=0,m>>>=0,w>>>=0,this===u)return 0;for(var x=w-m,A=h-a,$=Math.min(x,A),L=this.slice(m,w),Y=u.slice(a,h),q=0;q<$;++q)if(L[q]!==Y[q]){x=L[q],A=Y[q];break}return x<A?-1:A<x?1:0};function J(c,u,a,h,m){if(c.length===0)return-1;if(typeof a=="string"?(h=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,It(a)&&(a=m?0:c.length-1),a<0&&(a=c.length+a),a>=c.length){if(m)return-1;a=c.length-1}else if(a<0)if(m)a=0;else return-1;if(typeof u=="string"&&(u=s.from(u,h)),s.isBuffer(u))return u.length===0?-1:M(c,u,a,h,m);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(c,u,a):Uint8Array.prototype.lastIndexOf.call(c,u,a):M(c,[u],a,h,m);throw new TypeError("val must be string, number or Buffer")}function M(c,u,a,h,m){var w=1,x=c.length,A=u.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(c.length<2||u.length<2)return-1;w=2,x/=2,A/=2,a/=2}function $(Tr,Br){return w===1?Tr[Br]:Tr.readUInt16BE(Br*w)}var L;if(m){var Y=-1;for(L=a;L<x;L++)if($(c,L)===$(u,Y===-1?0:L-Y)){if(Y===-1&&(Y=L),L-Y+1===A)return Y*w}else Y!==-1&&(L-=L-Y),Y=-1}else for(a+A>x&&(a=x-A),L=a;L>=0;L--){for(var q=!0,ut=0;ut<A;ut++)if($(c,L+ut)!==$(u,ut)){q=!1;break}if(q)return L}return-1}s.prototype.includes=function(u,a,h){return this.indexOf(u,a,h)!==-1},s.prototype.indexOf=function(u,a,h){return J(this,u,a,h,!0)},s.prototype.lastIndexOf=function(u,a,h){return J(this,u,a,h,!1)};function D(c,u,a,h){a=Number(a)||0;var m=c.length-a;h?(h=Number(h),h>m&&(h=m)):h=m;var w=u.length;h>w/2&&(h=w/2);for(var x=0;x<h;++x){var A=parseInt(u.substr(x*2,2),16);if(It(A))return x;c[a+x]=A}return x}function te(c,u,a,h){return ot(Bt(u,c.length-a),c,a,h)}function he(c,u,a,h){return ot(gi(u),c,a,h)}function Ue(c,u,a,h){return ot(Nr(u),c,a,h)}function be(c,u,a,h){return ot(wi(u,c.length-a),c,a,h)}s.prototype.write=function(u,a,h,m){if(a===void 0)m="utf8",h=this.length,a=0;else if(h===void 0&&typeof a=="string")m=a,h=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(h)?(h=h>>>0,m===void 0&&(m="utf8")):(m=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var w=this.length-a;if((h===void 0||h>w)&&(h=w),u.length>0&&(h<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");for(var x=!1;;)switch(m){case"hex":return D(this,u,a,h);case"utf8":case"utf-8":return te(this,u,a,h);case"ascii":case"latin1":case"binary":return he(this,u,a,h);case"base64":return Ue(this,u,a,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,u,a,h);default:if(x)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),x=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function X(c,u,a){return u===0&&a===c.length?$t.fromByteArray(c):$t.fromByteArray(c.slice(u,a))}function fe(c,u,a){a=Math.min(c.length,a);for(var h=[],m=u;m<a;){var w=c[m],x=null,A=w>239?4:w>223?3:w>191?2:1;if(m+A<=a){var $,L,Y,q;switch(A){case 1:w<128&&(x=w);break;case 2:$=c[m+1],($&192)===128&&(q=(w&31)<<6|$&63,q>127&&(x=q));break;case 3:$=c[m+1],L=c[m+2],($&192)===128&&(L&192)===128&&(q=(w&15)<<12|($&63)<<6|L&63,q>2047&&(q<55296||q>57343)&&(x=q));break;case 4:$=c[m+1],L=c[m+2],Y=c[m+3],($&192)===128&&(L&192)===128&&(Y&192)===128&&(q=(w&15)<<18|($&63)<<12|(L&63)<<6|Y&63,q>65535&&q<1114112&&(x=q))}}x===null?(x=65533,A=1):x>65535&&(x-=65536,h.push(x>>>10&1023|55296),x=56320|x&1023),h.push(x),m+=A}return it(h)}var pe=4096;function it(c){var u=c.length;if(u<=pe)return String.fromCharCode.apply(String,c);for(var a="",h=0;h<u;)a+=String.fromCharCode.apply(String,c.slice(h,h+=pe));return a}function Le(c,u,a){var h="";a=Math.min(c.length,a);for(var m=u;m<a;++m)h+=String.fromCharCode(c[m]&127);return h}function k(c,u,a){var h="";a=Math.min(c.length,a);for(var m=u;m<a;++m)h+=String.fromCharCode(c[m]);return h}function ce(c,u,a){var h=c.length;(!u||u<0)&&(u=0),(!a||a<0||a>h)&&(a=h);for(var m="",w=u;w<a;++w)m+=vi[c[w]];return m}function F(c,u,a){for(var h=c.slice(u,a),m="",w=0;w<h.length-1;w+=2)m+=String.fromCharCode(h[w]+h[w+1]*256);return m}s.prototype.slice=function(u,a){var h=this.length;u=~~u,a=a===void 0?h:~~a,u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),a<0?(a+=h,a<0&&(a=0)):a>h&&(a=h),a<u&&(a=u);var m=this.subarray(u,a);return Object.setPrototypeOf(m,s.prototype),m};function B(c,u,a){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+u>a)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(u,a,h){u=u>>>0,a=a>>>0,h||B(u,a,this.length);for(var m=this[u],w=1,x=0;++x<a&&(w*=256);)m+=this[u+x]*w;return m},s.prototype.readUintBE=s.prototype.readUIntBE=function(u,a,h){u=u>>>0,a=a>>>0,h||B(u,a,this.length);for(var m=this[u+--a],w=1;a>0&&(w*=256);)m+=this[u+--a]*w;return m},s.prototype.readUint8=s.prototype.readUInt8=function(u,a){return u=u>>>0,a||B(u,1,this.length),this[u]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(u,a){return u=u>>>0,a||B(u,2,this.length),this[u]|this[u+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(u,a){return u=u>>>0,a||B(u,2,this.length),this[u]<<8|this[u+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(u,a){return u=u>>>0,a||B(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(u,a){return u=u>>>0,a||B(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},s.prototype.readIntLE=function(u,a,h){u=u>>>0,a=a>>>0,h||B(u,a,this.length);for(var m=this[u],w=1,x=0;++x<a&&(w*=256);)m+=this[u+x]*w;return w*=128,m>=w&&(m-=Math.pow(2,8*a)),m},s.prototype.readIntBE=function(u,a,h){u=u>>>0,a=a>>>0,h||B(u,a,this.length);for(var m=a,w=1,x=this[u+--m];m>0&&(w*=256);)x+=this[u+--m]*w;return w*=128,x>=w&&(x-=Math.pow(2,8*a)),x},s.prototype.readInt8=function(u,a){return u=u>>>0,a||B(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},s.prototype.readInt16LE=function(u,a){u=u>>>0,a||B(u,2,this.length);var h=this[u]|this[u+1]<<8;return h&32768?h|4294901760:h},s.prototype.readInt16BE=function(u,a){u=u>>>0,a||B(u,2,this.length);var h=this[u+1]|this[u]<<8;return h&32768?h|4294901760:h},s.prototype.readInt32LE=function(u,a){return u=u>>>0,a||B(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},s.prototype.readInt32BE=function(u,a){return u=u>>>0,a||B(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},s.prototype.readFloatLE=function(u,a){return u=u>>>0,a||B(u,4,this.length),De.read(this,u,!0,23,4)},s.prototype.readFloatBE=function(u,a){return u=u>>>0,a||B(u,4,this.length),De.read(this,u,!1,23,4)},s.prototype.readDoubleLE=function(u,a){return u=u>>>0,a||B(u,8,this.length),De.read(this,u,!0,52,8)},s.prototype.readDoubleBE=function(u,a){return u=u>>>0,a||B(u,8,this.length),De.read(this,u,!1,52,8)};function ee(c,u,a,h,m,w){if(!s.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>m||u<w)throw new RangeError('"value" argument is out of bounds');if(a+h>c.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(u,a,h,m){if(u=+u,a=a>>>0,h=h>>>0,!m){var w=Math.pow(2,8*h)-1;ee(this,u,a,h,w,0)}var x=1,A=0;for(this[a]=u&255;++A<h&&(x*=256);)this[a+A]=u/x&255;return a+h},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(u,a,h,m){if(u=+u,a=a>>>0,h=h>>>0,!m){var w=Math.pow(2,8*h)-1;ee(this,u,a,h,w,0)}var x=h-1,A=1;for(this[a+x]=u&255;--x>=0&&(A*=256);)this[a+x]=u/A&255;return a+h},s.prototype.writeUint8=s.prototype.writeUInt8=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,1,255,0),this[a]=u&255,a+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,2,65535,0),this[a]=u&255,this[a+1]=u>>>8,a+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,2,65535,0),this[a]=u>>>8,this[a+1]=u&255,a+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,4,4294967295,0),this[a+3]=u>>>24,this[a+2]=u>>>16,this[a+1]=u>>>8,this[a]=u&255,a+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,4,4294967295,0),this[a]=u>>>24,this[a+1]=u>>>16,this[a+2]=u>>>8,this[a+3]=u&255,a+4},s.prototype.writeIntLE=function(u,a,h,m){if(u=+u,a=a>>>0,!m){var w=Math.pow(2,8*h-1);ee(this,u,a,h,w-1,-w)}var x=0,A=1,$=0;for(this[a]=u&255;++x<h&&(A*=256);)u<0&&$===0&&this[a+x-1]!==0&&($=1),this[a+x]=(u/A>>0)-$&255;return a+h},s.prototype.writeIntBE=function(u,a,h,m){if(u=+u,a=a>>>0,!m){var w=Math.pow(2,8*h-1);ee(this,u,a,h,w-1,-w)}var x=h-1,A=1,$=0;for(this[a+x]=u&255;--x>=0&&(A*=256);)u<0&&$===0&&this[a+x+1]!==0&&($=1),this[a+x]=(u/A>>0)-$&255;return a+h},s.prototype.writeInt8=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,1,127,-128),u<0&&(u=255+u+1),this[a]=u&255,a+1},s.prototype.writeInt16LE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,2,32767,-32768),this[a]=u&255,this[a+1]=u>>>8,a+2},s.prototype.writeInt16BE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,2,32767,-32768),this[a]=u>>>8,this[a+1]=u&255,a+2},s.prototype.writeInt32LE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,4,2147483647,-2147483648),this[a]=u&255,this[a+1]=u>>>8,this[a+2]=u>>>16,this[a+3]=u>>>24,a+4},s.prototype.writeInt32BE=function(u,a,h){return u=+u,a=a>>>0,h||ee(this,u,a,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[a]=u>>>24,this[a+1]=u>>>16,this[a+2]=u>>>8,this[a+3]=u&255,a+4};function Er(c,u,a,h,m,w){if(a+h>c.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function Or(c,u,a,h,m){return u=+u,a=a>>>0,m||Er(c,u,a,4),De.write(c,u,a,h,23,4),a+4}s.prototype.writeFloatLE=function(u,a,h){return Or(this,u,a,!0,h)},s.prototype.writeFloatBE=function(u,a,h){return Or(this,u,a,!1,h)};function Sr(c,u,a,h,m){return u=+u,a=a>>>0,m||Er(c,u,a,8),De.write(c,u,a,h,52,8),a+8}s.prototype.writeDoubleLE=function(u,a,h){return Sr(this,u,a,!0,h)},s.prototype.writeDoubleBE=function(u,a,h){return Sr(this,u,a,!1,h)},s.prototype.copy=function(u,a,h,m){if(!s.isBuffer(u))throw new TypeError("argument should be a Buffer");if(h||(h=0),!m&&m!==0&&(m=this.length),a>=u.length&&(a=u.length),a||(a=0),m>0&&m<h&&(m=h),m===h||u.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),u.length-a<m-h&&(m=u.length-a+h);var w=m-h;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,h,m):Uint8Array.prototype.set.call(u,this.subarray(h,m),a),w},s.prototype.fill=function(u,a,h,m){if(typeof u=="string"){if(typeof a=="string"?(m=a,a=0,h=this.length):typeof h=="string"&&(m=h,h=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!s.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(u.length===1){var w=u.charCodeAt(0);(m==="utf8"&&w<128||m==="latin1")&&(u=w)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(a<0||this.length<a||this.length<h)throw new RangeError("Out of range index");if(h<=a)return this;a=a>>>0,h=h===void 0?this.length:h>>>0,u||(u=0);var x;if(typeof u=="number")for(x=a;x<h;++x)this[x]=u;else{var A=s.isBuffer(u)?u:s.from(u,m),$=A.length;if($===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(x=0;x<h-a;++x)this[x+a]=A[x%$]}return this};var mi=/[^+/0-9A-Za-z-_]/g;function yi(c){if(c=c.split("=")[0],c=c.trim().replace(mi,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Bt(c,u){u=u||1/0;for(var a,h=c.length,m=null,w=[],x=0;x<h;++x){if(a=c.charCodeAt(x),a>55295&&a<57344){if(!m){if(a>56319){(u-=3)>-1&&w.push(239,191,189);continue}else if(x+1===h){(u-=3)>-1&&w.push(239,191,189);continue}m=a;continue}if(a<56320){(u-=3)>-1&&w.push(239,191,189),m=a;continue}a=(m-55296<<10|a-56320)+65536}else m&&(u-=3)>-1&&w.push(239,191,189);if(m=null,a<128){if((u-=1)<0)break;w.push(a)}else if(a<2048){if((u-=2)<0)break;w.push(a>>6|192,a&63|128)}else if(a<65536){if((u-=3)<0)break;w.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((u-=4)<0)break;w.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return w}function gi(c){for(var u=[],a=0;a<c.length;++a)u.push(c.charCodeAt(a)&255);return u}function wi(c,u){for(var a,h,m,w=[],x=0;x<c.length&&!((u-=2)<0);++x)a=c.charCodeAt(x),h=a>>8,m=a%256,w.push(m),w.push(h);return w}function Nr(c){return $t.toByteArray(yi(c))}function ot(c,u,a,h){for(var m=0;m<h&&!(m+a>=u.length||m>=c.length);++m)u[m+a]=c[m];return m}function de(c,u){return c instanceof u||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===u.name}function It(c){return c!==c}var vi=function(){for(var c="0123456789abcdef",u=new Array(256),a=0;a<16;++a)for(var h=a*16,m=0;m<16;++m)u[h+m]=c[a]+c[m];return u}()}),j=vt.Buffer;vt.SlowBuffer;vt.INSPECT_MAX_BYTES;vt.kMaxLength;var rr=function(e,r){return rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},rr(e,r)};function bt(t,e){rr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $e=function(t){bt(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),H=function(t){bt(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function at(t){return t&&t.Math==Math&&t}function Tn(){return at(typeof globalThis=="object"&&globalThis)||at(typeof window=="object"&&window)||at(typeof self=="object"&&self)||at(typeof global=="object"&&global)||Function("return this")()}function Wi(){var t=Tn();return typeof t.navigator=="object"&&t.navigator.product==="ReactNative"}var zi=function(e){var r=Wi()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=j.alloc(e),o=0;o<e;++o)n[o]=Math.floor(Math.random()*256);return n},Xi=function(){{if(typeof window<"u"){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(j.alloc(e))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(e){return global.crypto.getRandomValues(j.alloc(e))}:zi}},Bn=Xi();function Yi(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}function lr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}function Zi(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Qi(t){return rt(t)&&Object.prototype.toString.call(t)==="[object Date]"}function rt(t){return typeof t=="object"&&t!==null}function xt(t,e){var r=!1;function n(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r||(console.warn(e),r=!0),t.apply(this,o)}return n}function lt(t){if(ArrayBuffer.isView(t))return j.from(t.buffer,t.byteOffset,t.byteLength);if(Yi(t))return j.from(t);throw new H("Must use either Buffer or TypedArray")}var Ki=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,In=function(t){return typeof t=="string"&&Ki.test(t)},nr=function(t){if(!In(t))throw new H('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return j.from(e,"hex")},Ir=function(t,e){return e===void 0&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},eo=Math.pow(2,53),to=-Math.pow(2,53),An=4,Te=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(e!=null&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!(e instanceof ArrayBuffer)&&!Array.isArray(e))throw new H("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=j.alloc(t.BUFFER_SIZE),this.position=0):(typeof e=="string"?this.buffer=j.from(e,"binary"):Array.isArray(e)?this.buffer=j.from(e):this.buffer=lt(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if(typeof e=="string"&&e.length!==1)throw new H("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new H("only accepts single character Uint8Array or Array");var r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new H("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=j.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+e.length){var n=j.alloc(this.buffer.length+e.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(e)?(this.buffer.set(lt(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position):typeof e=="string"&&(this.buffer.write(e,r,e.length,"binary"),this.position=r+e.length>this.position?r+e.length:this.position)},t.prototype.read=function(e,r){return r=r&&r>0?r:this.position,this.buffer.slice(e,e+r)},t.prototype.value=function(e){return e=!!e,e&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(e){return this.buffer.toString(e)},t.prototype.toExtendedJSON=function(e){e=e||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new Ar(this.buffer.slice(0,this.position));throw new $e('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,r){r=r||{};var n,o;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(o=e.$type?parseInt(e.$type,16):0,n=j.from(e.$binary,"base64")):typeof e.$binary!="string"&&(o=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=j.from(e.$binary.base64,"base64")):"$uuid"in e&&(o=4,n=nr(e.$uuid)),!n)throw new H("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return o===An?new Ar(n):new t(n,o)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.value(!0);return'new Binary(Buffer.from("'.concat(e.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(Te.prototype,"_bsontype",{value:"Binary"});var Rt=16,Ar=function(t){bt(e,t);function e(r){var n=this,o,i;if(r==null)o=e.generate();else if(r instanceof e)o=j.from(r.buffer),i=r.__id;else if(ArrayBuffer.isView(r)&&r.byteLength===Rt)o=lt(r);else if(typeof r=="string")o=nr(r);else throw new H("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");return n=t.call(this,o,An)||this,n.__id=i,n}return Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,e.cacheHexString&&(this.__id=Ir(r))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(r){if(r===void 0&&(r=!0),e.cacheHexString&&this.__id)return this.__id;var n=Ir(this.id,r);return e.cacheHexString&&(this.__id=n),n},e.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(r){if(!r)return!1;if(r instanceof e)return r.id.equals(this.id);try{return new e(r).id.equals(this.id)}catch{return!1}},e.prototype.toBinary=function(){return new Te(this.id,Te.SUBTYPE_UUID)},e.generate=function(){var r=Bn(Rt);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,j.from(r)},e.isValid=function(r){return r?r instanceof e?!0:typeof r=="string"?In(r):lr(r)?r.length!==Rt?!1:(r[6]&240)===64&&(r[8]&128)===128:!1:!1},e.createFromHexString=function(r){var n=nr(r);return new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},e}(Te),_t=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toJSON();return'new Code("'.concat(String(e.code),'"').concat(e.scope?", ".concat(JSON.stringify(e.scope)):"",")")},t}();Object.defineProperty(_t.prototype,"_bsontype",{value:"Code"});function ro(t){return rt(t)&&t.$id!=null&&typeof t.$ref=="string"&&(t.$db==null||typeof t.$db=="string")}var Qe=function(){function t(e,r,n,o){if(!(this instanceof t))return new t(e,r,n,o);var i=e.split(".");i.length===2&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=o||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e},t.prototype.toExtendedJSON=function(e){e=e||{};var r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(e),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(Qe.prototype,"_bsontype",{value:"DBRef"});var ue=void 0;try{ue=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Ur=1<<16,no=1<<24,Ge=Ur*Ur,Un=Ge*Ge,Fr=Un/2,Pr={},jr={},S=function(){function t(e,r,n){if(e===void 0&&(e=0),!(this instanceof t))return new t(e,r,n);typeof e=="bigint"?Object.assign(this,t.fromBigInt(e,!!r)):typeof e=="string"?Object.assign(this,t.fromString(e,!!r)):(this.low=e|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,o,i;return r?(e>>>=0,(i=0<=e&&e<256)&&(o=jr[e],o)?o:(n=t.fromBits(e,(e|0)<0?-1:0,!0),i&&(jr[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(o=Pr[e],o)?o:(n=t.fromBits(e,e<0?-1:0,!1),i&&(Pr[e]=n),n))},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=Un)return t.MAX_UNSIGNED_VALUE}else{if(e<=-Fr)return t.MIN_VALUE;if(e+1>=Fr)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%Ge|0,e/Ge|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return t.fromString(e.substring(1),r,n).neg();for(var i=t.fromNumber(Math.pow(n,8)),s=t.ZERO,l=0;l<e.length;l+=8){var d=Math.min(8,e.length-l),f=parseInt(e.substring(l,l+d),n);if(d<8){var p=t.fromNumber(Math.pow(n,d));s=s.mul(p).add(t.fromNumber(f))}else s=s.mul(i),s=s.add(t.fromNumber(f))}return s.unsigned=r,s},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(e){return rt(e)&&e.__isLong__===!0},t.fromValue=function(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,l=e.high&65535,d=e.low>>>16,f=e.low&65535,p=0,y=0,g=0,b=0;return b+=i+f,g+=b>>>16,b&=65535,g+=o+d,y+=g>>>16,g&=65535,y+=n+l,p+=y>>>16,y&=65535,p+=r+s,p&=65535,t.fromBits(g<<16|b,p<<16|y,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(e){return this.compare(e)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(ue){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?ue.div_u:ue.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,ue.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE)){if(e.eq(t.ONE)||e.eq(t.NEG_ONE))return t.MIN_VALUE;if(e.eq(t.MIN_VALUE))return t.ONE;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(o=this.sub(e.mul(n)),i=n.add(o.div(e)),i)}else if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var l=Math.ceil(Math.log(n)/Math.LN2),d=l<=48?1:Math.pow(2,l-48),f=t.fromNumber(n),p=f.mul(e);p.isNegative()||p.gt(o);)n-=d,f=t.fromNumber(n,this.unsigned),p=f.mul(e);f.isZero()&&(f=t.ONE),i=i.add(f),o=o.sub(p)}return i},t.prototype.div=function(e){return this.divide(e)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.eq=function(e){return this.equals(e)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(e&1<<r);r--);return this.high!==0?r+33:r+1},t.prototype.greaterThan=function(e){return this.comp(e)>0},t.prototype.gt=function(e){return this.greaterThan(e)},t.prototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},t.prototype.gte=function(e){return this.greaterThanOrEqual(e)},t.prototype.ge=function(e){return this.greaterThanOrEqual(e)},t.prototype.isEven=function(){return(this.low&1)===0},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return(this.low&1)===1},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return this.high===0&&this.low===0},t.prototype.lessThan=function(e){return this.comp(e)<0},t.prototype.lt=function(e){return this.lessThan(e)},t.prototype.lessThanOrEqual=function(e){return this.comp(e)<=0},t.prototype.lte=function(e){return this.lessThanOrEqual(e)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),ue){var r=(this.unsigned?ue.rem_u:ue.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,ue.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(e){return this.modulo(e)},t.prototype.rem=function(e){return this.modulo(e)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),ue){var r=ue.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,ue.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,l=e.high>>>16,d=e.high&65535,f=e.low>>>16,p=e.low&65535,y=0,g=0,b=0,O=0;return O+=s*p,b+=O>>>16,O&=65535,b+=i*p,g+=b>>>16,b&=65535,b+=s*f,g+=b>>>16,b&=65535,g+=o*p,y+=g>>>16,g&=65535,g+=i*f,y+=g>>>16,g&=65535,g+=s*d,y+=g>>>16,g&=65535,y+=n*p+o*f+i*d+s*l,y&=65535,t.fromBits(b<<16|O,y<<16|g,this.unsigned)},t.prototype.mul=function(e){return this.multiply(e)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(e){return!this.equals(e)},t.prototype.neq=function(e){return this.notEquals(e)},t.prototype.ne=function(e){return this.notEquals(e)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(e){return this.shiftLeft(e)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(e){return this.shiftRight(e)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(e){return this.shiftRightUnsigned(e)},t.prototype.shru=function(e){return this.shiftRightUnsigned(e)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(e){return this.subtract(e)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Ge+(this.low>>>0):this.high*Ge+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},t.prototype.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),o=n.mul(r).sub(this);return n.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,l="";;){var d=s.div(i),f=s.sub(d.mul(i)).toInt()>>>0,p=f.toString(e);if(s=d,s.isZero())return p+l;for(;p.length<6;)p="0"+p;l=""+p+l}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(e){return this.lessThanOrEqual(e)},t.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(no),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(S.prototype,"__isLong__",{value:!0});Object.defineProperty(S.prototype,"_bsontype",{value:"Long"});var io=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,oo=/^(\+|-)?(Infinity|inf)$/i,uo=/^(\+|-)?NaN$/i,ze=6111,Ct=-6176,$r=6176,ao=34,Lt=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Rr=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Cr=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),so=/^([-+])?(\d+)?$/,fo=31,Lr=16383,co=30,lo=31;function Mr(t){return!isNaN(parseInt(t,10))}function ho(t){var e=S.fromNumber(1e9),r=S.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new S(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function po(t,e){if(!t&&!e)return{high:S.fromNumber(0),low:S.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new S(t.getLowBits(),0),o=e.shiftRightUnsigned(32),i=new S(e.getLowBits(),0),s=r.multiply(o),l=r.multiply(i),d=n.multiply(o),f=n.multiply(i);return s=s.add(l.shiftRightUnsigned(32)),l=new S(l.getLowBits(),0).add(d).add(f.shiftRightUnsigned(32)),s=s.add(l.shiftRightUnsigned(32)),f=l.shiftLeft(32).add(new S(f.getLowBits(),0)),{high:s,low:f}}function mo(t,e){var r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){var o=t.low>>>0,i=e.low>>>0;if(o<i)return!0}return!1}function ke(t,e){throw new H('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var hr=function(){function t(e){if(!(this instanceof t))return new t(e);if(typeof e=="string")this.bytes=t.fromString(e).bytes;else if(lr(e)){if(e.byteLength!==16)throw new H("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new H("Decimal128 must take a Buffer or string")}return t.fromString=function(e){var r=!1,n=!1,o=!1,i=0,s=0,l=0,d=0,f=0,p=[0],y=0,g=0,b=0,O=0,T=0,_=0,R=new S(0,0),U=new S(0,0),C=0,E=0;if(e.length>=7e3)throw new H(""+e+" not a valid Decimal128 string");var J=e.match(io),M=e.match(oo),D=e.match(uo);if(!J&&!M&&!D||e.length===0)throw new H(""+e+" not a valid Decimal128 string");if(J){var te=J[2],he=J[4],Ue=J[5],be=J[6];he&&be===void 0&&ke(e,"missing exponent power"),he&&te===void 0&&ke(e,"missing exponent base"),he===void 0&&(Ue||be)&&ke(e,"missing e before exponent")}if((e[E]==="+"||e[E]==="-")&&(r=e[E++]==="-"),!Mr(e[E])&&e[E]!=="."){if(e[E]==="i"||e[E]==="I")return new t(j.from(r?Rr:Cr));if(e[E]==="N")return new t(j.from(Lt))}for(;Mr(e[E])||e[E]===".";){if(e[E]==="."){n&&ke(e,"contains multiple periods"),n=!0,E=E+1;continue}y<34&&(e[E]!=="0"||o)&&(o||(f=s),o=!0,p[g++]=parseInt(e[E],10),y=y+1),o&&(l=l+1),n&&(d=d+1),s=s+1,E=E+1}if(n&&!s)throw new H(""+e+" not a valid Decimal128 string");if(e[E]==="e"||e[E]==="E"){var X=e.substr(++E).match(so);if(!X||!X[2])return new t(j.from(Lt));T=parseInt(X[0],10),E=E+X[0].length}if(e[E])return new t(j.from(Lt));if(b=0,!y)b=0,O=0,p[0]=0,l=1,y=1,i=0;else if(O=y-1,i=l,i!==1)for(;p[f+i-1]===0;)i=i-1;for(T<=d&&d-T>1<<14?T=Ct:T=T-d;T>ze;){if(O=O+1,O-b>ao){var fe=p.join("");if(fe.match(/^0+$/)){T=ze;break}ke(e,"overflow")}T=T-1}for(;T<Ct||y<l;){if(O===0&&i<y){T=Ct,i=0;break}if(y<l?l=l-1:O=O-1,T<ze)T=T+1;else{var fe=p.join("");if(fe.match(/^0+$/)){T=ze;break}ke(e,"overflow")}}if(O-b+1<i){var pe=s;n&&(f=f+1,pe=pe+1),r&&(f=f+1,pe=pe+1);var it=parseInt(e[f+O+1],10),Le=0;if(it>=5&&(Le=1,it===5)){for(Le=p[O]%2===1?1:0,_=f+O+2;_<pe;_++)if(parseInt(e[_],10)){Le=1;break}}if(Le){for(var k=O;k>=0;k--)if(++p[k]>9&&(p[k]=0,k===0))if(T<ze)T=T+1,p[k]=1;else return new t(j.from(r?Rr:Cr))}}if(R=S.fromNumber(0),U=S.fromNumber(0),i===0)R=S.fromNumber(0),U=S.fromNumber(0);else if(O-b<17){var k=b;for(U=S.fromNumber(p[k++]),R=new S(0,0);k<=O;k++)U=U.multiply(S.fromNumber(10)),U=U.add(S.fromNumber(p[k]))}else{var k=b;for(R=S.fromNumber(p[k++]);k<=O-17;k++)R=R.multiply(S.fromNumber(10)),R=R.add(S.fromNumber(p[k]));for(U=S.fromNumber(p[k++]);k<=O;k++)U=U.multiply(S.fromNumber(10)),U=U.add(S.fromNumber(p[k]))}var ce=po(R,S.fromString("100000000000000000"));ce.low=ce.low.add(U),mo(ce.low,U)&&(ce.high=ce.high.add(S.fromNumber(1))),C=T+$r;var F={low:S.fromNumber(0),high:S.fromNumber(0)};ce.high.shiftRightUnsigned(49).and(S.fromNumber(1)).equals(S.fromNumber(1))?(F.high=F.high.or(S.fromNumber(3).shiftLeft(61)),F.high=F.high.or(S.fromNumber(C).and(S.fromNumber(16383).shiftLeft(47))),F.high=F.high.or(ce.high.and(S.fromNumber(0x7fffffffffff)))):(F.high=F.high.or(S.fromNumber(C&16383).shiftLeft(49)),F.high=F.high.or(ce.high.and(S.fromNumber(562949953421311)))),F.low=ce.low,r&&(F.high=F.high.or(S.fromString("9223372036854775808")));var B=j.alloc(16);return E=0,B[E++]=F.low.low&255,B[E++]=F.low.low>>8&255,B[E++]=F.low.low>>16&255,B[E++]=F.low.low>>24&255,B[E++]=F.low.high&255,B[E++]=F.low.high>>8&255,B[E++]=F.low.high>>16&255,B[E++]=F.low.high>>24&255,B[E++]=F.high.low&255,B[E++]=F.high.low>>8&255,B[E++]=F.high.low>>16&255,B[E++]=F.high.low>>24&255,B[E++]=F.high.high&255,B[E++]=F.high.high>>8&255,B[E++]=F.high.high>>16&255,B[E++]=F.high.high>>24&255,new t(B)},t.prototype.toString=function(){for(var e,r=0,n=new Array(36),o=0;o<n.length;o++)n[o]=0;var i=0,s=!1,l,d={parts:[0,0,0,0]},f,p,y=[];i=0;var g=this.bytes,b=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24,O=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24,T=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24,_=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24;i=0;var R={low:new S(b,O),high:new S(T,_)};R.high.lessThan(S.ZERO)&&y.push("-");var U=_>>26&fo;if(U>>3===3){if(U===co)return y.join("")+"Infinity";if(U===lo)return"NaN";e=_>>15&Lr,l=8+(_>>14&1)}else l=_>>14&7,e=_>>17&Lr;var C=e-$r;if(d.parts[0]=(_&16383)+((l&15)<<14),d.parts[1]=T,d.parts[2]=O,d.parts[3]=b,d.parts[0]===0&&d.parts[1]===0&&d.parts[2]===0&&d.parts[3]===0)s=!0;else for(p=3;p>=0;p--){var E=0,J=ho(d);if(d=J.quotient,E=J.rem.low,!!E)for(f=8;f>=0;f--)n[p*9+f]=E%10,E=Math.floor(E/10)}if(s)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;var M=r-1+C;if(M>=34||M<=-7||C>0){if(r>34)return y.push("".concat(0)),C>0?y.push("E+".concat(C)):C<0&&y.push("E".concat(C)),y.join("");y.push("".concat(n[i++])),r=r-1,r&&y.push(".");for(var o=0;o<r;o++)y.push("".concat(n[i++]));y.push("E"),M>0?y.push("+".concat(M)):y.push("".concat(M))}else if(C>=0)for(var o=0;o<r;o++)y.push("".concat(n[i++]));else{var D=r+C;if(D>0)for(var o=0;o<D;o++)y.push("".concat(n[i++]));else y.push("0");for(y.push(".");D++<0;)y.push("0");for(var o=0;o<r-Math.max(D-1,0);o++)y.push("".concat(n[i++]))}return y.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(hr.prototype,"_bsontype",{value:"Decimal128"});var Et=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toExtendedJSON=function(e){if(e&&(e.legacy||e.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-".concat(this.value.toFixed(1))};var r;return Number.isInteger(this.value)?(r=this.value.toFixed(1),r.length>=13&&(r=this.value.toExponential(13).toUpperCase())):r=this.value.toString(),{$numberDouble:r}},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toExtendedJSON();return"new Double(".concat(e.$numberDouble,")")},t}();Object.defineProperty(Et.prototype,"_bsontype",{value:"Double"});var Ot=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e|0}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty(Ot.prototype,"_bsontype",{value:"Int32"});var pr=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(pr.prototype,"_bsontype",{value:"MaxKey"});var dr=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(dr.prototype,"_bsontype",{value:"MinKey"});var yo=new RegExp("^[0-9a-fA-F]{24}$"),Pe=null,me=Symbol("id"),K=function(){function t(e){if(!(this instanceof t))return new t(e);var r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new H("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=j.from(e.toHexString(),"hex"):r=e.id}else r=e;if(r==null||typeof r=="number")this[me]=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[me]=r instanceof j?r:lt(r);else if(typeof r=="string")if(r.length===12){var n=j.from(r);if(n.byteLength===12)this[me]=n;else throw new H("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&yo.test(r))this[me]=j.from(r,"hex");else throw new H("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new H("Argument passed in does not match the accepted types");t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[me]},set:function(e){this[me]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(e){this.id.writeUInt32BE(e,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));var r=t.getInc(),n=j.alloc(12);return n.writeUInt32BE(e,0),Pe===null&&(Pe=Bn(5)),n[4]=Pe[0],n[5]=Pe[1],n[6]=Pe[2],n[7]=Pe[3],n[8]=Pe[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(e==null)return!1;if(e instanceof t)return this[me][11]===e[me][11]&&this[me].equals(e[me]);if(typeof e=="string"&&t.isValid(e)&&e.length===12&&lr(this.id))return e===j.prototype.toString.call(this.id,"latin1");if(typeof e=="string"&&t.isValid(e)&&e.length===24)return e.toLowerCase()===this.toHexString();if(typeof e=="string"&&t.isValid(e)&&e.length===12)return j.from(e).equals(this.id);if(typeof e=="object"&&"toHexString"in e&&typeof e.toHexString=="function"){var r=e.toHexString(),n=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===n}return!1},t.prototype.getTimestamp=function(){var e=new Date,r=this.id.readUInt32BE(0);return e.setTime(Math.floor(r)*1e3),e},t.createPk=function(){return new t},t.createFromTime=function(e){var r=j.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(typeof e>"u"||e!=null&&e.length!==24)throw new H("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(j.from(e,"hex"))},t.isValid=function(e){if(e==null)return!1;try{return new t(e),!0}catch{return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(Math.random()*16777215),t}();Object.defineProperty(K.prototype,"generate",{value:xt(function(t){return K.generate(t)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(K.prototype,"getInc",{value:xt(function(){return K.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(K.prototype,"get_inc",{value:xt(function(){return K.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(K,"get_inc",{value:xt(function(){return K.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(K.prototype,"_bsontype",{value:"ObjectID"});function go(t){return t.split("").sort().join("")}var Ke=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.pattern=e,this.options=go(r??""),this.pattern.indexOf("\0")!==-1)throw new $e("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(this.options.indexOf("\0")!==-1)throw new $e("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new $e("The regular expression option [".concat(this.options[n],"] is not supported"))}return t.parseOptions=function(e){return e?e.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new H("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(Ke.prototype,"_bsontype",{value:"BSONRegExp"});var mr=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(mr.prototype,"_bsontype",{value:"Symbol"});var wo=S,Fn=function(t){bt(e,t);function e(r,n){var o=this;return o instanceof e?(S.isLong(r)?o=t.call(this,r.low,r.high,!0)||this:rt(r)&&typeof r.t<"u"&&typeof r.i<"u"?o=t.call(this,r.i,r.t,!0)||this:o=t.call(this,r,n,!0)||this,Object.defineProperty(o,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),o):new e(r,n)}return e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(r){return new e(S.fromInt(r,!0))},e.fromNumber=function(r){return new e(S.fromNumber(r,!0))},e.fromBits=function(r,n){return new e(r,n)},e.fromString=function(r,n){return new e(S.fromString(r,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(r){return new e(r.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=S.MAX_UNSIGNED_VALUE,e}(wo);function vo(t){return rt(t)&&Reflect.has(t,"_bsontype")&&typeof t._bsontype=="string"}var Pn=2147483647,jn=-2147483648,$n=9223372036854776e3,Rn=-9223372036854776e3,bo={$oid:K,$binary:Te,$uuid:Te,$symbol:mr,$numberInt:Ot,$numberDecimal:hr,$numberDouble:Et,$numberLong:S,$minKey:dr,$maxKey:pr,$regex:Ke,$regularExpression:Ke,$timestamp:Fn};function Cn(t,e){if(e===void 0&&(e={}),typeof t=="number"){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=jn&&t<=Pn)return new Ot(t);if(t>=Rn&&t<=$n)return S.fromNumber(t)}return new Et(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter(function(y){return y.startsWith("$")&&t[y]!=null}),n=0;n<r.length;n++){var o=bo[r[n]];if(o)return o.fromExtendedJSON(t,e)}if(t.$date!=null){var i=t.$date,s=new Date;return e.legacy?typeof i=="number"?s.setTime(i):typeof i=="string"&&s.setTime(Date.parse(i)):typeof i=="string"?s.setTime(Date.parse(i)):S.isLong(i)?s.setTime(i.toNumber()):typeof i=="number"&&e.relaxed&&s.setTime(i),s}if(t.$code!=null){var l=Object.assign({},t);return t.$scope&&(l.$scope=Cn(t.$scope)),_t.fromExtendedJSON(t)}if(ro(t)||t.$dbPointer){var d=t.$ref?t:t.$dbPointer;if(d instanceof Qe)return d;var f=Object.keys(d).filter(function(y){return y.startsWith("$")}),p=!0;if(f.forEach(function(y){["$ref","$id","$db"].indexOf(y)===-1&&(p=!1)}),p)return Qe.fromExtendedJSON(d)}return t}function xo(t,e){return t.map(function(r,n){e.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return Ee(r,e)}finally{e.seenObjects.pop()}})}function Dr(t){var e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function Ee(t,e){if((typeof t=="object"||typeof t=="function")&&t!==null){var r=e.seenObjects.findIndex(function(R){return R.obj===t});if(r!==-1){var n=e.seenObjects.map(function(R){return R.propertyName}),o=n.slice(0,r).map(function(R){return"".concat(R," -> ")}).join(""),i=n[r],s=" -> "+n.slice(r+1,n.length-1).map(function(R){return"".concat(R," -> ")}).join(""),l=n[n.length-1],d=" ".repeat(o.length+i.length/2),f="-".repeat(s.length+(i.length+l.length)/2-1);throw new H(`Converting circular structure to EJSON:
`+"    ".concat(o).concat(i).concat(s).concat(l,`
`)+"    ".concat(d,"\\").concat(f,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return xo(t,e);if(t===void 0)return null;if(t instanceof Date||Qi(t)){var p=t.getTime(),y=p>-1&&p<2534023188e5;return e.legacy?e.relaxed&&y?{$date:t.getTime()}:{$date:Dr(t)}:e.relaxed&&y?{$date:Dr(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Math.floor(t)===t){var g=t>=jn&&t<=Pn,b=t>=Rn&&t<=$n;if(g)return{$numberInt:t.toString()};if(b)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||Zi(t)){var O=t.flags;if(O===void 0){var T=t.toString().match(/[gimuy]*$/);T&&(O=T[0])}var _=new Ke(t.source,O);return _.toExtendedJSON(e)}return t!=null&&typeof t=="object"?Eo(t,e):t}var _o={Binary:function(t){return new Te(t.value(),t.sub_type)},Code:function(t){return new _t(t.code,t.scope)},DBRef:function(t){return new Qe(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new hr(t.bytes)},Double:function(t){return new Et(t.value)},Int32:function(t){return new Ot(t.value)},Long:function(t){return S.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_)},MaxKey:function(){return new pr},MinKey:function(){return new dr},ObjectID:function(t){return new K(t)},ObjectId:function(t){return new K(t)},BSONRegExp:function(t){return new Ke(t.pattern,t.options)},Symbol:function(t){return new mr(t.value)},Timestamp:function(t){return Fn.fromBits(t.low,t.high)}};function Eo(t,e){if(t==null||typeof t!="object")throw new $e("not an object instance");var r=t._bsontype;if(typeof r>"u"){var n={};for(var o in t){e.seenObjects.push({propertyName:o,obj:null});try{var i=Ee(t[o],e);o==="__proto__"?Object.defineProperty(n,o,{value:i,writable:!0,enumerable:!0,configurable:!0}):n[o]=i}finally{e.seenObjects.pop()}}return n}else if(vo(t)){var s=t;if(typeof s.toExtendedJSON!="function"){var l=_o[t._bsontype];if(!l)throw new H("Unrecognized or invalid _bsontype: "+t._bsontype);s=l(s)}return r==="Code"&&s.scope?s=new _t(s.code,Ee(s.scope,e)):r==="DBRef"&&s.oid&&(s=new Qe(Ee(s.collection,e),Ee(s.oid,e),Ee(s.db,e),Ee(s.fields,e))),s.toExtendedJSON(e)}else throw new $e("_bsontype must be a string, but was: "+typeof r)}var We;(function(t){function e(i,s){var l=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof l.relaxed=="boolean"&&(l.strict=!l.relaxed),typeof l.strict=="boolean"&&(l.relaxed=!l.strict),JSON.parse(i,function(d,f){if(d.indexOf("\0")!==-1)throw new $e("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(d)));return Cn(f,l)})}t.parse=e;function r(i,s,l,d){l!=null&&typeof l=="object"&&(d=l,l=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(d=s,s=void 0,l=0);var f=Object.assign({relaxed:!0,legacy:!1},d,{seenObjects:[{propertyName:"(root)",obj:null}]}),p=Ee(i,f);return JSON.stringify(p,s,l)}t.stringify=r;function n(i,s){return s=s||{},JSON.parse(r(i,s))}t.serialize=n;function o(i,s){return s=s||{},e(JSON.stringify(i),s)}t.deserialize=o})(We||(We={}));var kr=Tn();kr.Map?kr.Map:function(){function t(e){e===void 0&&(e=[]),this._keys=[],this._values={};for(var r=0;r<e.length;r++)if(e[r]!=null){var n=e[r],o=n[0],i=n[1];this._keys.push(o),this._values[o]={v:i,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var r=this._values[e];return r==null?!1:(delete this._values[e],this._keys.splice(r.i,1),!0)},t.prototype.entries=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?[n,e._values[n].v]:void 0,done:n===void 0}}}},t.prototype.forEach=function(e,r){r=r||this;for(var n=0;n<this._keys.length;n++){var o=this._keys[n];e.call(r,this._values[o].v,o,r)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return this._values[e]!=null},t.prototype.keys=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},t.prototype.set=function(e,r){return this._values[e]?(this._values[e].v=r,this):(this._keys.push(e),this._values[e]={v:r,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?e._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();S.fromNumber(eo);S.fromNumber(to);var Mt=new Uint8Array(8);new DataView(Mt.buffer,Mt.byteOffset,Mt.byteLength);var Oo=1024*1024*17;j.alloc(Oo);var So=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),st=[],qr={},No=function(){function t(e){Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:e}})}return t}(),ie=function(t){So(e,t);function e(r,n){var o=this;if(n!==qr)throw new TypeError("InternalSymbol cannot be constructed with new operator");return o=t.call(this,r)||this,o}return e.for=function(r){for(var n=0,o=st.length;n<o;n++)if(st[n].target===r)return st[n].instance;var i=new e(r,qr);return st.push({target:r,instance:i}),i},e}(No),et=ie.for("UNSET_FIELD_NAME"),Ln=ie.for("UPDATE_COMMAND"),Mn=ie.for("QUERY_COMMAND"),Dn=ie.for("LOGIC_COMMAND"),kn=ie.for("GEO_POINT"),To=ie.for("SYMBOL_GEO_LINE_STRING"),Bo=ie.for("SYMBOL_GEO_POLYGON"),Io=ie.for("SYMBOL_GEO_MULTI_POINT"),Ao=ie.for("SYMBOL_GEO_MULTI_LINE_STRING"),Uo=ie.for("SYMBOL_GEO_MULTI_POLYGON"),qn=ie.for("SERVER_DATE"),Hn=ie.for("REGEXP"),Gn=function(){function t(e){var r=(e===void 0?{}:e).offset,n=r===void 0?0:r;this.offset=n}return Object.defineProperty(t.prototype,"_internalType",{get:function(){return qn},enumerable:!0,configurable:!0}),t.prototype.parse=function(){return{$date:{offset:this.offset}}},t}();function Fo(t){return new Gn(t)}var yr=function(){function t(){}return t.formatResDocumentData=function(e){return e.map(function(r){return t.formatField(r)})},t.formatField=function(e){var r=Object.keys(e),n={};return Array.isArray(e)&&(n=[]),r.forEach(function(o){var i=e[o],s=t.whichType(i),l;switch(s){case P.GeoPoint:l=new re(i.coordinates[0],i.coordinates[1]);break;case P.GeoLineString:l=new we(i.coordinates.map(function(d){return new re(d[0],d[1])}));break;case P.GeoPolygon:l=new Re(i.coordinates.map(function(d){return new we(d.map(function(f){var p=f[0],y=f[1];return new re(p,y)}))}));break;case P.GeoMultiPoint:l=new ht(i.coordinates.map(function(d){return new re(d[0],d[1])}));break;case P.GeoMultiLineString:l=new pt(i.coordinates.map(function(d){return new we(d.map(function(f){var p=f[0],y=f[1];return new re(p,y)}))}));break;case P.GeoMultiPolygon:l=new tt(i.coordinates.map(function(d){return new Re(d.map(function(f){return new we(f.map(function(p){var y=p[0],g=p[1];return new re(y,g)}))}))}));break;case P.Timestamp:l=new Date(i.$timestamp*1e3);break;case P.Object:case P.Array:l=t.formatField(i);break;case P.ServerDate:l=new Date(i.$date);break;case P.ObjectId:l=We.deserialize(i);break;case P.Binary:l=We.deserialize(i);break;default:l=i}Array.isArray(n)?n.push(l):n[o]=l}),n},t.whichType=function(e){var r=Object.prototype.toString.call(e).slice(8,-1);if(r===P.Timestamp)return P.BsonDate;if(r===P.Object){if(e instanceof re)return P.GeoPoint;if(e instanceof Date)return P.Timestamp;if(e instanceof Gn)return P.ServerDate;if(e instanceof K)return P.ObjectId;if(e instanceof Te)return P.Binary;e.$timestamp?r=P.Timestamp:e.$date?r=P.ServerDate:re.validate(e)?r=P.GeoPoint:we.validate(e)?r=P.GeoLineString:Re.validate(e)?r=P.GeoPolygon:ht.validate(e)?r=P.GeoMultiPoint:pt.validate(e)?r=P.GeoMultiLineString:tt.validate(e)?r=P.GeoMultiPolygon:e.$oid?r=P.ObjectId:e.$binary&&(r=P.Binary)}return r},t}(),Q=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},ve=function(t){return Q(t)==="object"},Po=function(t){return Q(t)==="string"},se=function(t){return Q(t)==="number"},G=function(t){return Array.isArray(t)},Jn=function(t){return Q(t)==="date"},gr=function(t){return Q(t)==="regexp"},Vn=function(t){return t&&t._internalType instanceof ie},Wn=function(t){return(t==null?void 0:t._bsontype)==="ObjectID"},zn=function(t){return(t==null?void 0:t._bsontype)==="Binary"},_e=function(){function t(){}return t.isValidAggregation=function(e){if(Object.keys(e).length!==1)throw new Error("aggregation stage must have one key");return!0},t.isGeopoint=function(e,r){if(yr.whichType(r)!==P.Number)throw new Error("Geo Point must be number type");var n=Math.abs(r);if(e==="latitude"&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if(e==="longitude"&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0},t.isInteger=function(e,r){if(!Number.isInteger(r))throw new Error(e+Oe.IntegerError);return!0},t.isProjection=function(e,r){if(Q(r)!=="object")throw new Error(e+" projection must be an object");for(var n in r){var o=r[n];if(Q(o)==="number"){if(o!==0&&o!==1)throw new Error("if the value in projection is of number, it must be 0 or 1")}else if(Q(o)!=="object")throw new Error("invalid projection")}return!0},t.isOrder=function(e,r){if(Q(r)!=="object")throw new Error(e+" order must be an object");for(var n in r){var o=r[n];if(o!==1&&o!==-1)throw new Error("order value must be 1 or -1")}return!0},t.isFieldOrder=function(e){if(Ui.indexOf(e)===-1)throw new Error(Oe.DirectionError);return!0},t.isFieldPath=function(e){if(!/^[a-zA-Z0-9-_\.]/.test(e))throw new Error;return!0},t.isOperator=function(e){if(Fi.indexOf(e)===-1)throw new Error(Oe.OpStrError);return!0},t.isCollName=function(e){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(e))throw new Error(Oe.CollNameError);return!0},t}(),re=function(){function t(e,r){_e.isGeopoint("longitude",e),_e.isGeopoint("latitude",r),this.longitude=e,this.latitude=r}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"Point",coordinates:[this.longitude,this.latitude]},r},t.prototype.toJSON=function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}},t.prototype.toReadableString=function(){return"["+this.longitude+","+this.latitude+"]"},t.validate=function(e){return e.type==="Point"&&G(e.coordinates)&&_e.isGeopoint("longitude",e.coordinates[0])&&_e.isGeopoint("latitude",e.coordinates[1])},Object.defineProperty(t.prototype,"_internalType",{get:function(){return kn},enumerable:!0,configurable:!0}),t}(),we=function(){function t(e){if(!G(e))throw new TypeError('"points" must be of type Point[]. Received type '+typeof e);if(e.length<2)throw new Error('"points" must contain 2 points at least');e.forEach(function(r){if(!(r instanceof re))throw new TypeError('"points" must be of type Point[]. Received type '+typeof r+"[]")}),this.points=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"LineString",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},t.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map(function(e){return e.toJSON().coordinates})}},t.validate=function(e){if(e.type!=="LineString"||!G(e.coordinates))return!1;for(var r=0,n=e.coordinates;r<n.length;r++){var o=n[r];if(!se(o[0])||!se(o[1]))return!1}return!0},t.isClosed=function(e){var r=e.points[0],n=e.points[e.points.length-1];if(r.latitude===n.latitude&&r.longitude===n.longitude)return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return To},enumerable:!0,configurable:!0}),t}(),Re=function(){function t(e){if(!G(e))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof e);if(e.length===0)throw new Error("Polygon must contain 1 linestring at least");e.forEach(function(r){if(!(r instanceof we))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof r+"[]");if(!we.isClosed(r))throw new Error("LineString "+r.points.map(function(n){return n.toReadableString()})+" is not a closed cycle")}),this.lines=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"Polygon",coordinates:this.lines.map(function(n){return n.points.map(function(o){return[o.longitude,o.latitude]})})},r},t.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map(function(e){return e.points.map(function(r){return[r.longitude,r.latitude]})})}},t.validate=function(e){if(e.type!=="Polygon"||!G(e.coordinates))return!1;for(var r=0,n=e.coordinates;r<n.length;r++){var o=n[r];if(!this.isCloseLineString(o))return!1;for(var i=0,s=o;i<s.length;i++){var l=s[i];if(!se(l[0])||!se(l[1]))return!1}}return!0},t.isCloseLineString=function(e){var r=e[0],n=e[e.length-1];return!(r[0]!==n[0]||r[1]!==n[1])},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Uo},enumerable:!0,configurable:!0}),t}(),ht=function(){function t(e){if(!G(e))throw new TypeError('"points" must be of type Point[]. Received type '+typeof e);if(e.length===0)throw new Error('"points" must contain 1 point at least');e.forEach(function(r){if(!(r instanceof re))throw new TypeError('"points" must be of type Point[]. Received type '+typeof r+"[]")}),this.points=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"MultiPoint",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},t.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map(function(e){return e.toJSON().coordinates})}},t.validate=function(e){if(e.type!=="MultiPoint"||!G(e.coordinates))return!1;for(var r=0,n=e.coordinates;r<n.length;r++){var o=n[r];if(!se(o[0])||!se(o[1]))return!1}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Io},enumerable:!0,configurable:!0}),t}(),pt=function(){function t(e){if(!G(e))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof e);if(e.length===0)throw new Error("Polygon must contain 1 linestring at least");e.forEach(function(r){if(!(r instanceof we))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof r+"[]")}),this.lines=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"MultiLineString",coordinates:this.lines.map(function(n){return n.points.map(function(o){return[o.longitude,o.latitude]})})},r},t.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map(function(e){return e.points.map(function(r){return[r.longitude,r.latitude]})})}},t.validate=function(e){if(e.type!=="MultiLineString"||!G(e.coordinates))return!1;for(var r=0,n=e.coordinates;r<n.length;r++)for(var o=n[r],i=0,s=o;i<s.length;i++){var l=s[i];if(!se(l[0])||!se(l[1]))return!1}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Ao},enumerable:!0,configurable:!0}),t}(),tt=function(){function t(e){if(!G(e))throw new TypeError('"polygons" must be of type Polygon[]. Received type '+typeof e);if(e.length===0)throw new Error("MultiPolygon must contain 1 polygon at least");for(var r=0,n=e;r<n.length;r++){var o=n[r];if(!(o instanceof Re))throw new TypeError('"polygon" must be of type Polygon[]. Received type '+typeof o+"[]")}this.polygons=e}return t.prototype.parse=function(e){var r;return r={},r[e]={type:"MultiPolygon",coordinates:this.polygons.map(function(n){return n.lines.map(function(o){return o.points.map(function(i){return[i.longitude,i.latitude]})})})},r},t.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map(function(e){return e.lines.map(function(r){return r.points.map(function(n){return[n.longitude,n.latitude]})})})}},t.validate=function(e){if(e.type!=="MultiPolygon"||!G(e.coordinates))return!1;for(var r=0,n=e.coordinates;r<n.length;r++)for(var o=n[r],i=0,s=o;i<s.length;i++)for(var l=s[i],d=0,f=l;d<f.length;d++){var p=f[d];if(!se(p[0])||!se(p[1]))return!1}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Bo},enumerable:!0,configurable:!0}),t}();const jo=Object.freeze(Object.defineProperty({__proto__:null,Point:re,LineString:we,Polygon:Re,MultiPoint:ht,MultiLineString:pt,MultiPolygon:tt},Symbol.toStringTag,{value:"Module"}));var ir=globalThis&&globalThis.__assign||function(){return ir=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ir.apply(this,arguments)},Hr=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],s=0,l=i.length;s<l;s++,o++)n[o]=i[s];return n};function dt(t){return or(t,[t])}function or(t,e){if(Vn(t))switch(t._internalType){case kn:return t.toJSON();case qn:return t.parse();case Hn:return t.parse();default:return t.toJSON?t.toJSON():t}else{if(Jn(t)||gr(t)||Wn(t)||zn(t))return We.serialize(t);if(G(t))return t.map(function(o){if(e.indexOf(o)>-1)throw new Error("Cannot convert circular structure to JSON");return or(o,Hr(e,[o]))});if(ve(t)){var r=ir({},t);for(var n in r){if(e.indexOf(r[n])>-1)throw new Error("Cannot convert circular structure to JSON");r[n]=or(r[n],Hr(e,[r[n]]))}return r}else return t}}var I;(function(t){t.SET="set",t.REMOVE="remove",t.INC="inc",t.MUL="mul",t.PUSH="push",t.PULL="pull",t.PULL_ALL="pullAll",t.POP="pop",t.SHIFT="shift",t.UNSHIFT="unshift",t.ADD_TO_SET="addToSet",t.BIT="bit",t.RENAME="rename",t.MAX="max",t.MIN="min"})(I||(I={}));var W=function(){function t(e,r,n){this._internalType=Ln,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=r,this.fieldName=n||et}return t.prototype._setFieldName=function(e){var r=new t(this.operator,this.operands,e);return r},t}();function Gr(t){return t&&t instanceof W&&t._internalType===Ln}var ne;(function(t){t.AND="and",t.OR="or",t.NOT="not",t.NOR="nor"})(ne||(ne={}));var Je=function(){function t(e,r,n){if(this._internalType=Dn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=r,this.fieldName=n||et,this.fieldName!==et)if(Array.isArray(r)){r=r.slice(),this.operands=r;for(var o=0,i=r.length;o<i;o++){var s=r[o];(mt(s)||yt(s))&&(r[o]=s._setFieldName(this.fieldName))}}else{var s=r;(mt(s)||yt(s))&&(r=s._setFieldName(this.fieldName))}}return t.prototype._setFieldName=function(e){var r=this.operands.map(function(o){return o instanceof t?o._setFieldName(e):o}),n=new t(this.operator,r,e);return n},t.prototype.and=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return e.unshift(this),new t(ne.AND,e,this.fieldName)},t.prototype.or=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return e.unshift(this),new t(ne.OR,e,this.fieldName)},t}();function mt(t){return t&&t instanceof Je&&t._internalType===Dn}var $o=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N;(function(t){t.EQ="eq",t.NEQ="neq",t.GT="gt",t.GTE="gte",t.LT="lt",t.LTE="lte",t.IN="in",t.NIN="nin",t.ALL="all",t.ELEM_MATCH="elemMatch",t.EXISTS="exists",t.SIZE="size",t.MOD="mod",t.GEO_NEAR="geoNear",t.GEO_WITHIN="geoWithin",t.GEO_INTERSECTS="geoIntersects",t.LIKE="like"})(N||(N={}));var V=function(t){$o(e,t);function e(r,n,o){var i=t.call(this,r,n,o)||this;return i.operator=r,i._internalType=Mn,i}return e.prototype.toJSON=function(){var r,n;switch(this.operator){case N.IN:case N.NIN:return r={},r["$"+this.operator]=this.operands,r;default:return n={},n["$"+this.operator]=this.operands[0],n}},e.prototype._setFieldName=function(r){var n=new e(this.operator,this.operands,r);return n},e.prototype.eq=function(r){var n=new e(N.EQ,[r],this.fieldName);return this.and(n)},e.prototype.neq=function(r){var n=new e(N.NEQ,[r],this.fieldName);return this.and(n)},e.prototype.gt=function(r){var n=new e(N.GT,[r],this.fieldName);return this.and(n)},e.prototype.gte=function(r){var n=new e(N.GTE,[r],this.fieldName);return this.and(n)},e.prototype.lt=function(r){var n=new e(N.LT,[r],this.fieldName);return this.and(n)},e.prototype.lte=function(r){var n=new e(N.LTE,[r],this.fieldName);return this.and(n)},e.prototype.in=function(r){var n=new e(N.IN,r,this.fieldName);return this.and(n)},e.prototype.nin=function(r){var n=new e(N.NIN,r,this.fieldName);return this.and(n)},e.prototype.geoNear=function(r){if(!(r.geometry instanceof re))throw new TypeError('"geometry" must be of type Point. Received type '+typeof r.geometry);if(r.maxDistance!==void 0&&!se(r.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '+typeof r.maxDistance);if(r.minDistance!==void 0&&!se(r.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '+typeof r.minDistance);var n=new e(N.GEO_NEAR,[r],this.fieldName);return this.and(n)},e.prototype.geoWithin=function(r){if(!(r.geometry instanceof tt)&&!(r.geometry instanceof Re))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '+typeof r.geometry);var n=new e(N.GEO_WITHIN,[r],this.fieldName);return this.and(n)},e.prototype.geoIntersects=function(r){if(!(r.geometry instanceof re)&&!(r.geometry instanceof we)&&!(r.geometry instanceof Re)&&!(r.geometry instanceof ht)&&!(r.geometry instanceof pt)&&!(r.geometry instanceof tt))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '+typeof r.geometry);var n=new e(N.GEO_INTERSECTS,[r],this.fieldName);return this.and(n)},e}(Je);function yt(t){return t&&t instanceof V&&t._internalType===Mn}function Jr(t){return yt(t)}var Ae={};for(var Ie in N)Ae[Ie]="$"+Ie;for(var Ie in ne)Ae[Ie]="$"+Ie;for(var Ie in I)Ae[Ie]="$"+Ie;Ae[N.NEQ]="$ne";Ae[I.REMOVE]="$unset";Ae[I.SHIFT]="$pop";Ae[I.UNSHIFT]="$push";function Ve(t){return Ae[t]||"$"+t}var ur=globalThis&&globalThis.__assign||function(){return ur=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ur.apply(this,arguments)},Vr=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],s=0,l=i.length;s<l;s++,o++)n[o]=i[s];return n};function Xn(t,e,r,n){var o=ur({},t);for(var i in t)if(!/^\$/.test(i)){var s=t[i];if(s&&ve(s)&&!e(s)){if(n.indexOf(s)>-1)throw new Error("Cannot convert circular structure to JSON");var l=Vr(r,[i]),d=Vr(n,[s]),f=Xn(s,e,l,d);o[i]=f;var p=!1;for(var y in f)/^\$/.test(y)?p=!0:(o[i+"."+y]=f[y],delete o[i][y]);p||delete o[i]}}return o}function Yn(t){return Xn(t,ar,[],[t])}function Wr(t,e,r){e[r]||delete t[r];for(var n in e)t[n]?G(t[n])?t[n].push(e[n]):ve(t[n])?ve(e[n])?Object.assign(t[n],e[n]):(console.warn("unmergable condition, query is object but condition is "+Q(e)+", can only overwrite",e,r),t[n]=e[n]):(console.warn("to-merge query is of type "+Q(t)+", can only overwrite",t,e,r),t[n]=e[n]):t[n]=e[n]}function ar(t){return Vn(t)||Jn(t)||gr(t)||Wn(t)||zn(t)}function Ne(t){return dt(t)}var sr=function(){function t(){}return t.encode=function(e){var r=new Ro;return r.encodeQuery(e)},t}(),Ro=function(){function t(){}return t.prototype.encodeQuery=function(e,r){var n;return ar(e)?mt(e)?this.encodeLogicCommand(e):yt(e)?this.encodeQueryCommand(e):(n={},n[r]=this.encodeQueryObject(e),n):ve(e)?this.encodeQueryObject(e):e},t.prototype.encodeRegExp=function(e){return{$regex:e.source,$options:e.flags}},t.prototype.encodeLogicCommand=function(e){var r,n,o,i,s,l,d,f=this;switch(e.operator){case ne.NOR:case ne.AND:case ne.OR:{var p=Ve(e.operator),y=e.operands.map(function(O){return f.encodeQuery(O,e.fieldName)});return r={},r[p]=y,r}case ne.NOT:{var p=Ve(e.operator),g=e.operands[0];if(gr(g))return n={},n[e.fieldName]=(o={},o[p]=this.encodeRegExp(g),o),n;var y=this.encodeQuery(g)[e.fieldName];return i={},i[e.fieldName]=(s={},s[p]=y,s),i}default:{var p=Ve(e.operator);if(e.operands.length===1){var b=this.encodeQuery(e.operands[0]);return l={},l[p]=b,l}else{var y=e.operands.map(this.encodeQuery.bind(this));return d={},d[p]=y,d}}}},t.prototype.encodeQueryCommand=function(e){return Jr(e)?this.encodeComparisonCommand(e):this.encodeComparisonCommand(e)},t.prototype.encodeComparisonCommand=function(e){var r,n,o,i,s,l,d,f,p;if(e.fieldName===et)throw new Error("Cannot encode a comparison command with unset field name");var y=Ve(e.operator);switch(e.operator){case N.EQ:case N.NEQ:case N.LT:case N.LTE:case N.GT:case N.GTE:case N.ELEM_MATCH:case N.EXISTS:case N.SIZE:case N.MOD:return r={},r[e.fieldName]=(n={},n[y]=Ne(e.operands[0]),n),r;case N.IN:case N.NIN:case N.ALL:return o={},o[e.fieldName]=(i={},i[y]=Ne(e.operands),i),o;case N.GEO_NEAR:{var g=e.operands[0];return s={},s[e.fieldName]={$nearSphere:{$geometry:g.geometry.toJSON(),$maxDistance:g.maxDistance,$minDistance:g.minDistance}},s}case N.GEO_WITHIN:{var g=e.operands[0];return l={},l[e.fieldName]={$geoWithin:{$geometry:g.geometry.toJSON()}},l}case N.GEO_INTERSECTS:{var g=e.operands[0];return d={},d[e.fieldName]={$geoIntersects:{$geometry:g.geometry.toJSON()}},d}default:return f={},f[e.fieldName]=(p={},p[y]=Ne(e.operands[0]),p),f}},t.prototype.encodeQueryObject=function(e){var r=Yn(e);for(var n in r){var o=r[n];if(mt(o)){r[n]=o._setFieldName(n);var i=this.encodeLogicCommand(r[n]);this.mergeConditionAfterEncode(r,i,n)}else if(Jr(o)){r[n]=o._setFieldName(n);var i=this.encodeComparisonCommand(r[n]);this.mergeConditionAfterEncode(r,i,n)}else ar(o)&&(r[n]=Ne(o))}return r},t.prototype.mergeConditionAfterEncode=function(e,r,n){r[n]||delete e[n];for(var o in r)e[o]?G(e[o])?e[o]=e[o].concat(r[o]):ve(e[o])?ve(r[o])?Object.assign(e,r):(console.warn("unmergable condition, query is object but condition is "+Q(r)+", can only overwrite",r,n),e[o]=r[o]):(console.warn("to-merge query is of type "+Q(e)+", can only overwrite",e,r,n),e[o]=r[o]):e[o]=r[o]},t}(),Co=function(){function t(){}return t.encode=function(e){var r=new t;return r.encodeUpdate(e)},t.prototype.encodeUpdate=function(e){return Gr(e)?this.encodeUpdateCommand(e):Q(e)==="object"?this.encodeUpdateObject(e):e},t.prototype.encodeUpdateCommand=function(e){if(e.fieldName===et)throw new Error("Cannot encode a comparison command with unset field name");switch(e.operator){case I.PUSH:case I.PULL:case I.PULL_ALL:case I.POP:case I.SHIFT:case I.UNSHIFT:case I.ADD_TO_SET:return this.encodeArrayUpdateCommand(e);default:return this.encodeFieldUpdateCommand(e)}},t.prototype.encodeFieldUpdateCommand=function(e){var r,n,o,i,s=Ve(e.operator);switch(e.operator){case I.REMOVE:return r={},r[s]=(n={},n[e.fieldName]="",n),r;default:return o={},o[s]=(i={},i[e.fieldName]=e.operands[0],i),o}},t.prototype.encodeArrayUpdateCommand=function(e){var r,n,o,i,s,l,d,f,p,y,g=Ve(e.operator);switch(e.operator){case I.PUSH:{var b=void 0;return G(e.operands)?b={$each:e.operands.map(Ne)}:b=e.operands,r={},r[g]=(n={},n[e.fieldName]=b,n),r}case I.UNSHIFT:{var b={$each:e.operands.map(Ne),$position:0};return o={},o[g]=(i={},i[e.fieldName]=b,i),o}case I.POP:return s={},s[g]=(l={},l[e.fieldName]=1,l),s;case I.SHIFT:return d={},d[g]=(f={},f[e.fieldName]=-1,f),d;default:return p={},p[g]=(y={},y[e.fieldName]=Ne(e.operands),y),p}},t.prototype.encodeUpdateObject=function(e){var r=Yn(e);for(var n in r)if(!/^\$/.test(n)){var o=r[n];if(Gr(o)){r[n]=o._setFieldName(n);var i=this.encodeUpdateCommand(r[n]);Wr(r,i,n)}else{r[n]=o=Ne(o);var s=new W(I.SET,[o],n),i=this.encodeUpdateCommand(s);Wr(r,i,n)}}return r},t}(),Ze=globalThis&&globalThis.__assign||function(){return Ze=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ze.apply(this,arguments)},xe=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},ye=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Lo=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],s=0,l=i.length;s<l;s++,o++)n[o]=i[s];return n},Zn=function(){function t(e,r,n,o,i,s){this._db=e,this._coll=r,this._fieldFilters=n,this._fieldOrders=o||[],this._queryOptions=i||{},this._withs=s||[],this._request=this._db.request}return t.prototype.where=function(e){if(Object.prototype.toString.call(e).slice(8,-1)!=="Object")throw Error(Oe.QueryParamTypeError);var r=Object.keys(e),n=r.some(function(i){return e[i]!==void 0});if(r.length&&!n)throw Error(Oe.QueryParamValueError);var o=sr.encode(e);return new t(this._db,this._coll,o,this._fieldOrders,this._queryOptions,this._withs)},t.prototype.orderBy=function(e,r){_e.isFieldPath(e),_e.isFieldOrder(r);var n={field:e,direction:r},o=this._fieldOrders.concat(n);return new t(this._db,this._coll,this._fieldFilters,o,this._queryOptions,this._withs)},t.prototype.with=function(e){var r,n,o={query:e.query,foreignField:e.foreignField,localField:e.localField,as:(r=e.as)!==null&&r!==void 0?r:e.query._coll,one:(n=e.one)!==null&&n!==void 0?n:!1},i=this._withs.concat(o);return new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,this._queryOptions,i)},t.prototype.withOne=function(e){var r,n={query:e.query,foreignField:e.foreignField,localField:e.localField,as:(r=e.as)!==null&&r!==void 0?r:e.query._coll,one:!0},o=this._withs.concat(n);return new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,this._queryOptions,o)},t.prototype.field=function(e){var r={};if(e instanceof Array){for(var n={},o=0,i=e;o<i.length;o++){var s=i[o];n[s]=1}r=n}else for(var s in e)e[s]?typeof e[s]!="object"&&(r[s]=1):r[s]=0;var l=Ze({},this._queryOptions);return l.projection=r,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,l,this._withs)},t.prototype.limit=function(e){_e.isInteger("limit",e);var r=Ze({},this._queryOptions);return r.limit=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,r,this._withs)},t.prototype.skip=function(e){_e.isInteger("offset",e);var r=Ze({},this._queryOptions);return r.offset=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,r,this._withs)},t.prototype.page=function(e){var r=(e==null?void 0:e.current)||1,n=(e==null?void 0:e.size)||10,o=this.skip((r-1)*n).limit(n);return o._queryOptions.count=!0,o},t.prototype.clone=function(){return new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,this._queryOptions,this._withs)},t.prototype.get=function(){var e;return xe(this,void 0,void 0,function(){return ye(this,function(r){switch(r.label){case 0:return!((e=this._withs)===null||e===void 0)&&e.length?[4,this.internalMerge()]:[3,2];case 1:return[2,r.sent()];case 2:return[4,this.internalGet()];case 3:return[2,r.sent()]}})})},t.prototype.getOne=function(){return xe(this,void 0,void 0,function(){var e;return ye(this,function(r){switch(r.label){case 0:return[4,this.limit(1).get()];case 1:return e=r.sent(),e.error?[2,e]:e.data.length?[2,{ok:!0,data:e.data[0],requestId:e.requestId}]:[2,{ok:!0,data:null,requestId:e.requestId}]}})})},t.prototype.merge=function(e){return xe(this,void 0,void 0,function(){var r;return ye(this,function(n){switch(n.label){case 0:return[4,this.internalMerge(e)];case 1:return r=n.sent(),[2,r]}})})},t.prototype.count=function(){return xe(this,void 0,void 0,function(){var e,r;return ye(this,function(n){switch(n.label){case 0:return e=this.buildQueryParam(),[4,this.send(Se.count,e)];case 1:return r=n.sent(),r.error?[2,{requestId:r.requestId,ok:!1,error:r.error,total:void 0,code:r.code}]:[2,{requestId:r.requestId,total:r.data.total,ok:!0}]}})})},t.prototype.update=function(e,r){var n,o,i,s;return xe(this,void 0,void 0,function(){var l,d;return ye(this,function(f){switch(f.label){case 0:if(!e||typeof e!="object"||((n=Object.keys(e))===null||n===void 0?void 0:n.length)===0)throw new Error("data cannot be empty object");if(e.hasOwnProperty("_id"))throw new Error("can not update the `_id` field");return l=this.buildQueryParam(),l.multi=(o=r==null?void 0:r.multi)!==null&&o!==void 0?o:!1,l.merge=(i=r==null?void 0:r.merge)!==null&&i!==void 0?i:!0,l.upsert=(s=r==null?void 0:r.upsert)!==null&&s!==void 0?s:!1,l.merge?l.data=Co.encode(e):l.data=dt(e),[4,this.send(Se.update,l)];case 1:return d=f.sent(),d.error?[2,{requestId:d.requestId,error:d.error,ok:!1,code:d.code,updated:void 0,matched:void 0,upsertId:void 0}]:[2,{requestId:d.requestId,updated:d.data.updated,matched:d.data.matched,upsertId:d.data.upsert_id,ok:!0}]}})})},t.prototype.remove=function(e){var r,n;return xe(this,void 0,void 0,function(){var o,i;return ye(this,function(s){switch(s.label){case 0:return Object.keys(this._queryOptions).length>0&&console.warn("`offset`, `limit` and `projection` are not supported in remove() operation"),((r=this._fieldOrders)===null||r===void 0?void 0:r.length)>0&&console.warn("`orderBy` is not supported in remove() operation"),o=this.buildQueryParam(),o.multi=(n=e==null?void 0:e.multi)!==null&&n!==void 0?n:!1,[4,this.send(Se.remove,o)];case 1:return i=s.sent(),i.error?[2,{requestId:i.requestId,error:i.error,ok:!1,deleted:void 0,code:i.code}]:[2,{requestId:i.requestId,deleted:i.data.deleted,ok:!0}]}})})},t.prototype.buildQueryParam=function(){var e,r={collectionName:this._coll};return this._fieldFilters&&(r.query=this._fieldFilters),!((e=this._fieldOrders)===null||e===void 0)&&e.length&&(r.order=Lo(this._fieldOrders)),this._queryOptions.offset&&(r.offset=this._queryOptions.offset),this._queryOptions.limit?r.limit=this._queryOptions.limit<1e3?this._queryOptions.limit:1e3:r.limit=100,this._queryOptions.projection&&(r.projection=this._queryOptions.projection),this._queryOptions.count&&(r.count=this._queryOptions.count),r},t.prototype.internalGet=function(){var e,r,n;return xe(this,void 0,void 0,function(){var o,i,s,l;return ye(this,function(d){switch(d.label){case 0:return o=this.buildQueryParam(),[4,this.send(Se.query,o)];case 1:return i=d.sent(),i.error?[2,{error:i.error,data:i.data,requestId:i.requestId,ok:!1,code:i.code}]:(s=yr.formatResDocumentData(i.data.list),l={data:s,requestId:i.requestId,ok:!0},i.total&&(l.total=(e=i.data)===null||e===void 0?void 0:e.total),i.limit&&(l.limit=(r=i.data)===null||r===void 0?void 0:r.limit),i.offset&&(l.offset=(n=i.data)===null||n===void 0?void 0:n.offset),[2,l])}})})},t.prototype.internalMerge=function(e){var r;return xe(this,void 0,void 0,function(){var n,o,i,s,l,d,f;return ye(this,function(p){switch(p.label){case 0:return e=e??{},n=(r=e==null?void 0:e.intersection)!==null&&r!==void 0?r:!1,[4,this.internalGet()];case 1:if(o=p.sent(),!o.ok)return[2,o];i=function(y){var g,b,O,T,_,R,U,C,E,J,M,D,X,te,he,Ue,be,X;return ye(this,function(fe){switch(fe.label){case 0:return g=y.query,b=y.localField,O=y.foreignField,T=y.as,_=y.one,R=o.data.map(function(pe){return pe[b]}),U=g.clone(),U._fieldFilters||(U._fieldFilters={}),U._fieldFilters[O]={$in:R},C=void 0,U._withs.length?[4,U.merge()]:[3,2];case 1:return C=fe.sent(),[3,4];case 2:return[4,U.get()];case 3:C=fe.sent(),fe.label=4;case 4:if(!C.ok)return[2,{value:C}];for(E={},J=0,M=C.data;J<M.length;J++)D=M[J],X=D[O],_?E[X]=D:(E[X]=E[X]||[],E[X].push(D));for(te=[],he=0,Ue=o.data;he<Ue.length;he++)be=Ue[he],X=be[b],be[T]=E[X],!(n&&!E[X])&&te.push(be);return o.data=te,[2]}})},s=0,l=this._withs,p.label=2;case 2:return s<l.length?(d=l[s],[5,i(d)]):[3,5];case 3:if(f=p.sent(),typeof f=="object")return[2,f.value];p.label=4;case 4:return s++,[3,2];case 5:return[2,o]}})})},t.prototype.send=function(e,r){return xe(this,void 0,void 0,function(){return ye(this,function(n){switch(n.label){case 0:return[4,this._request.send(e,r)];case 1:return[2,n.sent()]}})})},t}(),Xe=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},Ye=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},zr=function(){function t(e,r,n,o){this._db=e,this._coll=r,this.id=n,this._query=o||new Zn(e,r)}return t.prototype.create=function(e,r){var n,o;return Xe(this,void 0,void 0,function(){var i,s;return Ye(this,function(l){switch(l.label){case 0:if(!e||typeof e!="object"||((n=Object.keys(e))===null||n===void 0?void 0:n.length)===0)throw new Error("data cannot be empty object");return i={collectionName:this._coll,data:dt(e),multi:(o=r==null?void 0:r.multi)!==null&&o!==void 0?o:!1},[4,this._query.send(Se.add,i)];case 1:return s=l.sent(),s.error?[2,{requestId:s.requestId,error:s.error,ok:!1,id:void 0,insertedCount:void 0,code:s.code}]:[2,{id:s.data._id||s.data[this._db.primaryKey],insertedCount:s.data.insertedCount,requestId:s.requestId,ok:!0}]}})})},t.prototype.set=function(e){return Xe(this,void 0,void 0,function(){var r,n,o,i,s;return Ye(this,function(l){switch(l.label){case 0:if(!this.id)throw new Error("document id cannot be empty");if(r=!1,n=function(d){if(typeof d=="object")for(var f in d)d[f]instanceof W?r=!0:typeof d[f]=="object"&&n(d[f])},n(e),r)throw new Error("data cannot contain operator");return o=!1,[4,this._query.where((s={},s[this._db.primaryKey]=this.id,s)).update(dt(e),{merge:o,multi:!1,upsert:!0})];case 1:return i=l.sent(),[2,i]}})})},t.prototype.update=function(e){return Xe(this,void 0,void 0,function(){var r,n,o,i;return Ye(this,function(s){switch(s.label){case 0:return r=!0,n={merge:r,multi:!1,upsert:!1},[4,this._query.where((i={},i[this._db.primaryKey]=this.id,i)).update(e,n)];case 1:return o=s.sent(),[2,o]}})})},t.prototype.remove=function(){return Xe(this,void 0,void 0,function(){var e,r;return Ye(this,function(n){switch(n.label){case 0:return[4,this._query.where((r={},r[this._db.primaryKey]=this.id,r)).remove({multi:!1})];case 1:return e=n.sent(),[2,e]}})})},t.prototype.get=function(){return Xe(this,void 0,void 0,function(){var e,r;return Ye(this,function(n){switch(n.label){case 0:return[4,this._query.where((r={},r[this._db.primaryKey]=this.id,r)).getOne()];case 1:return e=n.sent(),[2,e]}})})},t.prototype.field=function(e){return new t(this._db,this._coll,this.id,this._query.field(e))},t}(),Qn=function(t){if(!ve(t))return t;for(var e in t)t[e]===void 0?delete t[e]:ve(t[e])&&(t[e]=Qn(t[e]));return t},Mo=function(t){return t=Qn(t),We.stringify(t,{relaxed:!1})},Do=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},ko=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Xr=6378100,Kn=function(){function t(e,r,n){var o=this;this._stages=[],e&&r&&(this._db=e,this._request=this._db.request,this._collectionName=r,n&&n.length>0&&n.forEach(function(i){_e.isValidAggregation(i);var s=Object.keys(i)[0];o._pipe(s,i[s],!0)}))}return t.prototype.end=function(){var e;return Do(this,void 0,void 0,function(){var r,n,o;return ko(this,function(i){switch(i.label){case 0:if(!this._collectionName||!this._db)throw new Error("Aggregation pipeline cannot send request");if(!(!((e=this._stages)===null||e===void 0)&&e.length))throw new Error("Aggregation stage cannot be empty");return[4,this._request.send(Se.aggregate,{collectionName:this._collectionName,stages:this._stages})];case 1:return r=i.sent(),r.error?[2,{error:r.error,data:r.data,requestId:r.requestId,ok:!1,code:r.code}]:(n=yr.formatResDocumentData(r.data.list),o={data:n,requestId:r.requestId,ok:!0},[2,o])}})})},t.prototype.unwrap=function(){return this._stages},t.prototype.done=function(){return this._stages.map(function(e){var r,n=e.stageKey,o=e.stageValue;return r={},r[n]=JSON.parse(o),r})},t.prototype._pipe=function(e,r,n){n===void 0&&(n=!1);var o="";return Q(r)==="object"?o=Mo(r):o=JSON.stringify(r),this._stages.push({stageKey:n?e:"$"+e,stageValue:o}),this},t.prototype.addFields=function(e){return this._pipe("addFields",e)},t.prototype.bucket=function(e){return this._pipe("bucket",e)},t.prototype.bucketAuto=function(e){return this._pipe("bucketAuto",e)},t.prototype.count=function(e){return this._pipe("count",e)},t.prototype.geoNear=function(e){return e.query&&(e.query=sr.encode(e.query)),e.distanceMultiplier&&typeof e.distanceMultiplier=="number"?e.distanceMultiplier=e.distanceMultiplier*Xr:e.distanceMultiplier=Xr,this._pipe("geoNear",e)},t.prototype.group=function(e){return this._pipe("group",e)},t.prototype.limit=function(e){return this._pipe("limit",e)},t.prototype.match=function(e){return this._pipe("match",sr.encode(e))},t.prototype.project=function(e){return this._pipe("project",e)},t.prototype.lookup=function(e){return this._pipe("lookup",e)},t.prototype.replaceRoot=function(e){return this._pipe("replaceRoot",e)},t.prototype.sample=function(e){return this._pipe("sample",e)},t.prototype.skip=function(e){return this._pipe("skip",e)},t.prototype.sort=function(e){return this._pipe("sort",e)},t.prototype.sortByCount=function(e){return this._pipe("sortByCount",e)},t.prototype.unwind=function(e){return this._pipe("unwind",e)},t}(),qo=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ho=function(t){qo(e,t);function e(r,n){return t.call(this,r,n)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),e.prototype.doc=function(r){if(!r)throw new Error("docID cannot be empty");return new zr(this._db,this._coll,r)},e.prototype.add=function(r,n){var o=new zr(this._db,this._coll,void 0);return o.create(r,n)},e.prototype.aggregate=function(r){return r===void 0&&(r=[]),new Kn(this._db,this._coll,r)},e}(Zn),Go={eq:function(t){return new V(N.EQ,[t])},neq:function(t){return new V(N.NEQ,[t])},lt:function(t){return new V(N.LT,[t])},lte:function(t){return new V(N.LTE,[t])},gt:function(t){return new V(N.GT,[t])},gte:function(t){return new V(N.GTE,[t])},in:function(t){return new V(N.IN,t)},nin:function(t){return new V(N.NIN,t)},all:function(t){return new V(N.ALL,t)},elemMatch:function(t){return new V(N.ELEM_MATCH,[t])},exists:function(t){return new V(N.EXISTS,[t])},size:function(t){return new V(N.SIZE,[t])},mod:function(t){return new V(N.MOD,[t])},geoNear:function(t){return new V(N.GEO_NEAR,[t])},geoWithin:function(t){return new V(N.GEO_WITHIN,[t])},geoIntersects:function(t){return new V(N.GEO_INTERSECTS,[t])},like:function(t){return new V(N.LIKE,[t])},and:function(){var t=G(arguments[0])?arguments[0]:Array.from(arguments);return new Je(ne.AND,t)},nor:function(){var t=G(arguments[0])?arguments[0]:Array.from(arguments);return new Je(ne.NOR,t)},or:function(){var t=G(arguments[0])?arguments[0]:Array.from(arguments);return new Je(ne.OR,t)},not:function(){var t=G(arguments[0])?arguments[0]:Array.from(arguments);return new Je(ne.NOT,t)},set:function(t){return new W(I.SET,[t])},remove:function(){return new W(I.REMOVE,[])},inc:function(t){return new W(I.INC,[t])},mul:function(t){return new W(I.MUL,[t])},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r;if(ve(t[0])&&t[0].hasOwnProperty("each")){var n=t[0];r={$each:n.each,$position:n.position,$sort:n.sort,$slice:n.slice}}else G(t[0])?r=t[0]:r=Array.from(t);return new W(I.PUSH,r)},pull:function(t){return new W(I.PULL,t)},pullAll:function(t){return new W(I.PULL_ALL,t)},pop:function(){return new W(I.POP,[])},shift:function(){return new W(I.SHIFT,[])},unshift:function(){var t=G(arguments[0])?arguments[0]:Array.from(arguments);return new W(I.UNSHIFT,t)},addToSet:function(t){return new W(I.ADD_TO_SET,t)},rename:function(t){return new W(I.RENAME,[t])},bit:function(t){return new W(I.BIT,[t])},max:function(t){return new W(I.MAX,[t])},min:function(t){return new W(I.MIN,[t])},expr:function(t){return{$expr:t}},jsonSchema:function(t){return{$jsonSchema:t}},text:function(t){return Po(t)?{$search:t.search}:{$search:t.search,$language:t.language,$caseSensitive:t.caseSensitive,$diacriticSensitive:t.diacriticSensitive}},aggregate:{pipeline:function(){return new Kn},abs:function(t){return new v("abs",t)},add:function(t){return new v("add",t)},ceil:function(t){return new v("ceil",t)},divide:function(t){return new v("divide",t)},exp:function(t){return new v("exp",t)},floor:function(t){return new v("floor",t)},ln:function(t){return new v("ln",t)},log:function(t){return new v("log",t)},log10:function(t){return new v("log10",t)},mod:function(t){return new v("mod",t)},multiply:function(t){return new v("multiply",t)},pow:function(t){return new v("pow",t)},sqrt:function(t){return new v("sqrt",t)},subtract:function(t){return new v("subtract",t)},trunc:function(t){return new v("trunc",t)},arrayElemAt:function(t){return new v("arrayElemAt",t)},arrayToObject:function(t){return new v("arrayToObject",t)},concatArrays:function(t){return new v("concatArrays",t)},filter:function(t){return new v("filter",t)},in:function(t){return new v("in",t)},indexOfArray:function(t){return new v("indexOfArray",t)},isArray:function(t){return new v("isArray",t)},map:function(t){return new v("map",t)},range:function(t){return new v("range",t)},reduce:function(t){return new v("reduce",t)},reverseArray:function(t){return new v("reverseArray",t)},size:function(t){return new v("size",t)},slice:function(t){return new v("slice",t)},zip:function(t){return new v("zip",t)},and:function(t){return new v("and",t)},not:function(t){return new v("not",t)},or:function(t){return new v("or",t)},cmp:function(t){return new v("cmp",t)},eq:function(t){return new v("eq",t)},gt:function(t){return new v("gt",t)},gte:function(t){return new v("gte",t)},lt:function(t){return new v("lt",t)},lte:function(t){return new v("lte",t)},neq:function(t){return new v("ne",t)},cond:function(t){return new v("cond",t)},ifNull:function(t){return new v("ifNull",t)},switch:function(t){return new v("switch",t)},dateFromParts:function(t){return new v("dateFromParts",t)},dateFromString:function(t){return new v("dateFromString",t)},dayOfMonth:function(t){return new v("dayOfMonth",t)},dayOfWeek:function(t){return new v("dayOfWeek",t)},dayOfYear:function(t){return new v("dayOfYear",t)},isoDayOfWeek:function(t){return new v("isoDayOfWeek",t)},isoWeek:function(t){return new v("isoWeek",t)},isoWeekYear:function(t){return new v("isoWeekYear",t)},millisecond:function(t){return new v("millisecond",t)},minute:function(t){return new v("minute",t)},month:function(t){return new v("month",t)},second:function(t){return new v("second",t)},hour:function(t){return new v("hour",t)},week:function(t){return new v("week",t)},year:function(t){return new v("year",t)},literal:function(t){return new v("literal",t)},mergeObjects:function(t){return new v("mergeObjects",t)},objectToArray:function(t){return new v("objectToArray",t)},allElementsTrue:function(t){return new v("allElementsTrue",t)},anyElementTrue:function(t){return new v("anyElementTrue",t)},setDifference:function(t){return new v("setDifference",t)},setEquals:function(t){return new v("setEquals",t)},setIntersection:function(t){return new v("setIntersection",t)},setIsSubset:function(t){return new v("setIsSubset",t)},setUnion:function(t){return new v("setUnion",t)},concat:function(t){return new v("concat",t)},dateToString:function(t){return new v("dateToString",t)},indexOfBytes:function(t){return new v("indexOfBytes",t)},indexOfCP:function(t){return new v("indexOfCP",t)},split:function(t){return new v("split",t)},strLenBytes:function(t){return new v("strLenBytes",t)},strLenCP:function(t){return new v("strLenCP",t)},strcasecmp:function(t){return new v("strcasecmp",t)},substr:function(t){return new v("substr",t)},substrBytes:function(t){return new v("substrBytes",t)},substrCP:function(t){return new v("substrCP",t)},toLower:function(t){return new v("toLower",t)},toUpper:function(t){return new v("toUpper",t)},meta:function(t){return new v("meta",t)},addToSet:function(t){return new v("addToSet",t)},avg:function(t){return new v("avg",t)},first:function(t){return new v("first",t)},last:function(t){return new v("last",t)},max:function(t){return new v("max",t)},min:function(t){return new v("min",t)},push:function(t){return new v("push",t)},stdDevPop:function(t){return new v("stdDevPop",t)},stdDevSamp:function(t){return new v("stdDevSamp",t)},sum:function(t){return new v("sum",t)},let:function(t){return new v("let",t)}},project:{slice:function(t){return new Yr("slice",t)},elemMatch:function(t){return new Yr("elemMatch",t)}}},v=function(){function t(e,r){this["$"+e]=r}return t}(),Yr=function(){function t(e,r){this["$"+e]=r}return t}(),Jo=function(){function t(e){var r=e.regexp,n=e.options;if(!r)throw new TypeError("regexp must be a string");this.$regex=r,this.$options=n||""}return t.prototype.parse=function(){return{$regex:this.$regex,$options:this.$options}},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Hn},enumerable:!0,configurable:!0}),t}();function Vo(t){return new Jo(t)}var Wo=function(){function t(e){var r;if(this.Geo=jo,this.command=Go,this.RegExp=Vo,this.serverDate=Fo,!e.request)throw new Error("DbConfig.request cannot be empty");this.request=e.request,this.primaryKey=(r=e.primaryKey)!==null&&r!==void 0?r:"_id"}return t.prototype.collection=function(e){if(!e)throw new Error("Collection name is required");return new Ho(this,e)},t.prototype.generateId=function(){var e=new K;return e.toHexString()},t.prototype.ObjectId=function(e){return new K(e)},t}(),ei={exports:{}},wr={exports:{}},ti=function(e,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return e.apply(r,o)}},zo=ti,Ce=Object.prototype.toString;function vr(t){return Ce.call(t)==="[object Array]"}function fr(t){return typeof t>"u"}function Xo(t){return t!==null&&!fr(t)&&t.constructor!==null&&!fr(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Yo(t){return Ce.call(t)==="[object ArrayBuffer]"}function Zo(t){return typeof FormData<"u"&&t instanceof FormData}function Qo(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Ko(t){return typeof t=="string"}function eu(t){return typeof t=="number"}function ri(t){return t!==null&&typeof t=="object"}function ft(t){if(Ce.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function tu(t){return Ce.call(t)==="[object Date]"}function ru(t){return Ce.call(t)==="[object File]"}function nu(t){return Ce.call(t)==="[object Blob]"}function ni(t){return Ce.call(t)==="[object Function]"}function iu(t){return ri(t)&&ni(t.pipe)}function ou(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function uu(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function au(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function br(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),vr(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function cr(){var t={};function e(o,i){ft(t[i])&&ft(o)?t[i]=cr(t[i],o):ft(o)?t[i]=cr({},o):vr(o)?t[i]=o.slice():t[i]=o}for(var r=0,n=arguments.length;r<n;r++)br(arguments[r],e);return t}function su(t,e,r){return br(e,function(o,i){r&&typeof o=="function"?t[i]=zo(o,r):t[i]=o}),t}function fu(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var oe={isArray:vr,isArrayBuffer:Yo,isBuffer:Xo,isFormData:Zo,isArrayBufferView:Qo,isString:Ko,isNumber:eu,isObject:ri,isPlainObject:ft,isUndefined:fr,isDate:tu,isFile:ru,isBlob:nu,isFunction:ni,isStream:iu,isURLSearchParams:ou,isStandardBrowserEnv:au,forEach:br,merge:cr,extend:su,trim:uu,stripBOM:fu},qe=oe;function Zr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ii=function(e,r,n){if(!r)return e;var o;if(n)o=n(r);else if(qe.isURLSearchParams(r))o=r.toString();else{var i=[];qe.forEach(r,function(d,f){d===null||typeof d>"u"||(qe.isArray(d)?f=f+"[]":d=[d],qe.forEach(d,function(y){qe.isDate(y)?y=y.toISOString():qe.isObject(y)&&(y=JSON.stringify(y)),i.push(Zr(f)+"="+Zr(y))}))}),o=i.join("&")}if(o){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},cu=oe;function St(){this.handlers=[]}St.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};St.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};St.prototype.forEach=function(e){cu.forEach(this.handlers,function(n){n!==null&&e(n)})};var lu=St,hu=oe,pu=function(e,r){hu.forEach(e,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[i])})},oi=function(e,r,n,o,i){return e.config=r,n&&(e.code=n),e.request=o,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Dt,Qr;function ui(){if(Qr)return Dt;Qr=1;var t=oi;return Dt=function(r,n,o,i,s){var l=new Error(r);return t(l,n,o,i,s)},Dt}var kt,Kr;function du(){if(Kr)return kt;Kr=1;var t=ui();return kt=function(r,n,o){var i=o.config.validateStatus;!o.status||!i||i(o.status)?r(o):n(t("Request failed with status code "+o.status,o.config,null,o.request,o))},kt}var qt,en;function mu(){if(en)return qt;en=1;var t=oe;return qt=t.isStandardBrowserEnv()?function(){return{write:function(n,o,i,s,l,d){var f=[];f.push(n+"="+encodeURIComponent(o)),t.isNumber(i)&&f.push("expires="+new Date(i).toGMTString()),t.isString(s)&&f.push("path="+s),t.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),qt}var Ht,tn;function yu(){return tn||(tn=1,Ht=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Ht}var Gt,rn;function gu(){return rn||(rn=1,Gt=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Gt}var Jt,nn;function wu(){if(nn)return Jt;nn=1;var t=yu(),e=gu();return Jt=function(n,o){return n&&!t(o)?e(n,o):o},Jt}var Vt,on;function vu(){if(on)return Vt;on=1;var t=oe,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Vt=function(n){var o={},i,s,l;return n&&t.forEach(n.split(`
`),function(f){if(l=f.indexOf(":"),i=t.trim(f.substr(0,l)).toLowerCase(),s=t.trim(f.substr(l+1)),i){if(o[i]&&e.indexOf(i)>=0)return;i==="set-cookie"?o[i]=(o[i]?o[i]:[]).concat([s]):o[i]=o[i]?o[i]+", "+s:s}}),o},Vt}var Wt,un;function bu(){if(un)return Wt;un=1;var t=oe;return Wt=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function i(s){var l=s;return r&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=i(window.location.href),function(l){var d=t.isString(l)?i(l):l;return d.protocol===o.protocol&&d.host===o.host}}():function(){return function(){return!0}}(),Wt}var zt,an;function sn(){if(an)return zt;an=1;var t=oe,e=du(),r=mu(),n=ii,o=wu(),i=vu(),s=bu(),l=ui();return zt=function(f){return new Promise(function(y,g){var b=f.data,O=f.headers,T=f.responseType;t.isFormData(b)&&delete O["Content-Type"];var _=new XMLHttpRequest;if(f.auth){var R=f.auth.username||"",U=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";O.Authorization="Basic "+btoa(R+":"+U)}var C=o(f.baseURL,f.url);_.open(f.method.toUpperCase(),n(C,f.params,f.paramsSerializer),!0),_.timeout=f.timeout;function E(){if(_){var M="getAllResponseHeaders"in _?i(_.getAllResponseHeaders()):null,D=!T||T==="text"||T==="json"?_.responseText:_.response,te={data:D,status:_.status,statusText:_.statusText,headers:M,config:f,request:_};e(y,g,te),_=null}}if("onloadend"in _?_.onloadend=E:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(E)},_.onabort=function(){_&&(g(l("Request aborted",f,"ECONNABORTED",_)),_=null)},_.onerror=function(){g(l("Network Error",f,null,_)),_=null},_.ontimeout=function(){var D="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(D=f.timeoutErrorMessage),g(l(D,f,f.transitional&&f.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},t.isStandardBrowserEnv()){var J=(f.withCredentials||s(C))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;J&&(O[f.xsrfHeaderName]=J)}"setRequestHeader"in _&&t.forEach(O,function(D,te){typeof b>"u"&&te.toLowerCase()==="content-type"?delete O[te]:_.setRequestHeader(te,D)}),t.isUndefined(f.withCredentials)||(_.withCredentials=!!f.withCredentials),T&&T!=="json"&&(_.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&_.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(D){_&&(_.abort(),g(D),_=null)}),b||(b=null),_.send(b)})},zt}var z=oe,fn=pu,xu=oi,_u={"Content-Type":"application/x-www-form-urlencoded"};function cn(t,e){!z.isUndefined(t)&&z.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Eu(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=sn()),t}function Ou(t,e,r){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Nt={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Eu(),transformRequest:[function(e,r){return fn(r,"Accept"),fn(r,"Content-Type"),z.isFormData(e)||z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)?e:z.isArrayBufferView(e)?e.buffer:z.isURLSearchParams(e)?(cn(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):z.isObject(e)||r&&r["Content-Type"]==="application/json"?(cn(r,"application/json"),Ou(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&z.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(i)throw s.name==="SyntaxError"?xu(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Nt.headers={common:{Accept:"application/json, text/plain, */*"}};z.forEach(["delete","get","head"],function(e){Nt.headers[e]={}});z.forEach(["post","put","patch"],function(e){Nt.headers[e]=z.merge(_u)});var xr=Nt,Su=oe,Nu=xr,Tu=function(e,r,n){var o=this||Nu;return Su.forEach(n,function(s){e=s.call(o,e,r)}),e},Xt,ln;function ai(){return ln||(ln=1,Xt=function(e){return!!(e&&e.__CANCEL__)}),Xt}var hn=oe,Yt=Tu,Bu=ai(),Iu=xr;function Zt(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Au=function(e){Zt(e),e.headers=e.headers||{},e.data=Yt.call(e,e.data,e.headers,e.transformRequest),e.headers=hn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),hn.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||Iu.adapter;return r(e).then(function(o){return Zt(e),o.data=Yt.call(e,o.data,o.headers,e.transformResponse),o},function(o){return Bu(o)||(Zt(e),o&&o.response&&(o.response.data=Yt.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},Z=oe,si=function(e,r){r=r||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function d(g,b){return Z.isPlainObject(g)&&Z.isPlainObject(b)?Z.merge(g,b):Z.isPlainObject(b)?Z.merge({},b):Z.isArray(b)?b.slice():b}function f(g){Z.isUndefined(r[g])?Z.isUndefined(e[g])||(n[g]=d(void 0,e[g])):n[g]=d(e[g],r[g])}Z.forEach(o,function(b){Z.isUndefined(r[b])||(n[b]=d(void 0,r[b]))}),Z.forEach(i,f),Z.forEach(s,function(b){Z.isUndefined(r[b])?Z.isUndefined(e[b])||(n[b]=d(void 0,e[b])):n[b]=d(void 0,r[b])}),Z.forEach(l,function(b){b in r?n[b]=d(e[b],r[b]):b in e&&(n[b]=d(void 0,e[b]))});var p=o.concat(i).concat(s).concat(l),y=Object.keys(e).concat(Object.keys(r)).filter(function(b){return p.indexOf(b)===-1});return Z.forEach(y,f),n};const Uu="axios",Fu="0.21.4",Pu="Promise based HTTP client for the browser and node.js",ju="index.js",$u={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},Ru={type:"git",url:"https://github.com/axios/axios.git"},Cu=["xhr","http","ajax","promise","node"],Lu="Matt Zabriskie",Mu="MIT",Du={url:"https://github.com/axios/axios/issues"},ku="https://axios-http.com",qu={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},Hu={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},Gu="dist/axios.min.js",Ju="dist/axios.min.js",Vu="./index.d.ts",Wu={"follow-redirects":"^1.14.0"},zu=[{path:"./dist/axios.min.js",threshold:"5kB"}],Xu={name:Uu,version:Fu,description:Pu,main:ju,scripts:$u,repository:Ru,keywords:Cu,author:Lu,license:Mu,bugs:Du,homepage:ku,devDependencies:qu,browser:Hu,jsdelivr:Gu,unpkg:Ju,typings:Vu,dependencies:Wu,bundlesize:zu};var fi=Xu,_r={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){_r[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var pn={},Yu=fi.version.split(".");function ci(t,e){for(var r=e?e.split("."):Yu,n=t.split("."),o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}_r.transitional=function(e,r,n){var o=r&&ci(r);function i(s,l){return"[Axios v"+fi.version+"] Transitional option '"+s+"'"+l+(n?". "+n:"")}return function(s,l,d){if(e===!1)throw new Error(i(l," has been removed in "+r));return o&&!pn[l]&&(pn[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,l,d):!0}};function Zu(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),o=n.length;o-- >0;){var i=n[o],s=e[i];if(s){var l=t[i],d=l===void 0||s(l,i,t);if(d!==!0)throw new TypeError("option "+i+" must be "+d);continue}if(r!==!0)throw Error("Unknown option "+i)}}var Qu={isOlderVersion:ci,assertOptions:Zu,validators:_r},li=oe,Ku=ii,dn=lu,mn=Au,Tt=si,hi=Qu,He=hi.validators;function nt(t){this.defaults=t,this.interceptors={request:new dn,response:new dn}}nt.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Tt(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&hi.assertOptions(r,{silentJSONParsing:He.transitional(He.boolean,"1.0.0"),forcedJSONParsing:He.transitional(He.boolean,"1.0.0"),clarifyTimeoutError:He.transitional(He.boolean,"1.0.0")},!1);var n=[],o=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(o=o&&g.synchronous,n.unshift(g.fulfilled,g.rejected))});var i=[];this.interceptors.response.forEach(function(g){i.push(g.fulfilled,g.rejected)});var s;if(!o){var l=[mn,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(i),s=Promise.resolve(e);l.length;)s=s.then(l.shift(),l.shift());return s}for(var d=e;n.length;){var f=n.shift(),p=n.shift();try{d=f(d)}catch(y){p(y);break}}try{s=mn(d)}catch(y){return Promise.reject(y)}for(;i.length;)s=s.then(i.shift(),i.shift());return s};nt.prototype.getUri=function(e){return e=Tt(this.defaults,e),Ku(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};li.forEach(["delete","get","head","options"],function(e){nt.prototype[e]=function(r,n){return this.request(Tt(n||{},{method:e,url:r,data:(n||{}).data}))}});li.forEach(["post","put","patch"],function(e){nt.prototype[e]=function(r,n,o){return this.request(Tt(o||{},{method:e,url:r,data:n}))}});var ea=nt,Qt,yn;function pi(){if(yn)return Qt;yn=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Qt=t,Qt}var Kt,gn;function ta(){if(gn)return Kt;gn=1;var t=pi();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var o=this;r(function(s){o.reason||(o.reason=new t(s),n(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var n,o=new e(function(s){n=s});return{token:o,cancel:n}},Kt=e,Kt}var er,wn;function ra(){return wn||(wn=1,er=function(e){return function(n){return e.apply(null,n)}}),er}var tr,vn;function na(){return vn||(vn=1,tr=function(e){return typeof e=="object"&&e.isAxiosError===!0}),tr}var bn=oe,ia=ti,ct=ea,oa=si,ua=xr;function di(t){var e=new ct(t),r=ia(ct.prototype.request,e);return bn.extend(r,ct.prototype,e),bn.extend(r,e),r}var le=di(ua);le.Axios=ct;le.create=function(e){return di(oa(le.defaults,e))};le.Cancel=pi();le.CancelToken=ta();le.isCancel=ai();le.all=function(e){return Promise.all(e)};le.spread=ra();le.isAxiosError=na();wr.exports=le;wr.exports.default=le;(function(t){t.exports=wr.exports})(ei);const aa=_i(ei.exports);var Be;(function(t){t.H5="h5",t.WX_MP="wxmp",t.UNI_APP="uniapp"})(Be||(Be={}));var xn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},_n=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},gt=function(){function t(e){this.options=Object.assign({},e),this.options.timeout=(e==null?void 0:e.timeout)||15e3}return t.prototype.send=function(e,r){return xn(this,void 0,void 0,function(){var n,o,i,s;return _n(this,function(l){switch(l.label){case 0:n=Object.assign({},r,{action:e}),o=setTimeout(function(){console.warn("Database operation is longer than 3s. Please check query performance and your network environment.")},3e3),l.label=1;case 1:return l.trys.push([1,,3,4]),i=this.options.baseUrl+this.options.dbProxyUrl,[4,this.request(i,n)];case 2:return s=l.sent(),[2,s.data];case 3:return clearTimeout(o),[7];case 4:return[2]}})})},t.prototype.request=function(e,r){return xn(this,void 0,void 0,function(){var n,o,i;return _n(this,function(s){switch(s.label){case 0:if(this.options.environment!==Be.H5)throw new Error("environment type must be h5");return n=this.options.getAccessToken(),o=this.getHeaders(n),[4,aa.post(e,r,{headers:o,timeout:this.options.timeout})];case 1:return i=s.sent(),[2,i]}})})},t.prototype.getHeaders=function(e,r){var n;r=r??{"Content-Type":"application/json"},e&&(r.Authorization="Bearer "+e);var o=((n=this.options)===null||n===void 0?void 0:n.headers)||{};return Object.assign(r,o)},t}(),sa=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},ca=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},la=function(t){sa(e,t);function e(r){return t.call(this,r)||this}return e.prototype.request=function(r,n,o){var i;return fa(this,void 0,void 0,function(){var s,l,d,f;return ca(this,function(p){switch(p.label){case 0:if(this.options.environment!==Be.UNI_APP)throw new Error("environment type must be uniapp");return s=this.options.getAccessToken(),l=this.getHeaders(s),d={url:r,header:l,method:(i=o==null?void 0:o.method)!==null&&i!==void 0?i:"POST",data:n,dataType:"json"},[4,uni.request(d)];case 1:return f=p.sent(),[2,f]}})})},e}(gt),ha=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wt=globalThis&&globalThis.__assign||function(){return wt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},wt.apply(this,arguments)},pa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},da=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},ma=function(t){ha(e,t);function e(r){return t.call(this,r)||this}return e.prototype.request=function(r,n,o){var i;return pa(this,void 0,void 0,function(){var s,l,d;return da(this,function(f){if(this.options.environment!==Be.WX_MP)throw new Error("environment type must be wxmp");return s=this.options.getAccessToken(),l=this.getHeaders(s),d={url:r,header:l,method:(i=o==null?void 0:o.method)!==null&&i!==void 0?i:"POST",data:n,dataType:"json"},[2,new Promise(function(p,y){wx.request(wt(wt({},d),{success:function(g){p(g)},fail:function(g){y(g)}}))})]})})},e}(gt),En=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(p){try{f(n.next(p))}catch(y){s(y)}}function d(p){try{f(n.throw(p))}catch(y){s(y)}}function f(p){p.done?i(p.value):o(p.value).then(l,d)}f((n=n.apply(t,e||[])).next())})},On=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(p){return d([f,p])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],o=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},ya=function(){function t(e){var r=function(){return console.warn("WARNING: no getAccessToken set for db proxy request"),""};this.config={baseUrl:e.baseUrl,dbProxyUrl:e.dbProxyUrl,getAccessToken:(e==null?void 0:e.getAccessToken)||r,environment:(e==null?void 0:e.environment)||Be.H5,primaryKey:e==null?void 0:e.primaryKey,timeout:e==null?void 0:e.timeout,headers:e==null?void 0:e.headers,requestClass:e==null?void 0:e.requestClass};var n=this.requestClass;this._request=new n(this.config)}return Object.defineProperty(t.prototype,"requestClass",{get:function(){var e,r,n,o=(e=this.config)===null||e===void 0?void 0:e.environment,i=gt;return!((r=this.config)===null||r===void 0)&&r.requestClass?i=(n=this.config)===null||n===void 0?void 0:n.requestClass:o===Be.UNI_APP?i=la:o===Be.WX_MP?i=ma:i=gt,i},enumerable:!0,configurable:!0}),t.prototype.database=function(){var e;return new Wo({request:this._request,primaryKey:(e=this.config)===null||e===void 0?void 0:e.primaryKey})},t.prototype.invokeFunction=function(e,r){return En(this,void 0,void 0,function(){var n,o;return On(this,function(i){switch(i.label){case 0:return n=this.config.baseUrl+("/"+e),[4,this._request.request(n,r)];case 1:return o=i.sent(),[2,o.data]}})})},t.prototype.invoke=function(e,r){return En(this,void 0,void 0,function(){return On(this,function(n){switch(n.label){case 0:return[4,this.invokeFunction(e,r)];case 1:return[2,n.sent()]}})})},t}();globalThis.wx&&!globalThis.process&&(globalThis.process={env:{}},console.info("hacked for `process` missing for wechat miniprogram"));const ga={class:"mdui-card-primary w-600px px-2"},wa={class:"mdui-card-content message-content inline-block"},va={class:"inline-block"},ba=Sn("发送"),Pa=Ei({__name:"lafyun",setup(t){const e=new ya({baseUrl:"https://t2d2l8.lafyun.com:443",getAccessToken:()=>localStorage.getItem("access_token")||""});async function r(d,f){const p=await e.invoke("login",{username:d,password:f});return p.access_token&&localStorage.setItem("access_token",p.access_token),p}r("laf","laf");let n=Oi([]);const o=new WebSocket("wss://t2d2l8.lafyun.com:443");o.onopen=d=>{},o.onmessage=d=>{JSON.parse(d.data).forEach(p=>{if(p.type==="add")n.value.push(p);else if(p.type==="update"){const y=n.value.findIndex(g=>g._id==p._id);y>-1?n.value[y]=p:n.value.push(p)}else if(p.type==="delete"){const y=n.value.findIndex(g=>g._id==p._id);y>-1&&n.value.splice(y,1)}})};const i=(d,f)=>{const p=JSON.stringify({_id:d,type:"update",content:f});o.send(p)};o.onclose=()=>{};const s=()=>{const d=JSON.stringify({_id:"",type:"add",content:"hi"});o.send(d)},l=d=>{const f=JSON.stringify({_id:d,type:"delete"});o.send(f)};return(d,f)=>{const p=Ai,y=xi,g=bi;return At(),Ut("div",null,[(At(!0),Ut(Si,null,Ni(Ti(n),b=>{var O,T;return At(),Ut("div",{key:b._id,class:"mdui-card",style:{margin:"10px 0",width:"500px"}},[Pt("div",ga,[Pt("div",wa,[Sn(Ii(((T=(O=b.object)==null?void 0:O.user)==null?void 0:T.username)+"："+b._id),1),Ft(p,{modelValue:b.object.content,"onUpdate:modelValue":_=>b.object.content=_,clearable:"",onInput:_=>i(b._id,b.object.content)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),Pt("div",va,[Ft(y,{class:"relative top-1",onClick:_=>l(b._id)},null,8,["onClick"])])])])}),128)),Ft(g,{type:"primary",size:"default",onClick:s},{default:Bi(()=>[ba]),_:1})])}}});export{Pa as default};
