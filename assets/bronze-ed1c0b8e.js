/* empty css             */import{E as C}from"./button-bfcc4e4a.js";import{_ as U}from"./delete-fb803db9.js";/* empty css              */import{E as z}from"./switch-ce04770a.js";import{d as I,ab as b,e as l,ac as S,ad as K,ae as n,h as W,o as G,a as f,F as M,D as N,w as D,b as d,y as _,x as $,A as F,B as E,G as H,af as p,v as j}from"./index-01622320.js";import{E as q}from"./index-38142232.js";import"./index-cae2b4ed.js";import"./use-form-item-e55812c6.js";import"./constants-6e2a2e6f.js";import"./index-86a38320.js";import"./validator-e94c5d77.js";import"./event-1da57d2d.js";import"./isNil-c75b1b34.js";const Y={class:"flex justify-center items-center flex-col"},J=d("h1",{class:"text-7xl"},"LiveQuery",-1),P={class:"w-50 pl-2 pr-2 inline-block"},X={class:"inline-block"},Z=d("div",{class:"cursor-move"},"ðŸ‘‹ Drag here!",-1),Q=d("div",{class:"text-xs opacity-50"},"Handle that triggers the drag event",-1),ee={class:"text-sm opacity-50"},ye=I({__name:"bronze",setup(te){const g=b(n.TODO.name);let r=l();g.find().then(t=>{r.value=t}),g.subscribe().then(t=>{t.on("create",e=>{r.value.push(e)}),t.on("enter",(e,o)=>{}),t.on("update",(e,o)=>{const s=r.value.findIndex(A=>A.id==(e==null?void 0:e.id));r.value[s]=e}),t.on("delete",e=>{r.value=r.value.filter(o=>o.id!=(e==null?void 0:e.id))})});const B=()=>{const t=p.Object.extend(n.TODO.name),e=new t;e.set(n.TODO.keys.content,"Hello world!"),e.set(n.TODO.keys.done,!0),e.set(n.TODO.keys.user,j()()),e.save().then(o=>{})},L=(t,e)=>{const o=p.Object.createWithoutData(n.TODO.name,t);o.set(n.TODO.keys.done,e),o.save()},R=(t,e)=>{const o=p.Object.createWithoutData(n.TODO.name,t);o.set(n.TODO.keys.content,e),o.save()},T=t=>{p.Object.createWithoutData(n.TODO.name,t).destroy()},k=l(null);let{x:c,y:i,style:V}=S(k,{initialValue:{x:40,y:40}});const[y,v]=[l(c),l(i)];let m=l();K([y,v],()=>{m.value;const t=p.Object.createWithoutData(n.DRAGGABLE.name,m.value);t.set(n.DRAGGABLE.keys.x,y.value),t.set(n.DRAGGABLE.keys.y,v.value),t.save()},{debounce:500});const O=b(n.DRAGGABLE.name),x=(t,e)=>{const o=p.Object.extend(n.DRAGGABLE.name),s=new o;return s.set(n.DRAGGABLE.keys.name,"bronzeDrag"),s.set(n.DRAGGABLE.keys.x,t),s.set(n.DRAGGABLE.keys.y,e),s.save(),s},h=t=>{if(t){c.value=t.x,i.value=t.y;return}O.find().then(e=>{if(!(e!=null&&e.length))h(x(40,40));else{const o=e.filter(s=>s.get(n.DRAGGABLE.keys.name)=="bronzeDrag")[0];c.value=o.get(n.DRAGGABLE.keys.x),i.value=o.get(n.DRAGGABLE.keys.y),m=l(o.id)}},e=>{e.code=="101"&&h(x(40,40))})};return O.subscribe().then(t=>{t.on("create",e=>{m=l(e.id),c.value=e.get(n.DRAGGABLE.keys.x),i.value=e.get(n.DRAGGABLE.keys.y)}),t.on("enter",(e,o)=>{}),t.on("update",(e,o)=>{m=l(e.id),c.value=e.get(n.DRAGGABLE.keys.x),i.value=e.get(n.DRAGGABLE.keys.y)}),t.on("delete",e=>{})}),W(()=>{}),h(null),(t,e)=>{const o=z,s=q,A=U,w=C;return G(),f("div",Y,[J,(G(!0),f(M,null,N(_(r),a=>(G(),f("div",{key:a.id,class:"flex items-center justify-center p-2"},[D(o,{modelValue:a.attributes.done,"onUpdate:modelValue":u=>a.attributes.done=u,onClick:u=>L(a.id,a.attributes.done)},null,8,["modelValue","onUpdate:modelValue","onClick"]),d("div",P,[D(s,{modelValue:a.attributes.content,"onUpdate:modelValue":u=>a.attributes.content=u,clearable:"",onInput:u=>R(a.id,a.attributes.content)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),d("div",X,[D(A,{class:"mt-1",onClick:u=>T(a.id)},null,8,["onClick"])])]))),128)),D(w,{onClick:B},{default:$(()=>[F(" ç‚¹å‡»æ·»åŠ ")]),_:1}),d("div",{ref_key:"settingRef",ref:k,style:H(_(V)),class:"bg-light-50 fixed shadow select-none z-10 hover:shadow-lg px-4 py-2 border-gray-400/30 rounded fixed"},[Z,Q,d("div",ee," I am at "+E(Math.round(_(c)))+", "+E(Math.round(_(i))),1)],4)])}}});export{ye as default};
