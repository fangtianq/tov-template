import{e as g,f as v,h as r,d as F,o as S,a1 as _,m as f,j as t,w as n,C as B,q as $,R as I,k as m,n as M}from"./index.a09c63c7.js";import{c as R,s as U}from"./lodash.77430e73.js";import{E as A,a as L,b as N,c as T,_ as j,d as u}from"./favicon.e4285bc1.js";import{E as D}from"./el-popover.1e50e642.js";import"./el-popper.7b3b8323.js";import{b as h}from"./route-block.b5bad31b.js";import"./plugin-vue_export-helper.86948cb9.js";import"./index.0577eb94.js";import"./icon.731e6bfb.js";const q={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},z=r("path",{fill:"currentColor",d:"m13.3 19.26l5.66-5.65l2.12 2.12l-5.66 5.65l-2.12-2.12m3.2-8.13l-3.1-3.08a1.68 1.68 0 0 0-.4-.29l-1.12-4.29a1.001 1.001 0 0 0-1.94.49L11 8.03L8.67 3.19c-.23-.5-.83-.69-1.33-.48c-.5.24-.71.84-.47 1.34l1.69 3.54l-3.37-3.34c-.39-.39-1.03-.39-1.42 0c-.39.4-.38 1.03.01 1.42l3.72 3.7l-.7.27l-1.08.43l-1.91 1.32s-.81 1.05-.88 1.5c-.08.45.79 2.71.79 2.71h.01c.16.34.5.58.9.58a1 1 0 0 0 1-1c0-.1-.03-.18-.06-.27l.02-.01L5 13.17l1.23-.98c.47.02 1.48.1 1.97.13c2.73 2.45.15 3.41.15 3.41l-3.46 1.06l-.17.14a.94.94 0 0 0-.3.75l.02 1.07l6.43-.5c.38.01.74-.13 1.02-.4l4.61-4.6c.53-.54.55-1.55 0-2.12Z"},null,-1),Y=[z];function Z(b,s){return g(),v("svg",q,Y)}var G={name:"mdi-hand-okay",render:Z};const H={class:"bg-white h-screen font-github"},J={class:"flex justify-center items-center flex-col"},K=r("div",{class:"p-8"},[r("img",{src:j,class:"w-12 h-12",alt:"tov"})],-1),O=r("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign up to tov-template ",-1),Q={class:"h-98 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},W=m(" \u8F93\u5165\u9A8C\u8BC1\u7801 "),X=["src"],ee=m("Sign up"),se=r("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[m(" Already have an account? "),r("a",{href:"login",class:"text-github_a"}," Sign in \u2192 "),m(" . ")],-1),oe=F({__name:"signup",setup(b){S(()=>{c()});const s=_({username:"",password:"",checkPass:"",smsCodeInput:"",smsCode:"",smsCodeVisible:!1,smsCodeCanSend:!1,captcha:f(),loading:!0}),w=l=>{s.smsCodeVisible=l},c=()=>{R().then(l=>{s.smsCode=l.url,s.captcha=l})},C=M(),V=()=>{var l;!s.loading||(l=s.captcha)==null||l.verify(s.smsCodeInput).then(e=>{s.loading=!1},e=>{e.code==800?c():u.error(e.rawMessage)}).catch(e=>{u.error(e)})},x=_({password:[{validator:(l,e,o)=>{if(e==="")o(new Error("Please input the password"));else{if(s.checkPass!==""){if(!d.value)return;d.value.validateField("checkPass",()=>null)}o()}},trigger:"blur"}],checkPass:[{validator:(l,e,o)=>{e===""?o(new Error("Please input the password again")):e!==s.password?o(new Error("Two inputs don't match!")):o()},trigger:"blur"}]}),d=f(),P=l=>{!l||l.validate(e=>{if(e)U(s.username,s.password).then(o=>{u.success("\u6CE8\u518C\u6210\u529F"),C.push("login")},o=>{u.error(`\u6CE8\u518C\u5931\u8D25\uFF1A${o.rawMessage}`)});else return!1})};return(l,e)=>{const o=A,i=L,k=G,p=N,E=D,y=T;return g(),v("div",H,[t(y,{ref_key:"ruleFormRef",ref:d,model:s,"label-position":"top",rules:x},{default:n(()=>[r("div",J,[K,O,r("div",Q,[t(i,{label:"Phone number"},{default:n(()=>[t(o,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.username=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"Password",prop:"password"},{default:n(()=>[t(o,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.password=a),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(i,{label:"Confirm",prop:"checkPass"},{default:n(()=>[t(o,{modelValue:s.checkPass,"onUpdate:modelValue":e[2]||(e[2]=a=>s.checkPass=a),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(i,null,{default:n(()=>[t(E,{visible:s.smsCodeVisible,placement:"right"},{reference:n(()=>[t(p,{id:"verify",class:B("text-github_a mb-1"),disabled:"",loading:s.loading},{default:n(()=>[$(t(k,null,null,512),[[I,!s.loading]]),W]),_:1},8,["loading"])]),default:n(()=>[r("img",{src:s.smsCode,onClick:c},null,8,X)]),_:1},8,["visible"]),t(o,{modelValue:s.smsCodeInput,"onUpdate:modelValue":e[3]||(e[3]=a=>s.smsCodeInput=a),class:"w-8",onFocus:e[4]||(e[4]=a=>w(!0)),onBlur:e[5]||(e[5]=a=>V())},null,8,["modelValue"])]),_:1}),t(i,null,{default:n(()=>[t(p,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:e[6]||(e[6]=a=>P(d.value))},{default:n(()=>[ee]),_:1})]),_:1})]),se])]),_:1},8,["model","rules"])])}}});typeof h=="function"&&h(oe);export{oe as default};
