import{_ as Q}from"./add-9341d99d.js";import{a as A}from"./request-af25b9b6.js";import{d as U,l as _,e as v,ar as X,f as w,m as Y,h as Z,o as D,a as j,b as M,A as x,F as ee,D as te,c as ne,x as z,B as ae,y as N,w as $,z as se,a3 as E,H as L}from"./index-01622320.js";import{t as oe,_ as K,c as ie}from"./Tag-2e578a60.js";import{e as le,c as H,u as re,f as W}from"./use-rtl-005adc7e.js";import{d as ue,a as de,_ as q}from"./Button-45634ec5.js";import{c as ce,f as me,e as pe,d as P}from"./light-7b7c27c0.js";import{u as ge,N as fe}from"./Icon-b1050c74.js";import{i as he,_ as _e}from"./Input-310541f4.js";import{s as ve,_ as ye}from"./Space-f0fd76ee.js";function Ce(e){switch(e){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error("".concat(e," has no smaller size."))}const be=U({name:"Add",render(){return _("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),Te=le({name:"DynamicTags",common:ce,peers:{Input:he,Button:ue,Tag:oe,Space:ve},self(){return{inputWidth:"64px"}}}),Re=Te,Ve=H("dynamic-tags",[H("input",{minWidth:"var(--n-input-width)"})]),Ie=Object.assign(Object.assign(Object.assign({},W.props),ie),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:e=>e},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ke=U({name:"DynamicTags",props:Ie,setup(e){const{mergedClsPrefixRef:C,inlineThemeDisabled:m}=re(e),{localeRef:p}=de("DynamicTags"),u=me(e),{mergedDisabledRef:i}=u,y=v(""),g=v(!1),n=v(!0),a=v(null),l=W("DynamicTags","-dynamic-tags",Ve,Re,e,C),c=v(e.defaultValue),r=X(e,"value"),f=ge(r,c),d=w(()=>p.value.add),R=w(()=>Ce(e.size)),I=w(()=>i.value||!!e.max&&f.value.length>=e.max);function k(t){const{onChange:s,"onUpdate:value":o,onUpdateValue:T}=e,{nTriggerFormInput:G,nTriggerFormChange:J}=u;s&&P(s,t),T&&P(T,t),o&&P(o,t),c.value=t,G(),J()}function F(t){const s=f.value.slice(0);s.splice(t,1),k(s)}function O(t){switch(t.key){case"Enter":b()}}function b(t){const s=t!=null?t:y.value;if(s){const o=f.value.slice(0);o.push(e.onCreate(s)),k(o)}g.value=!1,n.value=!0,y.value=""}function B(){b()}function S(){g.value=!0,Y(()=>{var t;(t=a.value)===null||t===void 0||t.focus(),n.value=!1})}const V=w(()=>{const{self:{inputWidth:t}}=l.value;return{"--n-input-width":t}}),h=m?pe("dynamic-tags",void 0,V,e):void 0;return{mergedClsPrefix:C,inputInstRef:a,localizedAdd:d,inputSize:R,inputValue:y,showInput:g,inputForceFocused:n,mergedValue:f,mergedDisabled:i,triggerDisabled:I,handleInputKeyUp:O,handleAddClick:S,handleInputBlur:B,handleCloseClick:F,handleInputConfirm:b,mergedTheme:l,cssVars:m?void 0:V,themeClass:h==null?void 0:h.themeClass,onRender:h==null?void 0:h.onRender}},render(){const{mergedTheme:e,cssVars:C,mergedClsPrefix:m,onRender:p,renderTag:u}=this;return p==null||p(),_(ye,{class:["".concat(m,"-dynamic-tags"),this.themeClass],size:"small",style:C,theme:e.peers.Space,themeOverrides:e.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:i,tagClass:y,tagStyle:g,type:n,round:a,size:l,color:c,closable:r,mergedDisabled:f,showInput:d,inputValue:R,inputClass:I,inputStyle:k,inputSize:F,inputForceFocused:O,triggerDisabled:b,handleInputKeyUp:B,handleInputBlur:S,handleAddClick:V,handleCloseClick:h,handleInputConfirm:t,$slots:s}=this;return this.mergedValue.map((o,T)=>u?u(o,T):_(K,{key:T,theme:i.peers.Tag,themeOverrides:i.peerOverrides.Tag,class:y,style:g,type:n,round:a,size:l,color:c,closable:r,disabled:f,onClose:()=>{h(T)}},{default:()=>typeof o=="string"?o:o.label})).concat(d?s.input?s.input({submit:t,deactivate:S}):_(_e,Object.assign({placeholder:"",size:F,style:k,class:I,autosize:!0},this.inputProps,{ref:"inputInstRef",value:R,onUpdateValue:o=>{this.inputValue=o},theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,onKeyup:B,onBlur:S,internalForceFocus:O})):s.trigger?s.trigger({activate:V,disabled:b}):_(q,{dashed:!0,disabled:b,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:F,onClick:V},{icon:()=>_(fe,{clsPrefix:m},{default:()=>_(be,null)})}))}})}}),Fe={class:"pb-4"},Se={class:"bg-#f4f4f8 text-#333639 px-4 py-2"},Ue=U({__name:"rolePermissionModify",props:{refresh:{type:Function,default(){return()=>{}}}},setup(e){const C=e,m=v([]),p=v([]),u=v([]),i=n=>({label:"ROLE_"+n,value:"v"+n}),y=n=>{var l,c;const a=p.value;a.length>n.length?A.get("/8080/admin/role/delete",{id:(l=a.at(-1))==null?void 0:l.id}).then(r=>{E["".concat(r.data.status)]("".concat(r.data.msg))}):a.length<n.length&&A.get("/8080/admin/role/add",{name:(c=n.at(-1))==null?void 0:c.label}).then(r=>{E["".concat(r.data.status)]("".concat(r.data.msg))}),setTimeout(()=>{g(),C.refresh()},500)},g=()=>{A.get("/8080/admin/roles").then(n=>{const a=n.data;m.value=L.take(a,5),p.value=L.slice(a,5),u.value=L.slice(a,5).map(l=>l.name)})};return Z(()=>{g()}),(n,a)=>{const l=K,c=Q,r=q,f=ke;return D(),j("div",Fe,[M("div",Se,[x(" 默认角色："),(D(!0),j(ee,null,te(N(m),d=>(D(),ne(l,{key:d.id,class:"ml-4",type:"success"},{default:z(()=>[x(ae(d.name),1)]),_:2},1024))),128))]),M("div",null,[x(" 添加角色："),$(f,{value:N(u),"onUpdate:value":[a[0]||(a[0]=d=>se(u)?u.value=d:null),y],onCreate:i},{trigger:z(({activate:d,disabled:R})=>[$(r,{size:"small",type:"primary",dashed:"",disabled:R,onClick:I=>d()},{icon:z(()=>[$(c)]),default:z(()=>[x(" 添加 ")]),_:2},1032,["disabled","onClick"])]),_:1},8,["value"])])])}}});export{be as A,Ue as _};
