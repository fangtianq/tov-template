import{d as f,al as E,r as F,o as k,am as V,c as y,g as s,h as n,an as C,ao as b,u as B,ap as R,a as S,b as a,C as m,aq as P,ar as _,ae as N,as as T}from"./index.82f4da07.js";import{E as U,a as M,b as I,c as $,_ as j}from"./favicon.cf786dc0.js";import{b as p}from"./route-block.1e6a8648.js";import"./index.66b36b85.js";import"./index.faa988c3.js";const q={class:"bg-white h-screen font-github"},A={class:"flex justify-center items-center flex-col"},D=a("div",{class:"p-8"},[a("img",{src:j,class:"w-12 h-12",alt:"tov"})],-1),z=a("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign in to tov-template ",-1),G={class:"h-57 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},H=m("Sign in"),J=a("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[m(" New to Tov? "),a("a",{href:"signup",class:"text-github_a"},"Create an account"),m(" . ")],-1),K=f({name:"***",beforeRouteEnter(h,i,e){e(l=>{C.isEmpty(b().value)||l.router.replace(i.path)})}}),L=f({...K,setup(h,{expose:i}){const e=E({username:"",password:""}),l=F(),c=B(),g=R();k(()=>{});const v=d=>{!d||d.validate(t=>{if(t)P(e.username,e.password).then(o=>{b().value=o.getSessionToken(),_.success(`\u767B\u5F55\u6210\u529F\uFF0C\u6B22\u8FCE\u60A8${o.getUsername()}\u56DE\u6765~`);let{fromParams:r}=N(T());c.push(r.value.fromPath)},o=>{_.error(o.rawMessage)});else return!1})};return i({router:c,currentUser:V,route:g}),(d,t)=>{const o=U,r=M,w=I,x=$;return S(),y("div",q,[s(x,{ref_key:"ruleFormRef",ref:l,model:e,"label-position":"top"},{default:n(()=>[a("div",A,[D,z,a("div",G,[s(r,{label:"Phone number"},{default:n(()=>[s(o,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=u=>e.username=u)},null,8,["modelValue"])]),_:1}),s(r,{label:"Password"},{default:n(()=>[s(o,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=u=>e.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(r,null,{default:n(()=>[s(w,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:t[2]||(t[2]=u=>v(l.value))},{default:n(()=>[H]),_:1})]),_:1})]),J])]),_:1},8,["model"])])}}});typeof p=="function"&&p(L);export{L as default};
