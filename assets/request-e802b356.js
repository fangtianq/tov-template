import{aY as p,c3 as h,aA as d,aV as m}from"./index-c20bf65e.js";import{a as n}from"./index-6aa4c9ae.js";const f=(e,t)=>n.post("/api".concat(e),{...t}),$=(e,t,o={})=>n.get("/api".concat(e,"?").concat(j.jsonToQueryString(t)),o),j={jsonToQueryString(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},getQueryString(e){let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return o!=null?decodeURI(o[2].toUpperCase()):null}},S=(e,t="301284")=>{let o={...e.header};const a=e.method||"get";let{ajaxTimes:r}=p(h());const i=d()();o.Authorization=i.getSessionToken,r.value++;const u=m({message:"Loading",type:"success"}),c="http://rap2api.taobao.org/app/mock/".concat(t,"/").concat(a);return new Promise((l,g)=>{n({...e,header:o,url:c+e.url}).then(s=>{l(s.data)}).catch(s=>{g(s)}).then(()=>{r.value--,(r.value===0||r.value!==0)&&u.close()})})},T={get:$,post:f};export{T as a,S as r};
