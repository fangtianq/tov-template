!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",a=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(e){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,u=Object.create(o.prototype),s=new L(r||[]);return i(u,"_invoke",{value:T(t,n,s)}),u}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=l;var p="suspendedStart",d="suspendedYield",y="executing",g="completed",m={};function v(){}function b(){}function w(){}var _={};c(_,s,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(B([])));O&&O!==r&&o.call(O,s)&&(_=O);var x=w.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function N(t,e){function n(r,i,u,s){var a=h(t[r],t,i);if("throw"!==a.type){var f=a.arg,c=f.value;return c&&"object"==typeof c&&o.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,u,s)}),(function(t){n("throw",t,u,s)})):e.resolve(c).then((function(t){f.value=t,u(f)}),(function(t){return n("throw",t,u,s)}))}s(a.arg)}var r;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function T(t,n,r){var o=p;return function(i,u){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw u;return{value:e,done:!0}}for(r.method=i,r.arg=u;;){var s=r.delegate;if(s){var a=j(s,r);if(a){if(a===m)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var f=h(t,n,r);if("normal"===f.type){if(o=r.done?g:d,f.arg===m)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(o=g,r.method="throw",r.arg=f.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var u=i.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=w,i(x,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,f,"GeneratorFunction")),t.prototype=Object.create(x),t},n.awrap=function(t){return{__await:t}},S(N.prototype),c(N.prototype,a,(function(){return this})),n.AsyncIterator=N,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var u=new N(l(t,e,r,o),i);return n.isGeneratorFunction(e)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},S(x),c(x,f,"Generator"),c(x,s,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=B,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i],s=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var a=o.call(u,"catchLoc"),f=o.call(u,"finallyLoc");if(a&&f){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},n}System.register(["./base-legacy.38854648.js","./button-legacy.dac9a932.js","./delete-legacy.25d41982.js","./input-legacy.13394860.js","./index-legacy.7a69c0b7.js","./index-legacy.c83ba5f5.js","./index-legacy.7b325e2d.js","./use-form-item-legacy.2bf25b24.js","./constants-legacy.cc1dfcfa.js","./index-legacy.b33c6eb8.js","./event-legacy.7722cbb2.js","./isNil-legacy.e248952d.js"],(function(e,n){"use strict";var r,o,i,u,s,a,f,c,l,h,p,d,y,g,m,v;return{setters:[null,t=>{r=t.E},t=>{o=t._},null,t=>{i=t.W,u=t.d,s=t.e,a=t.o,f=t.a,c=t.F,l=t.D,h=t.b,p=t.A,d=t.B,y=t.w,g=t.y,m=t.x},t=>{v=t.E},null,null,null,null,null,null],execute:function(){var n,b;!function(t){t.DocIDError="文档ID不合法",t.CollNameError="集合名称不合法",t.OpStrError="操作符不合法",t.DirectionError="排序字符不合法",t.IntegerError="must be integer",t.QueryParamTypeError="查询参数必须为对象",t.QueryParamValueError="查询参数对象值不能均为undefined"}(b||(b={}));var w,_,E="Number",O="Object",x="Array",S="GeoPoint",N="GeoLineString",T="GeoPolygon",j="GeoMultiPoint",A="GeoMultiLineString",I="GeoMultiPolygon",L="Date",B="ServerDate",P="BsonDate",U="ObjectId",k="Binary",R=["desc","asc"],q=["<","<=","==",">=",">"];!function(t){t.lt="<",t.gt=">",t.lte="<=",t.gte=">=",t.eq="=="}(w||(w={})),(n={})[w.eq]="$eq",n[w.lt]="$lt",n[w.lte]="$lte",n[w.gt]="$gt",n[w.gte]="$gte",function(t){t.add="database.addDocument",t.query="database.queryDocument",t.update="database.updateDocument",t.count="database.countDocument",t.remove="database.deleteDocument",t.aggregate="database.aggregateDocuments"}(_||(_={}));for(var $=function(t){var e=V(t),n=e[0],r=e[1];return 3*(n+r)/4-r},M=function(t){var e,n,r=V(t),o=r[0],i=r[1],u=new J(function(t,e,n){return 3*(e+n)/4-n}(0,o,i)),s=0,a=i>0?o-4:o;for(n=0;n<a;n+=4)e=F[t.charCodeAt(n)]<<18|F[t.charCodeAt(n+1)]<<12|F[t.charCodeAt(n+2)]<<6|F[t.charCodeAt(n+3)],u[s++]=e>>16&255,u[s++]=e>>8&255,u[s++]=255&e;2===i&&(e=F[t.charCodeAt(n)]<<2|F[t.charCodeAt(n+1)]>>4,u[s++]=255&e);1===i&&(e=F[t.charCodeAt(n)]<<10|F[t.charCodeAt(n+1)]<<4|F[t.charCodeAt(n+2)]>>2,u[s++]=e>>8&255,u[s++]=255&e);return u},C=function(t){for(var e,n=t.length,r=n%3,o=[],i=16383,u=0,s=n-r;u<s;u+=i)o.push(Z(t,u,u+i>s?s:u+i));1===r?(e=t[n-1],o.push(D[e>>2]+D[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(D[e>>10]+D[e>>4&63]+D[e<<2&63]+"="));return o.join("")},D=[],F=[],J="undefined"!=typeof Uint8Array?Uint8Array:Array,H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0;G<64;++G)D[G]=H[G],F[H.charCodeAt(G)]=G;function V(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function Z(t,e,n){for(var r,o,i=[],u=e;u<n;u+=3)r=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),i.push(D[(o=r)>>18&63]+D[o>>12&63]+D[o>>6&63]+D[63&o]);return i.join("")}F["-".charCodeAt(0)]=62,F["_".charCodeAt(0)]=63;var Y={byteLength:$,toByteArray:M,fromByteArray:C},z=function(t,e,n,r,o){var i,u,s=8*o-r-1,a=(1<<s)-1,f=a>>1,c=-7,l=n?o-1:0,h=n?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+t[e+l],l+=h,c-=8);for(u=i&(1<<-c)-1,i>>=-c,c+=r;c>0;u=256*u+t[e+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===a)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,r),i-=f}return(p?-1:1)*u*Math.pow(2,i-r)},W=function(t,e,n,r,o,i){var u,s,a,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,u=c):(u=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-u))<1&&(u--,a*=2),(e+=u+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(u++,a/=2),u+l>=c?(s=0,u=c):u+l>=1?(s=(e*a-1)*Math.pow(2,o),u+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;t[n+p]=255&s,p+=d,s/=256,o-=8);for(u=u<<o|s,f+=o;f>0;t[n+p]=255&u,p+=d,u/=256,f-=8);t[n+p-d]|=128*y},Q=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=function(t){+t!=t&&(t=0);return i.alloc(+t)},e.INSPECT_MAX_BYTES=50;var r=2147483647;function o(t){if(t>r)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,i.prototype),e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|h(t,e),r=o(n),u=r.write(t,e);u!==n&&(r=r.slice(0,u));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if($(t,Uint8Array)){var e=new Uint8Array(t);return c(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t));if($(t,ArrayBuffer)||t&&$(t.buffer,ArrayBuffer))return c(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&($(t,SharedArrayBuffer)||t&&$(t.buffer,SharedArrayBuffer)))return c(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return i.from(r,e,n);var u=function(t){if(i.isBuffer(t)){var e=0|l(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||M(t.length)?o(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return i.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t))}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(t){return s(t),o(t<0?0:0|l(t))}function f(t){for(var e=t.length<0?0:0|l(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function c(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,i.prototype),r}function l(t){if(t>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|t}function h(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||$(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(t));var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(t).length;default:if(o)return r?-1:k(t).length;e=(""+e).toLowerCase(),o=!0}}function p(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return N(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),M(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,o){var i,u=1,s=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u=2,s/=2,a/=2,n/=2}function f(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}if(o){var c=-1;for(i=n;i<s;i++)if(f(t,i)===f(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===a)return c*u}else-1!==c&&(i-=i-c),c=-1}else for(n+a>s&&(n=s-a),i=n;i>=0;i--){for(var l=!0,h=0;h<a;h++)if(f(t,i+h)!==f(e,h)){l=!1;break}if(l)return i}return-1}function m(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;r>i/2&&(r=i/2);for(var u=0;u<r;++u){var s=parseInt(e.substr(2*u,2),16);if(M(s))return u;t[n+u]=s}return u}function v(t,e,n,r){return q(k(e,t.length-n),t,n,r)}function b(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return q(R(e),t,n,r)}function _(t,e,n,r){return q(function(t,e){for(var n,r,o,i=[],u=0;u<t.length&&!((e-=2)<0);++u)r=(n=t.charCodeAt(u))>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,u,s,a,f=t[o],c=null,l=f>239?4:f>223?3:f>191?2:1;if(o+l<=n)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(i=t[o+1]))&&(a=(31&f)<<6|63&i)>127&&(c=a);break;case 3:i=t[o+1],u=t[o+2],128==(192&i)&&128==(192&u)&&(a=(15&f)<<12|(63&i)<<6|63&u)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:i=t[o+1],u=t[o+2],s=t[o+3],128==(192&i)&&128==(192&u)&&128==(192&s)&&(a=(15&f)<<18|(63&i)<<12|(63&u)<<6|63&s)>65535&&a<1114112&&(c=a)}null===c?(c=65533,l=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=l}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=x));return n}(r)}e.kMaxLength=r,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(n){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(t,e,n){return function(t,e,n){return s(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},i.allocUnsafe=function(t){return a(t)},i.allocUnsafeSlow=function(t){return a(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==i.prototype},i.compare=function(t,e){if($(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),$(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,o=0,u=Math.min(n,r);o<u;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var u=t[n];if($(u,Uint8Array))o+u.length>r.length?i.from(u).copy(r,o):Uint8Array.prototype.set.call(r,u,o);else{if(!i.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(r,o)}o+=u.length}return r},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},n&&(i.prototype[n]=i.prototype.inspect),i.prototype.compare=function(t,e,n,r,o){if($(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(t));if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var u=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(u,s),f=this.slice(r,o),c=t.slice(e,n),l=0;l<a;++l)if(f[l]!==c[l]){u=f[l],s=c[l];break}return u<s?-1:s<u?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return v(this,t,e,n);case"ascii":case"latin1":case"binary":return b(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function S(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=C[t[i]];return o}function j(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,o,u){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<u)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,4),W(t,e,n,r,23,4),n+4}function P(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,8),W(t,e,n,r,52,8),n+8}i.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,i.prototype),r},i.prototype.readUintLE=i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},i.prototype.readUintBE=i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},i.prototype.readUint8=i.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),z(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),z(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),z(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),z(this,t,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUint8=i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var o=Math.pow(2,8*n-1);I(this,t,e,n,o-1,-o)}var i=0,u=1,s=0;for(this[e]=255&t;++i<n&&(u*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var o=Math.pow(2,8*n-1);I(this,t,e,n,o-1,-o)}var i=n-1,u=1,s=0;for(this[e+i]=255&t;--i>=0&&(u*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(!i.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var o=t.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var u;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(u=e;u<n;++u)this[u]=t;else{var s=i.isBuffer(t)?t:i.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<n-e;++u)this[u+e]=s[u%a]}return this};var U=/[^+/0-9A-Za-z-_]/g;function k(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],u=0;u<r;++u){if((n=t.charCodeAt(u))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function R(t){return Y.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function $(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function M(t){return t!=t}var C=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)e[r+o]=t[n]+t[o];return e}()})),K=Q.Buffer;/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Q.SlowBuffer,Q.INSPECT_MAX_BYTES,Q.kMaxLength;
/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.

            Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.

            THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */var X=function(t,e){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},X(t,e)};function tt(t,e){function n(){this.constructor=t}X(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var et=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return tt(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),nt=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return tt(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function rt(t){return t&&t.Math==Math&&t}function ot(){return rt("object"==typeof globalThis&&globalThis)||rt("object"==typeof window&&window)||rt("object"==typeof self&&self)||rt("object"==typeof global&&global)||Function("return this")()}var it=function(t){var e,n="object"==typeof(e=ot()).navigator&&"ReactNative"===e.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(n);for(var r=K.alloc(t),o=0;o<t;++o)r[o]=Math.floor(256*Math.random());return r},ut=function(){if("undefined"!=typeof window){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(K.alloc(e))}}return"undefined"!=typeof global&&global.crypto&&global.crypto.getRandomValues?function(t){return global.crypto.getRandomValues(K.alloc(t))}:it}();function st(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function at(t){return"object"==typeof t&&null!==t}function ft(t,e){var n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(console.warn(e),n=!0),t.apply(this,r)}}function ct(t){if(ArrayBuffer.isView(t))return K.from(t.buffer,t.byteOffset,t.byteLength);if(e=t,["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e)))return K.from(t);var e;throw new nt("Must use either Buffer or TypedArray")}var lt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,ht=function(t){return"string"==typeof t&&lt.test(t)},pt=function(t){if(!ht(t))throw new nt('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return K.from(e,"hex")},dt=function(t,e){return void 0===e&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},yt=Math.pow(2,53),gt=-Math.pow(2,53),mt=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new nt("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=n?n:t.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=K.alloc(t.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=K.from(e,"binary"):Array.isArray(e)?this.buffer=K.from(e):this.buffer=ct(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if("string"==typeof e&&1!==e.length)throw new nt("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new nt("only accepts single character Uint8Array or Array");var n;if((n="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||n>255)throw new nt("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=n;else{var r=K.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}},t.prototype.write=function(t,e){if(e="number"==typeof e?e:this.position,this.buffer.length<e+t.length){var n=K.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set(ct(t),e),this.position=e+t.byteLength>this.position?e+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,e,t.length,"binary"),this.position=e+t.length>this.position?e+t.length:this.position)},t.prototype.read=function(t,e){return e=e&&e>0?e:this.position,this.buffer.slice(t,t+e)},t.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(t){return this.buffer.toString(t)},t.prototype.toExtendedJSON=function(t){t=t||{};var e=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:e,$type:1===n.length?"0"+n:n}:{$binary:{base64:e,subType:1===n.length?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new vt(this.buffer.slice(0,this.position));throw new et('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,n){var r,o;if(n=n||{},"$binary"in e?n.legacy&&"string"==typeof e.$binary&&"$type"in e?(o=e.$type?parseInt(e.$type,16):0,r=K.from(e.$binary,"base64")):"string"!=typeof e.$binary&&(o=e.$binary.subType?parseInt(e.$binary.subType,16):0,r=K.from(e.$binary.base64,"base64")):"$uuid"in e&&(o=4,r=pt(e.$uuid)),!r)throw new nt("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return 4===o?new vt(r):new t(r,o)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(mt.prototype,"_bsontype",{value:"Binary"});var vt=function(t){function e(n){var r,o,i=this;if(null==n)r=e.generate();else if(n instanceof e)r=K.from(n.buffer),o=n.__id;else if(ArrayBuffer.isView(n)&&16===n.byteLength)r=ct(n);else{if("string"!=typeof n)throw new nt("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");r=pt(n)}return(i=t.call(this,r,4)||this).__id=o,i}return tt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer},set:function(t){this.buffer=t,e.cacheHexString&&(this.__id=dt(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(void 0===t&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var n=dt(this.id,t);return e.cacheHexString&&(this.__id=n),n},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch(n){return!1}},e.prototype.toBinary=function(){return new mt(this.id,mt.SUBTYPE_UUID)},e.generate=function(){var t=ut(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,K.from(t)},e.isValid=function(t){return!!t&&(t instanceof e||("string"==typeof t?ht(t):!!st(t)&&(16===t.length&&(64==(240&t[6])&&128==(128&t[8])))))},e.createFromHexString=function(t){return new e(pt(t))},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},e}(mt),bt=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);this.code=e,this.scope=n}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},t}();Object.defineProperty(bt.prototype,"_bsontype",{value:"Code"});var wt=function(){function t(e,n,r,o){if(!(this instanceof t))return new t(e,n,r,o);var i=e.split(".");2===i.length&&(r=i.shift(),e=i.shift()),this.collection=e,this.oid=n,this.db=r,this.fields=o||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},t.prototype.toExtendedJSON=function(t){t=t||{};var e={$ref:this.collection,$id:this.oid};return t.legacy?e:(this.db&&(e.$db=this.db),e=Object.assign(e,this.fields))},t.fromExtendedJSON=function(e){var n=Object.assign({},e);return delete n.$ref,delete n.$id,delete n.$db,new t(e.$ref,e.$id,e.$db,n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(wt.prototype,"_bsontype",{value:"DBRef"});var _t=void 0;try{_t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(n){}var Et=4294967296,Ot=0x10000000000000000,xt=Ot/2,St={},Nt={},Tt=function(){function t(e,n,r){if(void 0===e&&(e=0),!(this instanceof t))return new t(e,n,r);"bigint"==typeof e?Object.assign(this,t.fromBigInt(e,!!n)):"string"==typeof e?Object.assign(this,t.fromString(e,!!n)):(this.low=0|e,this.high=0|n,this.unsigned=!!r),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,n,r){return new t(e,n,r)},t.fromInt=function(e,n){var r,o,i;return n?(i=0<=(e>>>=0)&&e<256)&&(o=Nt[e])?o:(r=t.fromBits(e,(0|e)<0?-1:0,!0),i&&(Nt[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(o=St[e])?o:(r=t.fromBits(e,e<0?-1:0,!1),i&&(St[e]=r),r)},t.fromNumber=function(e,n){if(isNaN(e))return n?t.UZERO:t.ZERO;if(n){if(e<0)return t.UZERO;if(e>=Ot)return t.MAX_UNSIGNED_VALUE}else{if(e<=-xt)return t.MIN_VALUE;if(e+1>=xt)return t.MAX_VALUE}return e<0?t.fromNumber(-e,n).neg():t.fromBits(e%Et|0,e/Et|0,n)},t.fromBigInt=function(e,n){return t.fromString(e.toString(),n)},t.fromString=function(e,n,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n?(r=n,n=!1):n=!!n,(r=r||10)<2||36<r)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return t.fromString(e.substring(1),n,r).neg();for(var i=t.fromNumber(Math.pow(r,8)),u=t.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),f=parseInt(e.substring(s,s+a),r);if(a<8){var c=t.fromNumber(Math.pow(r,a));u=u.mul(c).add(t.fromNumber(f))}else u=(u=u.mul(i)).add(t.fromNumber(f))}return u.unsigned=n,u},t.fromBytes=function(e,n,r){return r?t.fromBytesLE(e,n):t.fromBytesBE(e,n)},t.fromBytesLE=function(e,n){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},t.fromBytesBE=function(e,n){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)},t.isLong=function(t){return at(t)&&!0===t.__isLong__},t.fromValue=function(e,n){return"number"==typeof e?t.fromNumber(e,n):"string"==typeof e?t.fromString(e,n):t.fromBits(e.low,e.high,"boolean"==typeof n?n:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,u=e.high>>>16,s=65535&e.high,a=e.low>>>16,f=0,c=0,l=0,h=0;return l+=(h+=i+(65535&e.low))>>>16,h&=65535,c+=(l+=o+a)>>>16,l&=65535,f+=(c+=r+s)>>>16,c&=65535,f+=n+u,f&=65535,t.fromBits(l<<16|h,f<<16|c,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(t){return this.compare(t)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(_t){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var n=(this.unsigned?_t.div_u:_t.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(n,_t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var r,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1)).eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(r)/Math.LN2),s=u<=48?1:Math.pow(2,u-48),a=t.fromNumber(r),f=a.mul(e);f.isNegative()||f.gt(o);)r-=s,f=(a=t.fromNumber(r,this.unsigned)).mul(e);a.isZero()&&(a=t.ONE),i=i.add(a),o=o.sub(f)}return i},t.prototype.div=function(t){return this.divide(t)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},t.prototype.eq=function(t){return this.equals(t)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e,n=0!==this.high?this.high:this.low;for(e=31;e>0&&0==(n&1<<e);e--);return 0!==this.high?e+33:e+1},t.prototype.greaterThan=function(t){return this.comp(t)>0},t.prototype.gt=function(t){return this.greaterThan(t)},t.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},t.prototype.gte=function(t){return this.greaterThanOrEqual(t)},t.prototype.ge=function(t){return this.greaterThanOrEqual(t)},t.prototype.isEven=function(){return 0==(1&this.low)},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return 1==(1&this.low)},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.lessThan=function(t){return this.comp(t)<0},t.prototype.lt=function(t){return this.lessThan(t)},t.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},t.prototype.lte=function(t){return this.lessThanOrEqual(t)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),_t){var n=(this.unsigned?_t.rem_u:_t.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(n,_t.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(t){return this.modulo(t)},t.prototype.rem=function(t){return this.modulo(t)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),_t){var n=_t.mul(this.low,this.high,e.low,e.high);return t.fromBits(n,_t.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,u=65535&this.low,s=e.high>>>16,a=65535&e.high,f=e.low>>>16,c=65535&e.low,l=0,h=0,p=0,d=0;return p+=(d+=u*c)>>>16,d&=65535,h+=(p+=i*c)>>>16,p&=65535,h+=(p+=u*f)>>>16,p&=65535,l+=(h+=o*c)>>>16,h&=65535,l+=(h+=i*f)>>>16,h&=65535,l+=(h+=u*a)>>>16,h&=65535,l+=r*c+o*f+i*a+u*s,l&=65535,t.fromBits(p<<16|d,l<<16|h,this.unsigned)},t.prototype.mul=function(t){return this.multiply(t)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.neq=function(t){return this.notEquals(t)},t.prototype.ne=function(t){return this.notEquals(t)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(t){return this.shiftLeft(t)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(t){return this.shiftRight(t)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var n=this.high;if(e<32){var r=this.low;return t.fromBits(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},t.prototype.shru=function(t){return this.shiftRightUnsigned(t)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(t){return this.subtract(t)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Et+(this.low>>>0):this.high*Et+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var n=t.fromNumber(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=t.fromNumber(Math.pow(e,6),this.unsigned),u=this,s="";;){var a=u.div(i),f=(u.sub(a.mul(i)).toInt()>>>0).toString(e);if((u=a).isZero())return f+s;for(;f.length<6;)f="0"+f;s=""+f+s}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(t){return this.lessThanOrEqual(t)},t.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,n){var r=t.fromString(e.$numberLong);return n&&n.relaxed?r.toNumber():r},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(16777216),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(Tt.prototype,"__isLong__",{value:!0}),Object.defineProperty(Tt.prototype,"_bsontype",{value:"Long"});var jt=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,At=/^(\+|-)?(Infinity|inf)$/i,It=/^(\+|-)?NaN$/i,Lt=6111,Bt=-6176,Pt=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ut=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),kt=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Rt=/^([-+])?(\d+)?$/;function qt(t){return!isNaN(parseInt(t,10))}function $t(t){var e=Tt.fromNumber(1e9),n=Tt.fromNumber(0);if(!(t.parts[0]||t.parts[1]||t.parts[2]||t.parts[3]))return{quotient:t,rem:n};for(var r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new Tt(t.parts[r],0)),t.parts[r]=n.div(e).low,n=n.modulo(e);return{quotient:t,rem:n}}function Mt(t,e){throw new nt('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var Ct=function(){function t(e){if(!(this instanceof t))return new t(e);if("string"==typeof e)this.bytes=t.fromString(e).bytes;else{if(!st(e))throw new nt("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new nt("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}return t.fromString=function(e){var n,r=!1,o=!1,i=!1,u=0,s=0,a=0,f=0,c=0,l=[0],h=0,p=0,d=0,y=0,g=0,m=0,v=new Tt(0,0),b=new Tt(0,0),w=0;if(e.length>=7e3)throw new nt(e+" not a valid Decimal128 string");var _=e.match(jt),E=e.match(At),O=e.match(It);if(!_&&!E&&!O||0===e.length)throw new nt(e+" not a valid Decimal128 string");if(_){var x=_[2],S=_[4],N=_[5],T=_[6];S&&void 0===T&&Mt(e,"missing exponent power"),S&&void 0===x&&Mt(e,"missing exponent base"),void 0===S&&(N||T)&&Mt(e,"missing e before exponent")}if("+"!==e[w]&&"-"!==e[w]||(r="-"===e[w++]),!qt(e[w])&&"."!==e[w]){if("i"===e[w]||"I"===e[w])return new t(K.from(r?Ut:kt));if("N"===e[w])return new t(K.from(Pt))}for(;qt(e[w])||"."===e[w];)"."!==e[w]?(h<34&&("0"!==e[w]||i)&&(i||(c=s),i=!0,l[p++]=parseInt(e[w],10),h+=1),i&&(a+=1),o&&(f+=1),s+=1,w+=1):(o&&Mt(e,"contains multiple periods"),o=!0,w+=1);if(o&&!s)throw new nt(e+" not a valid Decimal128 string");if("e"===e[w]||"E"===e[w]){var j=e.substr(++w).match(Rt);if(!j||!j[2])return new t(K.from(Pt));g=parseInt(j[0],10),w+=j[0].length}if(e[w])return new t(K.from(Pt));if(d=0,h){if(y=h-1,1!==(u=a))for(;0===l[c+u-1];)u-=1}else d=0,y=0,l[0]=0,a=1,h=1,u=0;for(g<=f&&f-g>16384?g=Bt:g-=f;g>Lt;){if((y+=1)-d>34){if(l.join("").match(/^0+$/)){g=Lt;break}Mt(e,"overflow")}g-=1}for(;g<Bt||h<a;){if(0===y&&u<h){g=Bt,u=0;break}if(h<a?a-=1:y-=1,g<Lt)g+=1;else{if(l.join("").match(/^0+$/)){g=Lt;break}Mt(e,"overflow")}}if(y-d+1<u){var A=s;o&&(c+=1,A+=1),r&&(c+=1,A+=1);var I=parseInt(e[c+y+1],10),L=0;if(I>=5&&(L=1,5===I))for(L=l[y]%2==1?1:0,m=c+y+2;m<A;m++)if(parseInt(e[m],10)){L=1;break}if(L)for(var B=y;B>=0;B--)if(++l[B]>9&&(l[B]=0,0===B)){if(!(g<Lt))return new t(K.from(r?Ut:kt));g+=1,l[B]=1}}if(v=Tt.fromNumber(0),b=Tt.fromNumber(0),0===u)v=Tt.fromNumber(0),b=Tt.fromNumber(0);else if(y-d<17){B=d;for(b=Tt.fromNumber(l[B++]),v=new Tt(0,0);B<=y;B++)b=(b=b.multiply(Tt.fromNumber(10))).add(Tt.fromNumber(l[B]))}else{B=d;for(v=Tt.fromNumber(l[B++]);B<=y-17;B++)v=(v=v.multiply(Tt.fromNumber(10))).add(Tt.fromNumber(l[B]));for(b=Tt.fromNumber(l[B++]);B<=y;B++)b=(b=b.multiply(Tt.fromNumber(10))).add(Tt.fromNumber(l[B]))}var P,U,k,R,q=function(t,e){if(!t&&!e)return{high:Tt.fromNumber(0),low:Tt.fromNumber(0)};var n=t.shiftRightUnsigned(32),r=new Tt(t.getLowBits(),0),o=e.shiftRightUnsigned(32),i=new Tt(e.getLowBits(),0),u=n.multiply(o),s=n.multiply(i),a=r.multiply(o),f=r.multiply(i);return u=u.add(s.shiftRightUnsigned(32)),s=new Tt(s.getLowBits(),0).add(a).add(f.shiftRightUnsigned(32)),{high:u=u.add(s.shiftRightUnsigned(32)),low:f=s.shiftLeft(32).add(new Tt(f.getLowBits(),0))}}(v,Tt.fromString("100000000000000000"));q.low=q.low.add(b),P=q.low,U=b,k=P.high>>>0,R=U.high>>>0,(k<R||k===R&&P.low>>>0<U.low>>>0)&&(q.high=q.high.add(Tt.fromNumber(1))),n=g+6176;var $={low:Tt.fromNumber(0),high:Tt.fromNumber(0)};q.high.shiftRightUnsigned(49).and(Tt.fromNumber(1)).equals(Tt.fromNumber(1))?($.high=$.high.or(Tt.fromNumber(3).shiftLeft(61)),$.high=$.high.or(Tt.fromNumber(n).and(Tt.fromNumber(16383).shiftLeft(47))),$.high=$.high.or(q.high.and(Tt.fromNumber(0x7fffffffffff)))):($.high=$.high.or(Tt.fromNumber(16383&n).shiftLeft(49)),$.high=$.high.or(q.high.and(Tt.fromNumber(562949953421311)))),$.low=q.low,r&&($.high=$.high.or(Tt.fromString("9223372036854775808")));var M=K.alloc(16);return w=0,M[w++]=255&$.low.low,M[w++]=$.low.low>>8&255,M[w++]=$.low.low>>16&255,M[w++]=$.low.low>>24&255,M[w++]=255&$.low.high,M[w++]=$.low.high>>8&255,M[w++]=$.low.high>>16&255,M[w++]=$.low.high>>24&255,M[w++]=255&$.high.low,M[w++]=$.high.low>>8&255,M[w++]=$.high.low>>16&255,M[w++]=$.high.low>>24&255,M[w++]=255&$.high.high,M[w++]=$.high.high>>8&255,M[w++]=$.high.high>>16&255,M[w++]=$.high.high>>24&255,new t(M)},t.prototype.toString=function(){for(var t,e=0,n=new Array(36),r=0;r<n.length;r++)n[r]=0;var o,i,u,s=0,a=!1,f={parts:[0,0,0,0]},c=[];s=0;var l=this.bytes,h=l[s++]|l[s++]<<8|l[s++]<<16|l[s++]<<24,p=l[s++]|l[s++]<<8|l[s++]<<16|l[s++]<<24,d=l[s++]|l[s++]<<8|l[s++]<<16|l[s++]<<24,y=l[s++]|l[s++]<<8|l[s++]<<16|l[s++]<<24;s=0,{low:new Tt(h,p),high:new Tt(d,y)}.high.lessThan(Tt.ZERO)&&c.push("-");var g=y>>26&31;if(g>>3==3){if(30===g)return c.join("")+"Infinity";if(31===g)return"NaN";t=y>>15&16383,o=8+(y>>14&1)}else o=y>>14&7,t=y>>17&16383;var m=t-6176;if(f.parts[0]=(16383&y)+((15&o)<<14),f.parts[1]=d,f.parts[2]=p,f.parts[3]=h,0===f.parts[0]&&0===f.parts[1]&&0===f.parts[2]&&0===f.parts[3])a=!0;else for(u=3;u>=0;u--){var v=0,b=$t(f);if(f=b.quotient,v=b.rem.low)for(i=8;i>=0;i--)n[9*u+i]=v%10,v=Math.floor(v/10)}if(a)e=1,n[s]=0;else for(e=36;!n[s];)e-=1,s+=1;var w=e-1+m;if(w>=34||w<=-7||m>0){if(e>34)return c.push("".concat(0)),m>0?c.push("E+".concat(m)):m<0&&c.push("E".concat(m)),c.join("");c.push("".concat(n[s++])),(e-=1)&&c.push(".");for(r=0;r<e;r++)c.push("".concat(n[s++]));c.push("E"),w>0?c.push("+".concat(w)):c.push("".concat(w))}else if(m>=0)for(r=0;r<e;r++)c.push("".concat(n[s++]));else{var _=e+m;if(_>0)for(r=0;r<_;r++)c.push("".concat(n[s++]));else c.push("0");for(c.push(".");_++<0;)c.push("0");for(r=0;r<e-Math.max(_-1,0);r++)c.push("".concat(n[s++]))}return c.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(Ct.prototype,"_bsontype",{value:"Decimal128"});var Dt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},t.fromExtendedJSON=function(e,n){var r=parseFloat(e.$numberDouble);return n&&n.relaxed?r:new t(r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},t}();Object.defineProperty(Dt.prototype,"_bsontype",{value:"Double"});var Ft=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=0|+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,n){return n&&n.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty(Ft.prototype,"_bsontype",{value:"Int32"});var Jt=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(Jt.prototype,"_bsontype",{value:"MaxKey"});var Ht=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(Ht.prototype,"_bsontype",{value:"MinKey"});var Gt=new RegExp("^[0-9a-fA-F]{24}$"),Vt=null,Zt=Symbol("id"),Yt=function(){function t(e){if(!(this instanceof t))return new t(e);var n;if("object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new nt("Argument passed in must have an id that is of type string or Buffer");n="toHexString"in e&&"function"==typeof e.toHexString?K.from(e.toHexString(),"hex"):e.id}else n=e;if(null==n||"number"==typeof n)this[Zt]=t.generate("number"==typeof n?n:void 0);else if(ArrayBuffer.isView(n)&&12===n.byteLength)this[Zt]=n instanceof K?n:ct(n);else{if("string"!=typeof n)throw new nt("Argument passed in does not match the accepted types");if(12===n.length){var r=K.from(n);if(12!==r.byteLength)throw new nt("Argument passed in must be a string of 12 bytes");this[Zt]=r}else{if(24!==n.length||!Gt.test(n))throw new nt("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[Zt]=K.from(n,"hex")}}t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[Zt]},set:function(e){this[Zt]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));var n=t.getInc(),r=K.alloc(12);return r.writeUInt32BE(e,0),null===Vt&&(Vt=ut(5)),r[4]=Vt[0],r[5]=Vt[1],r[6]=Vt[2],r[7]=Vt[3],r[8]=Vt[4],r[11]=255&n,r[10]=n>>8&255,r[9]=n>>16&255,r},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(null==e)return!1;if(e instanceof t)return this[Zt][11]===e[Zt][11]&&this[Zt].equals(e[Zt]);if("string"==typeof e&&t.isValid(e)&&12===e.length&&st(this.id))return e===K.prototype.toString.call(this.id,"latin1");if("string"==typeof e&&t.isValid(e)&&24===e.length)return e.toLowerCase()===this.toHexString();if("string"==typeof e&&t.isValid(e)&&12===e.length)return K.from(e).equals(this.id);if("object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString){var n=e.toHexString(),r=this.toHexString().toLowerCase();return"string"==typeof n&&n.toLowerCase()===r}return!1},t.prototype.getTimestamp=function(){var t=new Date,e=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(e)),t},t.createPk=function(){return new t},t.createFromTime=function(e){var n=K.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n.writeUInt32BE(e,0),new t(n)},t.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new nt("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(K.from(e,"hex"))},t.isValid=function(e){if(null==e)return!1;try{return new t(e),!0}catch(n){return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(16777215*Math.random()),t}();Object.defineProperty(Yt.prototype,"generate",{value:ft((function(t){return Yt.generate(t)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(Yt.prototype,"getInc",{value:ft((function(){return Yt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Yt.prototype,"get_inc",{value:ft((function(){return Yt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Yt,"get_inc",{value:ft((function(){return Yt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Yt.prototype,"_bsontype",{value:"ObjectID"});var zt=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(this.pattern=e,this.options=(null!=n?n:"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new et("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(-1!==this.options.indexOf("\0"))throw new et("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new et("The regular expression option [".concat(this.options[r],"] is not supported"))}return t.parseOptions=function(t){return t?t.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e){if("string"==typeof e.$regex)return new t(e.$regex,t.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new nt("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(zt.prototype,"_bsontype",{value:"BSONRegExp"});var Wt=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(Wt.prototype,"_bsontype",{value:"Symbol"});var Qt=function(t){function e(n,r){var o=this;return o instanceof e?(o=Tt.isLong(n)?t.call(this,n.low,n.high,!0)||this:at(n)&&void 0!==n.t&&void 0!==n.i?t.call(this,n.i,n.t,!0)||this:t.call(this,n,r,!0)||this,Object.defineProperty(o,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),o):new e(n,r)}return tt(e,t),e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(t){return new e(Tt.fromInt(t,!0))},e.fromNumber=function(t){return new e(Tt.fromNumber(t,!0))},e.fromBits=function(t,n){return new e(t,n)},e.fromString=function(t,n){return new e(Tt.fromString(t,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(t){return new e(t.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=Tt.MAX_UNSIGNED_VALUE,e}(Tt);var Kt=2147483647,Xt=-2147483648,te=0x8000000000000000,ee=-0x8000000000000000,ne={$oid:Yt,$binary:mt,$uuid:mt,$symbol:Wt,$numberInt:Ft,$numberDecimal:Ct,$numberDouble:Dt,$numberLong:Tt,$minKey:Ht,$maxKey:Jt,$regex:zt,$regularExpression:zt,$timestamp:Qt};function re(t,e){if(void 0===e&&(e={}),"number"==typeof t){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=Xt&&t<=Kt)return new Ft(t);if(t>=ee&&t<=te)return Tt.fromNumber(t)}return new Dt(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;for(var n=Object.keys(t).filter((function(e){return e.startsWith("$")&&null!=t[e]})),r=0;r<n.length;r++){var o=ne[n[r]];if(o)return o.fromExtendedJSON(t,e)}if(null!=t.$date){var i=t.$date,u=new Date;return e.legacy?"number"==typeof i?u.setTime(i):"string"==typeof i&&u.setTime(Date.parse(i)):"string"==typeof i?u.setTime(Date.parse(i)):Tt.isLong(i)?u.setTime(i.toNumber()):"number"==typeof i&&e.relaxed&&u.setTime(i),u}if(null!=t.$code){var s=Object.assign({},t);return t.$scope&&(s.$scope=re(t.$scope)),bt.fromExtendedJSON(t)}if(function(t){return at(t)&&null!=t.$id&&"string"==typeof t.$ref&&(null==t.$db||"string"==typeof t.$db)}(t)||t.$dbPointer){var a=t.$ref?t:t.$dbPointer;if(a instanceof wt)return a;var f=Object.keys(a).filter((function(t){return t.startsWith("$")})),c=!0;if(f.forEach((function(t){-1===["$ref","$id","$db"].indexOf(t)&&(c=!1)})),c)return wt.fromExtendedJSON(a)}return t}function oe(t){var e=t.toISOString();return 0!==t.getUTCMilliseconds()?e:e.slice(0,-5)+"Z"}function ie(t,e){if(("object"==typeof t||"function"==typeof t)&&null!==t){var n=e.seenObjects.findIndex((function(e){return e.obj===t}));if(-1!==n){var r=e.seenObjects.map((function(t){return t.propertyName})),o=r.slice(0,n).map((function(t){return"".concat(t," -> ")})).join(""),i=r[n],u=" -> "+r.slice(n+1,r.length-1).map((function(t){return"".concat(t," -> ")})).join(""),s=r[r.length-1],a=" ".repeat(o.length+i.length/2),f="-".repeat(u.length+(i.length+s.length)/2-1);throw new nt("Converting circular structure to EJSON:\n"+"    ".concat(o).concat(i).concat(u).concat(s,"\n")+"    ".concat(a,"\\").concat(f,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return function(t,e){return t.map((function(t,n){e.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return ie(t,e)}finally{e.seenObjects.pop()}}))}(t,e);if(void 0===t)return null;if(t instanceof Date||at(h=t)&&"[object Date]"===Object.prototype.toString.call(h)){var c=t.getTime(),l=c>-1&&c<2534023188e5;return e.legacy?e.relaxed&&l?{$date:t.getTime()}:{$date:oe(t)}:e.relaxed&&l?{$date:oe(t)}:{$date:{$numberLong:t.getTime().toString()}}}var h;if(!("number"!=typeof t||e.relaxed&&isFinite(t))){if(Math.floor(t)===t){var p=t>=ee&&t<=te;if(t>=Xt&&t<=Kt)return{$numberInt:t.toString()};if(p)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)){var d=t.flags;if(void 0===d){var y=t.toString().match(/[gimuy]*$/);y&&(d=y[0])}return new zt(t.source,d).toExtendedJSON(e)}return null!=t&&"object"==typeof t?function(t,e){if(null==t||"object"!=typeof t)throw new et("not an object instance");var n=t._bsontype;if(void 0===n){var r={};for(var o in t){e.seenObjects.push({propertyName:o,obj:null});try{var i=ie(t[o],e);"__proto__"===o?Object.defineProperty(r,o,{value:i,writable:!0,enumerable:!0,configurable:!0}):r[o]=i}finally{e.seenObjects.pop()}}return r}if(function(t){return at(t)&&Reflect.has(t,"_bsontype")&&"string"==typeof t._bsontype}(t)){var u=t;if("function"!=typeof u.toExtendedJSON){var s=se[t._bsontype];if(!s)throw new nt("Unrecognized or invalid _bsontype: "+t._bsontype);u=s(u)}return"Code"===n&&u.scope?u=new bt(u.code,ie(u.scope,e)):"DBRef"===n&&u.oid&&(u=new wt(ie(u.collection,e),ie(u.oid,e),ie(u.db,e),ie(u.fields,e))),u.toExtendedJSON(e)}throw new et("_bsontype must be a string, but was: "+typeof n)}(t,e):t}var ue,se={Binary:function(t){return new mt(t.value(),t.sub_type)},Code:function(t){return new bt(t.code,t.scope)},DBRef:function(t){return new wt(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new Ct(t.bytes)},Double:function(t){return new Dt(t.value)},Int32:function(t){return new Ft(t.value)},Long:function(t){return Tt.fromBits(null!=t.low?t.low:t.low_,null!=t.low?t.high:t.high_,null!=t.low?t.unsigned:t.unsigned_)},MaxKey:function(){return new Jt},MinKey:function(){return new Ht},ObjectID:function(t){return new Yt(t)},ObjectId:function(t){return new Yt(t)},BSONRegExp:function(t){return new zt(t.pattern,t.options)},Symbol:function(t){return new Wt(t.value)},Timestamp:function(t){return Qt.fromBits(t.low,t.high)}};!function(t){function e(t,e){var n=Object.assign({},{relaxed:!0,legacy:!1},e);return"boolean"==typeof n.relaxed&&(n.strict=!n.relaxed),"boolean"==typeof n.strict&&(n.relaxed=!n.strict),JSON.parse(t,(function(t,e){if(-1!==t.indexOf("\0"))throw new et("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(t)));return re(e,n)}))}function n(t,e,n,r){null!=n&&"object"==typeof n&&(r=n,n=0),null==e||"object"!=typeof e||Array.isArray(e)||(r=e,e=void 0,n=0);var o=ie(t,Object.assign({relaxed:!0,legacy:!1},r,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(o,e,n)}t.parse=e,t.stringify=n,t.serialize=function(t,e){return e=e||{},JSON.parse(n(t,e))},t.deserialize=function(t,n){return n=n||{},e(JSON.stringify(t),n)}}(ue||(ue={}));var ae=ot();ae.Map?ae.Map:function(){function t(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var e=0;e<t.length;e++)if(null!=t[e]){var n=t[e],r=n[0],o=n[1];this._keys.push(r),this._values[r]={v:o,i:this._keys.length-1}}}t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(t){var e=this._values[t];return null!=e&&(delete this._values[t],this._keys.splice(e.i,1),!0)},t.prototype.entries=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?[n,t._values[n].v]:void 0,done:void 0===n}}}},t.prototype.forEach=function(t,e){e=e||this;for(var n=0;n<this._keys.length;n++){var r=this._keys[n];t.call(e,this._values[r].v,r,e)}},t.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},t.prototype.has=function(t){return null!=this._values[t]},t.prototype.keys=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?n:void 0,done:void 0===n}}}},t.prototype.set=function(t,e){return this._values[t]?(this._values[t].v=e,this):(this._keys.push(t),this._values[t]={v:e,i:this._keys.length-1},this)},t.prototype.values=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?t._values[n].v:void 0,done:void 0===n}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0})}(),Tt.fromNumber(yt),Tt.fromNumber(gt);var fe=new Uint8Array(8);new DataView(fe.buffer,fe.byteOffset,fe.byteLength);K.alloc(17825792);var ce,le=globalThis&&globalThis.__extends||(ce=function(t,e){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ce(t,e)},function(t,e){function n(){this.constructor=t}ce(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),he=[],pe={},de=function(t){function e(e,n){if(n!==pe)throw new TypeError("InternalSymbol cannot be constructed with new operator");return t.call(this,e)||this}return le(e,t),e.for=function(t){for(var n=0,r=he.length;n<r;n++)if(he[n].target===t)return he[n].instance;var o=new e(t,pe);return he.push({target:t,instance:o}),o},e}((function(t){Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:t}})})),ye=de.for("UNSET_FIELD_NAME"),ge=de.for("UPDATE_COMMAND"),me=de.for("QUERY_COMMAND"),ve=de.for("LOGIC_COMMAND"),be=de.for("GEO_POINT"),we=de.for("SYMBOL_GEO_LINE_STRING"),_e=de.for("SYMBOL_GEO_POLYGON"),Ee=de.for("SYMBOL_GEO_MULTI_POINT"),Oe=de.for("SYMBOL_GEO_MULTI_LINE_STRING"),xe=de.for("SYMBOL_GEO_MULTI_POLYGON"),Se=de.for("SERVER_DATE"),Ne=de.for("REGEXP"),Te=function(){function t(t){var e=(void 0===t?{}:t).offset,n=void 0===e?0:e;this.offset=n}return Object.defineProperty(t.prototype,"_internalType",{get:function(){return Se},enumerable:!0,configurable:!0}),t.prototype.parse=function(){return{$date:{offset:this.offset}}},t}();function je(t){return new Te(t)}var Ae,Ie=function(){function t(){}return t.formatResDocumentData=function(e){return e.map((function(e){return t.formatField(e)}))},t.formatField=function(e){var n=Object.keys(e),r={};return Array.isArray(e)&&(r=[]),n.forEach((function(n){var o,i=e[n];switch(t.whichType(i)){case S:o=new De(i.coordinates[0],i.coordinates[1]);break;case N:o=new Fe(i.coordinates.map((function(t){return new De(t[0],t[1])})));break;case T:o=new Je(i.coordinates.map((function(t){return new Fe(t.map((function(t){var e=t[0],n=t[1];return new De(e,n)})))})));break;case j:o=new He(i.coordinates.map((function(t){return new De(t[0],t[1])})));break;case A:o=new Ge(i.coordinates.map((function(t){return new Fe(t.map((function(t){var e=t[0],n=t[1];return new De(e,n)})))})));break;case I:o=new Ve(i.coordinates.map((function(t){return new Je(t.map((function(t){return new Fe(t.map((function(t){var e=t[0],n=t[1];return new De(e,n)})))})))})));break;case L:o=new Date(1e3*i.$timestamp);break;case O:case x:o=t.formatField(i);break;case B:o=new Date(i.$date);break;case U:case k:o=ue.deserialize(i);break;default:o=i}Array.isArray(r)?r.push(o):r[n]=o})),r},t.whichType=function(t){var e=Object.prototype.toString.call(t).slice(8,-1);if(e===L)return P;if(e===O){if(t instanceof De)return S;if(t instanceof Date)return L;if(t instanceof Te)return B;if(t instanceof Yt)return U;if(t instanceof mt)return k;t.$timestamp?e=L:t.$date?e=B:De.validate(t)?e=S:Fe.validate(t)?e=N:Je.validate(t)?e=T:He.validate(t)?e=j:Ge.validate(t)?e=A:Ve.validate(t)?e=I:t.$oid?e=U:t.$binary&&(e=k)}return e},t}(),Le=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},Be=function(t){return"object"===Le(t)},Pe=function(t){return"number"===Le(t)},Ue=function(t){return Array.isArray(t)},ke=function(t){return"date"===Le(t)},Re=function(t){return"regexp"===Le(t)},qe=function(t){return t&&t._internalType instanceof de},$e=function(t){return"ObjectID"===(null==t?void 0:t._bsontype)},Me=function(t){return"Binary"===(null==t?void 0:t._bsontype)},Ce=function(){function t(){}return t.isValidAggregation=function(t){if(1!==Object.keys(t).length)throw new Error("aggregation stage must have one key");return!0},t.isGeopoint=function(t,e){if(Ie.whichType(e)!==E)throw new Error("Geo Point must be number type");var n=Math.abs(e);if("latitude"===t&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if("longitude"===t&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0},t.isInteger=function(t,e){if(!Number.isInteger(e))throw new Error(t+b.IntegerError);return!0},t.isProjection=function(t,e){if("object"!==Le(e))throw new Error(t+" projection must be an object");for(var n in e){var r=e[n];if("number"===Le(r)){if(0!==r&&1!==r)throw new Error("if the value in projection is of number, it must be 0 or 1")}else if("object"!==Le(r))throw new Error("invalid projection")}return!0},t.isOrder=function(t,e){if("object"!==Le(e))throw new Error(t+" order must be an object");for(var n in e){var r=e[n];if(1!==r&&-1!==r)throw new Error("order value must be 1 or -1")}return!0},t.isFieldOrder=function(t){if(-1===R.indexOf(t))throw new Error(b.DirectionError);return!0},t.isFieldPath=function(t){if(!/^[a-zA-Z0-9-_\.]/.test(t))throw new Error;return!0},t.isOperator=function(t){if(-1===q.indexOf(t))throw new Error(b.OpStrError);return!0},t.isCollName=function(t){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(t))throw new Error(b.CollNameError);return!0},t}(),De=function(){function t(t,e){Ce.isGeopoint("longitude",t),Ce.isGeopoint("latitude",e),this.longitude=t,this.latitude=e}return t.prototype.parse=function(t){var e;return(e={})[t]={type:"Point",coordinates:[this.longitude,this.latitude]},e},t.prototype.toJSON=function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}},t.prototype.toReadableString=function(){return"["+this.longitude+","+this.latitude+"]"},t.validate=function(t){return"Point"===t.type&&Ue(t.coordinates)&&Ce.isGeopoint("longitude",t.coordinates[0])&&Ce.isGeopoint("latitude",t.coordinates[1])},Object.defineProperty(t.prototype,"_internalType",{get:function(){return be},enumerable:!0,configurable:!0}),t}(),Fe=function(){function t(t){if(!Ue(t))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t);if(t.length<2)throw new Error('"points" must contain 2 points at least');t.forEach((function(t){if(!(t instanceof De))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t+"[]")})),this.points=t}return t.prototype.parse=function(t){var e;return(e={})[t]={type:"LineString",coordinates:this.points.map((function(t){return t.toJSON().coordinates}))},e},t.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map((function(t){return t.toJSON().coordinates}))}},t.validate=function(t){if("LineString"!==t.type||!Ue(t.coordinates))return!1;for(var e=0,n=t.coordinates;e<n.length;e++){var r=n[e];if(!Pe(r[0])||!Pe(r[1]))return!1}return!0},t.isClosed=function(t){var e=t.points[0],n=t.points[t.points.length-1];if(e.latitude===n.latitude&&e.longitude===n.longitude)return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return we},enumerable:!0,configurable:!0}),t}(),Je=function(){function t(t){if(!Ue(t))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t);if(0===t.length)throw new Error("Polygon must contain 1 linestring at least");t.forEach((function(t){if(!(t instanceof Fe))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t+"[]");if(!Fe.isClosed(t))throw new Error("LineString "+t.points.map((function(t){return t.toReadableString()}))+" is not a closed cycle")})),this.lines=t}return t.prototype.parse=function(t){var e;return(e={})[t]={type:"Polygon",coordinates:this.lines.map((function(t){return t.points.map((function(t){return[t.longitude,t.latitude]}))}))},e},t.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map((function(t){return t.points.map((function(t){return[t.longitude,t.latitude]}))}))}},t.validate=function(t){if("Polygon"!==t.type||!Ue(t.coordinates))return!1;for(var e=0,n=t.coordinates;e<n.length;e++){var r=n[e];if(!this.isCloseLineString(r))return!1;for(var o=0,i=r;o<i.length;o++){var u=i[o];if(!Pe(u[0])||!Pe(u[1]))return!1}}return!0},t.isCloseLineString=function(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]},Object.defineProperty(t.prototype,"_internalType",{get:function(){return xe},enumerable:!0,configurable:!0}),t}(),He=function(){function t(t){if(!Ue(t))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t);if(0===t.length)throw new Error('"points" must contain 1 point at least');t.forEach((function(t){if(!(t instanceof De))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t+"[]")})),this.points=t}return t.prototype.parse=function(t){var e;return(e={})[t]={type:"MultiPoint",coordinates:this.points.map((function(t){return t.toJSON().coordinates}))},e},t.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map((function(t){return t.toJSON().coordinates}))}},t.validate=function(t){if("MultiPoint"!==t.type||!Ue(t.coordinates))return!1;for(var e=0,n=t.coordinates;e<n.length;e++){var r=n[e];if(!Pe(r[0])||!Pe(r[1]))return!1}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Ee},enumerable:!0,configurable:!0}),t}(),Ge=function(){function t(t){if(!Ue(t))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t);if(0===t.length)throw new Error("Polygon must contain 1 linestring at least");t.forEach((function(t){if(!(t instanceof Fe))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t+"[]")})),this.lines=t}return t.prototype.parse=function(t){var e;return(e={})[t]={type:"MultiLineString",coordinates:this.lines.map((function(t){return t.points.map((function(t){return[t.longitude,t.latitude]}))}))},e},t.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map((function(t){return t.points.map((function(t){return[t.longitude,t.latitude]}))}))}},t.validate=function(t){if("MultiLineString"!==t.type||!Ue(t.coordinates))return!1;for(var e=0,n=t.coordinates;e<n.length;e++)for(var r=0,o=n[e];r<o.length;r++){var i=o[r];if(!Pe(i[0])||!Pe(i[1]))return!1}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Oe},enumerable:!0,configurable:!0}),t}(),Ve=function(){function t(t){if(!Ue(t))throw new TypeError('"polygons" must be of type Polygon[]. Received type '+typeof t);if(0===t.length)throw new Error("MultiPolygon must contain 1 polygon at least");for(var e=0,n=t;e<n.length;e++){var r=n[e];if(!(r instanceof Je))throw new TypeError('"polygon" must be of type Polygon[]. Received type '+typeof r+"[]")}this.polygons=t}return t.prototype.parse=function(t){var e;return(e={})[t]={type:"MultiPolygon",coordinates:this.polygons.map((function(t){return t.lines.map((function(t){return t.points.map((function(t){return[t.longitude,t.latitude]}))}))}))},e},t.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map((function(t){return t.lines.map((function(t){return t.points.map((function(t){return[t.longitude,t.latitude]}))}))}))}},t.validate=function(t){if("MultiPolygon"!==t.type||!Ue(t.coordinates))return!1;for(var e=0,n=t.coordinates;e<n.length;e++)for(var r=0,o=n[e];r<o.length;r++)for(var i=0,u=o[r];i<u.length;i++){var s=u[i];if(!Pe(s[0])||!Pe(s[1]))return!1}return!0},Object.defineProperty(t.prototype,"_internalType",{get:function(){return _e},enumerable:!0,configurable:!0}),t}(),Ze=Object.freeze(Object.defineProperty({__proto__:null,LineString:Fe,MultiLineString:Ge,MultiPoint:He,MultiPolygon:Ve,Point:De,Polygon:Je},Symbol.toStringTag,{value:"Module"})),Ye=globalThis&&globalThis.__assign||function(){return Ye=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ye.apply(this,arguments)},ze=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r};function We(t){return Qe(t,[t])}function Qe(t,e){if(!qe(t)){if(ke(t)||Re(t)||$e(t)||Me(t))return ue.serialize(t);if(Ue(t))return t.map((function(t){if(e.indexOf(t)>-1)throw new Error("Cannot convert circular structure to JSON");return Qe(t,ze(e,[t]))}));if(Be(t)){var n=Ye({},t);for(var r in n){if(e.indexOf(n[r])>-1)throw new Error("Cannot convert circular structure to JSON");n[r]=Qe(n[r],ze(e,[n[r]]))}return n}return t}switch(t._internalType){case be:return t.toJSON();case Se:case Ne:return t.parse();default:return t.toJSON?t.toJSON():t}}!function(t){t.SET="set",t.REMOVE="remove",t.INC="inc",t.MUL="mul",t.PUSH="push",t.PULL="pull",t.PULL_ALL="pullAll",t.POP="pop",t.SHIFT="shift",t.UNSHIFT="unshift",t.ADD_TO_SET="addToSet",t.BIT="bit",t.RENAME="rename",t.MAX="max",t.MIN="min"}(Ae||(Ae={}));var Ke,Xe=function(){function t(t,e,n){this._internalType=ge,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=e,this.fieldName=n||ye}return t.prototype._setFieldName=function(e){return new t(this.operator,this.operands,e)},t}();function tn(t){return t&&t instanceof Xe&&t._internalType===ge}!function(t){t.AND="and",t.OR="or",t.NOT="not",t.NOR="nor"}(Ke||(Ke={}));var en=function(){function t(t,e,n){if(this._internalType=ve,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=e,this.fieldName=n||ye,this.fieldName!==ye)if(Array.isArray(e)){e=e.slice(),this.operands=e;for(var r=0,o=e.length;r<o;r++){(nn(i=e[r])||an(i))&&(e[r]=i._setFieldName(this.fieldName))}}else{var i;(nn(i=e)||an(i))&&(e=i._setFieldName(this.fieldName))}}return t.prototype._setFieldName=function(e){var n=this.operands.map((function(n){return n instanceof t?n._setFieldName(e):n}));return new t(this.operator,n,e)},t.prototype.and=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return e.unshift(this),new t(Ke.AND,e,this.fieldName)},t.prototype.or=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return e.unshift(this),new t(Ke.OR,e,this.fieldName)},t}();function nn(t){return t&&t instanceof en&&t._internalType===ve}var rn,on,un=globalThis&&globalThis.__extends||(rn=function(t,e){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},rn(t,e)},function(t,e){function n(){this.constructor=t}rn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t.EQ="eq",t.NEQ="neq",t.GT="gt",t.GTE="gte",t.LT="lt",t.LTE="lte",t.IN="in",t.NIN="nin",t.ALL="all",t.ELEM_MATCH="elemMatch",t.EXISTS="exists",t.SIZE="size",t.MOD="mod",t.GEO_NEAR="geoNear",t.GEO_WITHIN="geoWithin",t.GEO_INTERSECTS="geoIntersects",t.LIKE="like"}(on||(on={}));var sn=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.operator=e,o._internalType=me,o}return un(e,t),e.prototype.toJSON=function(){var t,e;switch(this.operator){case on.IN:case on.NIN:return(t={})["$"+this.operator]=this.operands,t;default:return(e={})["$"+this.operator]=this.operands[0],e}},e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e.prototype.eq=function(t){var n=new e(on.EQ,[t],this.fieldName);return this.and(n)},e.prototype.neq=function(t){var n=new e(on.NEQ,[t],this.fieldName);return this.and(n)},e.prototype.gt=function(t){var n=new e(on.GT,[t],this.fieldName);return this.and(n)},e.prototype.gte=function(t){var n=new e(on.GTE,[t],this.fieldName);return this.and(n)},e.prototype.lt=function(t){var n=new e(on.LT,[t],this.fieldName);return this.and(n)},e.prototype.lte=function(t){var n=new e(on.LTE,[t],this.fieldName);return this.and(n)},e.prototype.in=function(t){var n=new e(on.IN,t,this.fieldName);return this.and(n)},e.prototype.nin=function(t){var n=new e(on.NIN,t,this.fieldName);return this.and(n)},e.prototype.geoNear=function(t){if(!(t.geometry instanceof De))throw new TypeError('"geometry" must be of type Point. Received type '+typeof t.geometry);if(void 0!==t.maxDistance&&!Pe(t.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '+typeof t.maxDistance);if(void 0!==t.minDistance&&!Pe(t.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '+typeof t.minDistance);var n=new e(on.GEO_NEAR,[t],this.fieldName);return this.and(n)},e.prototype.geoWithin=function(t){if(!(t.geometry instanceof Ve||t.geometry instanceof Je))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '+typeof t.geometry);var n=new e(on.GEO_WITHIN,[t],this.fieldName);return this.and(n)},e.prototype.geoIntersects=function(t){if(!(t.geometry instanceof De||t.geometry instanceof Fe||t.geometry instanceof Je||t.geometry instanceof He||t.geometry instanceof Ge||t.geometry instanceof Ve))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '+typeof t.geometry);var n=new e(on.GEO_INTERSECTS,[t],this.fieldName);return this.and(n)},e}(en);function an(t){return t&&t instanceof sn&&t._internalType===me}function fn(t){return an(t)}var cn={};for(var ln in on)cn[ln]="$"+ln;for(var ln in Ke)cn[ln]="$"+ln;for(var ln in Ae)cn[ln]="$"+ln;function hn(t){return cn[t]||"$"+t}cn[on.NEQ]="$ne",cn[Ae.REMOVE]="$unset",cn[Ae.SHIFT]="$pop",cn[Ae.UNSHIFT]="$push";var pn=globalThis&&globalThis.__assign||function(){return pn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},pn.apply(this,arguments)},dn=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r};function yn(t,e,n,r){var o=pn({},t);for(var i in t)if(!/^\$/.test(i)){var u=t[i];if(u&&Be(u)&&!e(u)){if(r.indexOf(u)>-1)throw new Error("Cannot convert circular structure to JSON");var s=yn(u,e,dn(n,[i]),dn(r,[u]));o[i]=s;var a=!1;for(var f in s)/^\$/.test(f)?a=!0:(o[i+"."+f]=s[f],delete o[i][f]);a||delete o[i]}}return o}function gn(t){return yn(t,vn,[],[t])}function mn(t,e,n){for(var r in e[n]||delete t[n],e)t[r]?Ue(t[r])?t[r].push(e[r]):Be(t[r])?Be(e[r])?Object.assign(t[r],e[r]):(console.warn("unmergable condition, query is object but condition is "+Le(e)+", can only overwrite",e,n),t[r]=e[r]):(console.warn("to-merge query is of type "+Le(t)+", can only overwrite",t,e,n),t[r]=e[r]):t[r]=e[r]}function vn(t){return qe(t)||ke(t)||Re(t)||$e(t)||Me(t)}function bn(t){return We(t)}var wn,_n=function(){function t(){}return t.encode=function(t){return(new En).encodeQuery(t)},t}(),En=function(){function t(){}return t.prototype.encodeQuery=function(t,e){var n;return vn(t)?nn(t)?this.encodeLogicCommand(t):an(t)?this.encodeQueryCommand(t):((n={})[e]=this.encodeQueryObject(t),n):Be(t)?this.encodeQueryObject(t):t},t.prototype.encodeRegExp=function(t){return{$regex:t.source,$options:t.flags}},t.prototype.encodeLogicCommand=function(t){var e,n,r,o,i,u,s,a=this;switch(t.operator){case Ke.NOR:case Ke.AND:case Ke.OR:var f=hn(t.operator),c=t.operands.map((function(e){return a.encodeQuery(e,t.fieldName)}));return(e={})[f]=c,e;case Ke.NOT:f=hn(t.operator);var l=t.operands[0];if(Re(l))return(n={})[t.fieldName]=((r={})[f]=this.encodeRegExp(l),r),n;c=this.encodeQuery(l)[t.fieldName];return(o={})[t.fieldName]=((i={})[f]=c,i),o;default:f=hn(t.operator);if(1===t.operands.length){var h=this.encodeQuery(t.operands[0]);return(u={})[f]=h,u}c=t.operands.map(this.encodeQuery.bind(this));return(s={})[f]=c,s}},t.prototype.encodeQueryCommand=function(t){return fn(t),this.encodeComparisonCommand(t)},t.prototype.encodeComparisonCommand=function(t){var e,n,r,o,i,u,s,a,f;if(t.fieldName===ye)throw new Error("Cannot encode a comparison command with unset field name");var c=hn(t.operator);switch(t.operator){case on.EQ:case on.NEQ:case on.LT:case on.LTE:case on.GT:case on.GTE:case on.ELEM_MATCH:case on.EXISTS:case on.SIZE:case on.MOD:return(e={})[t.fieldName]=((n={})[c]=bn(t.operands[0]),n),e;case on.IN:case on.NIN:case on.ALL:return(r={})[t.fieldName]=((o={})[c]=bn(t.operands),o),r;case on.GEO_NEAR:var l=t.operands[0];return(i={})[t.fieldName]={$nearSphere:{$geometry:l.geometry.toJSON(),$maxDistance:l.maxDistance,$minDistance:l.minDistance}},i;case on.GEO_WITHIN:l=t.operands[0];return(u={})[t.fieldName]={$geoWithin:{$geometry:l.geometry.toJSON()}},u;case on.GEO_INTERSECTS:l=t.operands[0];return(s={})[t.fieldName]={$geoIntersects:{$geometry:l.geometry.toJSON()}},s;default:return(a={})[t.fieldName]=((f={})[c]=bn(t.operands[0]),f),a}},t.prototype.encodeQueryObject=function(t){var e=gn(t);for(var n in e){var r=e[n];if(nn(r)){e[n]=r._setFieldName(n);var o=this.encodeLogicCommand(e[n]);this.mergeConditionAfterEncode(e,o,n)}else if(fn(r)){e[n]=r._setFieldName(n);o=this.encodeComparisonCommand(e[n]);this.mergeConditionAfterEncode(e,o,n)}else vn(r)&&(e[n]=bn(r))}return e},t.prototype.mergeConditionAfterEncode=function(t,e,n){for(var r in e[n]||delete t[n],e)t[r]?Ue(t[r])?t[r]=t[r].concat(e[r]):Be(t[r])?Be(e[r])?Object.assign(t,e):(console.warn("unmergable condition, query is object but condition is "+Le(e)+", can only overwrite",e,n),t[r]=e[r]):(console.warn("to-merge query is of type "+Le(t)+", can only overwrite",t,e,n),t[r]=e[r]):t[r]=e[r]},t}(),On=function(){function t(){}return t.encode=function(e){return(new t).encodeUpdate(e)},t.prototype.encodeUpdate=function(t){return tn(t)?this.encodeUpdateCommand(t):"object"===Le(t)?this.encodeUpdateObject(t):t},t.prototype.encodeUpdateCommand=function(t){if(t.fieldName===ye)throw new Error("Cannot encode a comparison command with unset field name");switch(t.operator){case Ae.PUSH:case Ae.PULL:case Ae.PULL_ALL:case Ae.POP:case Ae.SHIFT:case Ae.UNSHIFT:case Ae.ADD_TO_SET:return this.encodeArrayUpdateCommand(t);default:return this.encodeFieldUpdateCommand(t)}},t.prototype.encodeFieldUpdateCommand=function(t){var e,n,r,o,i=hn(t.operator);return t.operator===Ae.REMOVE?((e={})[i]=((n={})[t.fieldName]="",n),e):((r={})[i]=((o={})[t.fieldName]=t.operands[0],o),r)},t.prototype.encodeArrayUpdateCommand=function(t){var e,n,r,o,i,u,s,a,f,c,l=hn(t.operator);switch(t.operator){case Ae.PUSH:var h=void 0;return h=Ue(t.operands)?{$each:t.operands.map(bn)}:t.operands,(e={})[l]=((n={})[t.fieldName]=h,n),e;case Ae.UNSHIFT:h={$each:t.operands.map(bn),$position:0};return(r={})[l]=((o={})[t.fieldName]=h,o),r;case Ae.POP:return(i={})[l]=((u={})[t.fieldName]=1,u),i;case Ae.SHIFT:return(s={})[l]=((a={})[t.fieldName]=-1,a),s;default:return(f={})[l]=((c={})[t.fieldName]=bn(t.operands),c),f}},t.prototype.encodeUpdateObject=function(t){var e=gn(t);for(var n in e)if(!/^\$/.test(n)){var r=e[n];if(tn(r)){e[n]=r._setFieldName(n),mn(e,this.encodeUpdateCommand(e[n]),n)}else{e[n]=r=bn(r);var o=new Xe(Ae.SET,[r],n);mn(e,this.encodeUpdateCommand(o),n)}}return e},t}(),xn=globalThis&&globalThis.__assign||function(){return xn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xn.apply(this,arguments)},Sn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},Nn=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Tn=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r},jn=function(){function t(t,e,n,r,o,i){this._db=t,this._coll=e,this._fieldFilters=n,this._fieldOrders=r||[],this._queryOptions=o||{},this._withs=i||[],this._request=this._db.request}return t.prototype.where=function(e){if("Object"!==Object.prototype.toString.call(e).slice(8,-1))throw Error(b.QueryParamTypeError);var n=Object.keys(e),r=n.some((function(t){return void 0!==e[t]}));if(n.length&&!r)throw Error(b.QueryParamValueError);var o=_n.encode(e);return new t(this._db,this._coll,o,this._fieldOrders,this._queryOptions,this._withs)},t.prototype.orderBy=function(e,n){Ce.isFieldPath(e),Ce.isFieldOrder(n);var r={field:e,direction:n},o=this._fieldOrders.concat(r);return new t(this._db,this._coll,this._fieldFilters,o,this._queryOptions,this._withs)},t.prototype.with=function(e){var n,r,o={query:e.query,foreignField:e.foreignField,localField:e.localField,as:null!==(n=e.as)&&void 0!==n?n:e.query._coll,one:null!==(r=e.one)&&void 0!==r&&r},i=this._withs.concat(o);return new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,this._queryOptions,i)},t.prototype.withOne=function(e){var n,r={query:e.query,foreignField:e.foreignField,localField:e.localField,as:null!==(n=e.as)&&void 0!==n?n:e.query._coll,one:!0},o=this._withs.concat(r);return new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,this._queryOptions,o)},t.prototype.field=function(e){var n={};if(e instanceof Array){for(var r={},o=0,i=e;o<i.length;o++){r[u=i[o]]=1}n=r}else for(var u in e)e[u]?"object"!=typeof e[u]&&(n[u]=1):n[u]=0;var s=xn({},this._queryOptions);return s.projection=n,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,s,this._withs)},t.prototype.limit=function(e){Ce.isInteger("limit",e);var n=xn({},this._queryOptions);return n.limit=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,n,this._withs)},t.prototype.skip=function(e){Ce.isInteger("offset",e);var n=xn({},this._queryOptions);return n.offset=e,new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,n,this._withs)},t.prototype.page=function(t){var e=(null==t?void 0:t.current)||1,n=(null==t?void 0:t.size)||10,r=this.skip((e-1)*n).limit(n);return r._queryOptions.count=!0,r},t.prototype.clone=function(){return new t(this._db,this._coll,this._fieldFilters,this._fieldOrders,this._queryOptions,this._withs)},t.prototype.get=function(){var t;return Sn(this,void 0,void 0,(function(){return Nn(this,(function(e){switch(e.label){case 0:return(null===(t=this._withs)||void 0===t?void 0:t.length)?[4,this.internalMerge()]:[3,2];case 1:case 3:return[2,e.sent()];case 2:return[4,this.internalGet()]}}))}))},t.prototype.getOne=function(){return Sn(this,void 0,void 0,(function(){var t;return Nn(this,(function(e){switch(e.label){case 0:return[4,this.limit(1).get()];case 1:return(t=e.sent()).error?[2,t]:t.data.length?[2,{ok:!0,data:t.data[0],requestId:t.requestId}]:[2,{ok:!0,data:null,requestId:t.requestId}]}}))}))},t.prototype.merge=function(t){return Sn(this,void 0,void 0,(function(){return Nn(this,(function(e){switch(e.label){case 0:return[4,this.internalMerge(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.count=function(){return Sn(this,void 0,void 0,(function(){var t,e;return Nn(this,(function(n){switch(n.label){case 0:return t=this.buildQueryParam(),[4,this.send(_.count,t)];case 1:return(e=n.sent()).error?[2,{requestId:e.requestId,ok:!1,error:e.error,total:void 0,code:e.code}]:[2,{requestId:e.requestId,total:e.data.total,ok:!0}]}}))}))},t.prototype.update=function(t,e){var n,r,o,i;return Sn(this,void 0,void 0,(function(){var u,s;return Nn(this,(function(a){switch(a.label){case 0:if(!t||"object"!=typeof t||0===(null===(n=Object.keys(t))||void 0===n?void 0:n.length))throw new Error("data cannot be empty object");if(t.hasOwnProperty("_id"))throw new Error("can not update the `_id` field");return(u=this.buildQueryParam()).multi=null!==(r=null==e?void 0:e.multi)&&void 0!==r&&r,u.merge=null===(o=null==e?void 0:e.merge)||void 0===o||o,u.upsert=null!==(i=null==e?void 0:e.upsert)&&void 0!==i&&i,u.merge?u.data=On.encode(t):u.data=We(t),[4,this.send(_.update,u)];case 1:return(s=a.sent()).error?[2,{requestId:s.requestId,error:s.error,ok:!1,code:s.code,updated:void 0,matched:void 0,upsertId:void 0}]:[2,{requestId:s.requestId,updated:s.data.updated,matched:s.data.matched,upsertId:s.data.upsert_id,ok:!0}]}}))}))},t.prototype.remove=function(t){var e,n;return Sn(this,void 0,void 0,(function(){var r,o;return Nn(this,(function(i){switch(i.label){case 0:return Object.keys(this._queryOptions).length>0&&console.warn("`offset`, `limit` and `projection` are not supported in remove() operation"),(null===(e=this._fieldOrders)||void 0===e?void 0:e.length)>0&&console.warn("`orderBy` is not supported in remove() operation"),(r=this.buildQueryParam()).multi=null!==(n=null==t?void 0:t.multi)&&void 0!==n&&n,[4,this.send(_.remove,r)];case 1:return(o=i.sent()).error?[2,{requestId:o.requestId,error:o.error,ok:!1,deleted:void 0,code:o.code}]:[2,{requestId:o.requestId,deleted:o.data.deleted,ok:!0}]}}))}))},t.prototype.buildQueryParam=function(){var t,e={collectionName:this._coll};return this._fieldFilters&&(e.query=this._fieldFilters),(null===(t=this._fieldOrders)||void 0===t?void 0:t.length)&&(e.order=Tn(this._fieldOrders)),this._queryOptions.offset&&(e.offset=this._queryOptions.offset),this._queryOptions.limit?e.limit=this._queryOptions.limit<1e3?this._queryOptions.limit:1e3:e.limit=100,this._queryOptions.projection&&(e.projection=this._queryOptions.projection),this._queryOptions.count&&(e.count=this._queryOptions.count),e},t.prototype.internalGet=function(){var t,e,n;return Sn(this,void 0,void 0,(function(){var r,o,i,u;return Nn(this,(function(s){switch(s.label){case 0:return r=this.buildQueryParam(),[4,this.send(_.query,r)];case 1:return(o=s.sent()).error?[2,{error:o.error,data:o.data,requestId:o.requestId,ok:!1,code:o.code}]:(i=Ie.formatResDocumentData(o.data.list),u={data:i,requestId:o.requestId,ok:!0},o.total&&(u.total=null===(t=o.data)||void 0===t?void 0:t.total),o.limit&&(u.limit=null===(e=o.data)||void 0===e?void 0:e.limit),o.offset&&(u.offset=null===(n=o.data)||void 0===n?void 0:n.offset),[2,u])}}))}))},t.prototype.internalMerge=function(t){var e;return Sn(this,void 0,void 0,(function(){var n,r,o,i,u,s,a;return Nn(this,(function(f){switch(f.label){case 0:return n=null!==(e=null==(t=null!=t?t:{})?void 0:t.intersection)&&void 0!==e&&e,[4,this.internalGet()];case 1:if(!(r=f.sent()).ok)return[2,r];o=function(t){var e,o,i,u,s,a,f,c,l,h,p,d,y,g,m,v,b;return Nn(this,(function(w){switch(w.label){case 0:return e=t.query,o=t.localField,i=t.foreignField,u=t.as,s=t.one,a=r.data.map((function(t){return t[o]})),(f=e.clone())._fieldFilters||(f._fieldFilters={}),f._fieldFilters[i]={$in:a},c=void 0,f._withs.length?[4,f.merge()]:[3,2];case 1:return c=w.sent(),[3,4];case 2:return[4,f.get()];case 3:c=w.sent(),w.label=4;case 4:if(!c.ok)return[2,{value:c}];for(l={},h=0,p=c.data;h<p.length;h++)d=p[h],b=d[i],s?l[b]=d:(l[b]=l[b]||[],l[b].push(d));for(y=[],g=0,m=r.data;g<m.length;g++)v=m[g],b=v[o],v[u]=l[b],n&&!l[b]||y.push(v);return r.data=y,[2]}}))},i=0,u=this._withs,f.label=2;case 2:return i<u.length?(s=u[i],[5,o(s)]):[3,5];case 3:if("object"==typeof(a=f.sent()))return[2,a.value];f.label=4;case 4:return i++,[3,2];case 5:return[2,r]}}))}))},t.prototype.send=function(t,e){return Sn(this,void 0,void 0,(function(){return Nn(this,(function(n){switch(n.label){case 0:return[4,this._request.send(t,e)];case 1:return[2,n.sent()]}}))}))},t}(),An=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},In=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ln=function(){function t(t,e,n,r){this._db=t,this._coll=e,this.id=n,this._query=r||new jn(t,e)}return t.prototype.create=function(t,e){var n,r;return An(this,void 0,void 0,(function(){var o,i;return In(this,(function(u){switch(u.label){case 0:if(!t||"object"!=typeof t||0===(null===(n=Object.keys(t))||void 0===n?void 0:n.length))throw new Error("data cannot be empty object");return o={collectionName:this._coll,data:We(t),multi:null!==(r=null==e?void 0:e.multi)&&void 0!==r&&r},[4,this._query.send(_.add,o)];case 1:return(i=u.sent()).error?[2,{requestId:i.requestId,error:i.error,ok:!1,id:void 0,insertedCount:void 0,code:i.code}]:[2,{id:i.data._id||i.data[this._db.primaryKey],insertedCount:i.data.insertedCount,requestId:i.requestId,ok:!0}]}}))}))},t.prototype.set=function(t){return An(this,void 0,void 0,(function(){var e,n,r;return In(this,(function(o){switch(o.label){case 0:if(!this.id)throw new Error("document id cannot be empty");if(e=!1,n=function(t){if("object"==typeof t)for(var r in t)t[r]instanceof Xe?e=!0:"object"==typeof t[r]&&n(t[r])},n(t),e)throw new Error("data cannot contain operator");return!1,[4,this._query.where((r={},r[this._db.primaryKey]=this.id,r)).update(We(t),{merge:false,multi:!1,upsert:!0})];case 1:return[2,o.sent()]}}))}))},t.prototype.update=function(t){return An(this,void 0,void 0,(function(){var e,n;return In(this,(function(r){switch(r.label){case 0:return!0,e={merge:true,multi:!1,upsert:!1},[4,this._query.where((n={},n[this._db.primaryKey]=this.id,n)).update(t,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.remove=function(){return An(this,void 0,void 0,(function(){var t;return In(this,(function(e){switch(e.label){case 0:return[4,this._query.where((t={},t[this._db.primaryKey]=this.id,t)).remove({multi:!1})];case 1:return[2,e.sent()]}}))}))},t.prototype.get=function(){return An(this,void 0,void 0,(function(){var t;return In(this,(function(e){switch(e.label){case 0:return[4,this._query.where((t={},t[this._db.primaryKey]=this.id,t)).getOne()];case 1:return[2,e.sent()]}}))}))},t.prototype.field=function(e){return new t(this._db,this._coll,this.id,this._query.field(e))},t}(),Bn=function t(e){if(!Be(e))return e;for(var n in e)void 0===e[n]?delete e[n]:Be(e[n])&&(e[n]=t(e[n]));return e},Pn=function(t){return t=Bn(t),ue.stringify(t,{relaxed:!1})},Un=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},kn=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Rn=6378100,qn=function(){function t(t,e,n){var r=this;this._stages=[],t&&e&&(this._db=t,this._request=this._db.request,this._collectionName=e,n&&n.length>0&&n.forEach((function(t){Ce.isValidAggregation(t);var e=Object.keys(t)[0];r._pipe(e,t[e],!0)})))}return t.prototype.end=function(){var t;return Un(this,void 0,void 0,(function(){var e,n;return kn(this,(function(r){switch(r.label){case 0:if(!this._collectionName||!this._db)throw new Error("Aggregation pipeline cannot send request");if(!(null===(t=this._stages)||void 0===t?void 0:t.length))throw new Error("Aggregation stage cannot be empty");return[4,this._request.send(_.aggregate,{collectionName:this._collectionName,stages:this._stages})];case 1:return(e=r.sent()).error?[2,{error:e.error,data:e.data,requestId:e.requestId,ok:!1,code:e.code}]:(n=Ie.formatResDocumentData(e.data.list),[2,{data:n,requestId:e.requestId,ok:!0}])}}))}))},t.prototype.unwrap=function(){return this._stages},t.prototype.done=function(){return this._stages.map((function(t){var e,n=t.stageKey,r=t.stageValue;return(e={})[n]=JSON.parse(r),e}))},t.prototype._pipe=function(t,e,n){void 0===n&&(n=!1);var r="";return r="object"===Le(e)?Pn(e):JSON.stringify(e),this._stages.push({stageKey:n?t:"$"+t,stageValue:r}),this},t.prototype.addFields=function(t){return this._pipe("addFields",t)},t.prototype.bucket=function(t){return this._pipe("bucket",t)},t.prototype.bucketAuto=function(t){return this._pipe("bucketAuto",t)},t.prototype.count=function(t){return this._pipe("count",t)},t.prototype.geoNear=function(t){return t.query&&(t.query=_n.encode(t.query)),t.distanceMultiplier&&"number"==typeof t.distanceMultiplier?t.distanceMultiplier=t.distanceMultiplier*Rn:t.distanceMultiplier=Rn,this._pipe("geoNear",t)},t.prototype.group=function(t){return this._pipe("group",t)},t.prototype.limit=function(t){return this._pipe("limit",t)},t.prototype.match=function(t){return this._pipe("match",_n.encode(t))},t.prototype.project=function(t){return this._pipe("project",t)},t.prototype.lookup=function(t){return this._pipe("lookup",t)},t.prototype.replaceRoot=function(t){return this._pipe("replaceRoot",t)},t.prototype.sample=function(t){return this._pipe("sample",t)},t.prototype.skip=function(t){return this._pipe("skip",t)},t.prototype.sort=function(t){return this._pipe("sort",t)},t.prototype.sortByCount=function(t){return this._pipe("sortByCount",t)},t.prototype.unwind=function(t){return this._pipe("unwind",t)},t}(),$n=globalThis&&globalThis.__extends||(wn=function(t,e){return wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},wn(t,e)},function(t,e){function n(){this.constructor=t}wn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Mn=function(t){function e(e,n){return t.call(this,e,n)||this}return $n(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(!t)throw new Error("docID cannot be empty");return new Ln(this._db,this._coll,t)},e.prototype.add=function(t,e){return new Ln(this._db,this._coll,void 0).create(t,e)},e.prototype.aggregate=function(t){return void 0===t&&(t=[]),new qn(this._db,this._coll,t)},e}(jn),Cn={eq:function(t){return new sn(on.EQ,[t])},neq:function(t){return new sn(on.NEQ,[t])},lt:function(t){return new sn(on.LT,[t])},lte:function(t){return new sn(on.LTE,[t])},gt:function(t){return new sn(on.GT,[t])},gte:function(t){return new sn(on.GTE,[t])},in:function(t){return new sn(on.IN,t)},nin:function(t){return new sn(on.NIN,t)},all:function(t){return new sn(on.ALL,t)},elemMatch:function(t){return new sn(on.ELEM_MATCH,[t])},exists:function(t){return new sn(on.EXISTS,[t])},size:function(t){return new sn(on.SIZE,[t])},mod:function(t){return new sn(on.MOD,[t])},geoNear:function(t){return new sn(on.GEO_NEAR,[t])},geoWithin:function(t){return new sn(on.GEO_WITHIN,[t])},geoIntersects:function(t){return new sn(on.GEO_INTERSECTS,[t])},like:function(t){return new sn(on.LIKE,[t])},and:function(){var t=Ue(arguments[0])?arguments[0]:Array.from(arguments);return new en(Ke.AND,t)},nor:function(){var t=Ue(arguments[0])?arguments[0]:Array.from(arguments);return new en(Ke.NOR,t)},or:function(){var t=Ue(arguments[0])?arguments[0]:Array.from(arguments);return new en(Ke.OR,t)},not:function(){var t=Ue(arguments[0])?arguments[0]:Array.from(arguments);return new en(Ke.NOT,t)},set:function(t){return new Xe(Ae.SET,[t])},remove:function(){return new Xe(Ae.REMOVE,[])},inc:function(t){return new Xe(Ae.INC,[t])},mul:function(t){return new Xe(Ae.MUL,[t])},push:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Be(e[0])&&e[0].hasOwnProperty("each")){var r=e[0];t={$each:r.each,$position:r.position,$sort:r.sort,$slice:r.slice}}else t=Ue(e[0])?e[0]:Array.from(e);return new Xe(Ae.PUSH,t)},pull:function(t){return new Xe(Ae.PULL,t)},pullAll:function(t){return new Xe(Ae.PULL_ALL,t)},pop:function(){return new Xe(Ae.POP,[])},shift:function(){return new Xe(Ae.SHIFT,[])},unshift:function(){var t=Ue(arguments[0])?arguments[0]:Array.from(arguments);return new Xe(Ae.UNSHIFT,t)},addToSet:function(t){return new Xe(Ae.ADD_TO_SET,t)},rename:function(t){return new Xe(Ae.RENAME,[t])},bit:function(t){return new Xe(Ae.BIT,[t])},max:function(t){return new Xe(Ae.MAX,[t])},min:function(t){return new Xe(Ae.MIN,[t])},expr:function(t){return{$expr:t}},jsonSchema:function(t){return{$jsonSchema:t}},text:function(t){return"string"===Le(t)?{$search:t.search}:{$search:t.search,$language:t.language,$caseSensitive:t.caseSensitive,$diacriticSensitive:t.diacriticSensitive}},aggregate:{pipeline:function(){return new qn},abs:function(t){return new Dn("abs",t)},add:function(t){return new Dn("add",t)},ceil:function(t){return new Dn("ceil",t)},divide:function(t){return new Dn("divide",t)},exp:function(t){return new Dn("exp",t)},floor:function(t){return new Dn("floor",t)},ln:function(t){return new Dn("ln",t)},log:function(t){return new Dn("log",t)},log10:function(t){return new Dn("log10",t)},mod:function(t){return new Dn("mod",t)},multiply:function(t){return new Dn("multiply",t)},pow:function(t){return new Dn("pow",t)},sqrt:function(t){return new Dn("sqrt",t)},subtract:function(t){return new Dn("subtract",t)},trunc:function(t){return new Dn("trunc",t)},arrayElemAt:function(t){return new Dn("arrayElemAt",t)},arrayToObject:function(t){return new Dn("arrayToObject",t)},concatArrays:function(t){return new Dn("concatArrays",t)},filter:function(t){return new Dn("filter",t)},in:function(t){return new Dn("in",t)},indexOfArray:function(t){return new Dn("indexOfArray",t)},isArray:function(t){return new Dn("isArray",t)},map:function(t){return new Dn("map",t)},range:function(t){return new Dn("range",t)},reduce:function(t){return new Dn("reduce",t)},reverseArray:function(t){return new Dn("reverseArray",t)},size:function(t){return new Dn("size",t)},slice:function(t){return new Dn("slice",t)},zip:function(t){return new Dn("zip",t)},and:function(t){return new Dn("and",t)},not:function(t){return new Dn("not",t)},or:function(t){return new Dn("or",t)},cmp:function(t){return new Dn("cmp",t)},eq:function(t){return new Dn("eq",t)},gt:function(t){return new Dn("gt",t)},gte:function(t){return new Dn("gte",t)},lt:function(t){return new Dn("lt",t)},lte:function(t){return new Dn("lte",t)},neq:function(t){return new Dn("ne",t)},cond:function(t){return new Dn("cond",t)},ifNull:function(t){return new Dn("ifNull",t)},switch:function(t){return new Dn("switch",t)},dateFromParts:function(t){return new Dn("dateFromParts",t)},dateFromString:function(t){return new Dn("dateFromString",t)},dayOfMonth:function(t){return new Dn("dayOfMonth",t)},dayOfWeek:function(t){return new Dn("dayOfWeek",t)},dayOfYear:function(t){return new Dn("dayOfYear",t)},isoDayOfWeek:function(t){return new Dn("isoDayOfWeek",t)},isoWeek:function(t){return new Dn("isoWeek",t)},isoWeekYear:function(t){return new Dn("isoWeekYear",t)},millisecond:function(t){return new Dn("millisecond",t)},minute:function(t){return new Dn("minute",t)},month:function(t){return new Dn("month",t)},second:function(t){return new Dn("second",t)},hour:function(t){return new Dn("hour",t)},week:function(t){return new Dn("week",t)},year:function(t){return new Dn("year",t)},literal:function(t){return new Dn("literal",t)},mergeObjects:function(t){return new Dn("mergeObjects",t)},objectToArray:function(t){return new Dn("objectToArray",t)},allElementsTrue:function(t){return new Dn("allElementsTrue",t)},anyElementTrue:function(t){return new Dn("anyElementTrue",t)},setDifference:function(t){return new Dn("setDifference",t)},setEquals:function(t){return new Dn("setEquals",t)},setIntersection:function(t){return new Dn("setIntersection",t)},setIsSubset:function(t){return new Dn("setIsSubset",t)},setUnion:function(t){return new Dn("setUnion",t)},concat:function(t){return new Dn("concat",t)},dateToString:function(t){return new Dn("dateToString",t)},indexOfBytes:function(t){return new Dn("indexOfBytes",t)},indexOfCP:function(t){return new Dn("indexOfCP",t)},split:function(t){return new Dn("split",t)},strLenBytes:function(t){return new Dn("strLenBytes",t)},strLenCP:function(t){return new Dn("strLenCP",t)},strcasecmp:function(t){return new Dn("strcasecmp",t)},substr:function(t){return new Dn("substr",t)},substrBytes:function(t){return new Dn("substrBytes",t)},substrCP:function(t){return new Dn("substrCP",t)},toLower:function(t){return new Dn("toLower",t)},toUpper:function(t){return new Dn("toUpper",t)},meta:function(t){return new Dn("meta",t)},addToSet:function(t){return new Dn("addToSet",t)},avg:function(t){return new Dn("avg",t)},first:function(t){return new Dn("first",t)},last:function(t){return new Dn("last",t)},max:function(t){return new Dn("max",t)},min:function(t){return new Dn("min",t)},push:function(t){return new Dn("push",t)},stdDevPop:function(t){return new Dn("stdDevPop",t)},stdDevSamp:function(t){return new Dn("stdDevSamp",t)},sum:function(t){return new Dn("sum",t)},let:function(t){return new Dn("let",t)}},project:{slice:function(t){return new Fn("slice",t)},elemMatch:function(t){return new Fn("elemMatch",t)}}},Dn=function(t,e){this["$"+t]=e},Fn=function(t,e){this["$"+t]=e},Jn=function(){function t(t){var e=t.regexp,n=t.options;if(!e)throw new TypeError("regexp must be a string");this.$regex=e,this.$options=n||""}return t.prototype.parse=function(){return{$regex:this.$regex,$options:this.$options}},Object.defineProperty(t.prototype,"_internalType",{get:function(){return Ne},enumerable:!0,configurable:!0}),t}();function Hn(t){return new Jn(t)}var Gn=function(){function t(t){var e;if(this.Geo=Ze,this.command=Cn,this.RegExp=Hn,this.serverDate=je,!t.request)throw new Error("DbConfig.request cannot be empty");this.request=t.request,this.primaryKey=null!==(e=t.primaryKey)&&void 0!==e?e:"_id"}return t.prototype.collection=function(t){if(!t)throw new Error("Collection name is required");return new Mn(this,t)},t.prototype.generateId=function(){return(new Yt).toHexString()},t.prototype.ObjectId=function(t){return new Yt(t)},t}(),Vn={exports:{}},Zn=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},Yn=Zn,zn=Object.prototype.toString;function Wn(t){return"[object Array]"===zn.call(t)}function Qn(t){return void 0===t}function Kn(t){return null!==t&&"object"==typeof t}function Xn(t){if("[object Object]"!==zn.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function tr(t){return"[object Function]"===zn.call(t)}function er(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),Wn(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var nr={isArray:Wn,isArrayBuffer:function(t){return"[object ArrayBuffer]"===zn.call(t)},isBuffer:function(t){return null!==t&&!Qn(t)&&null!==t.constructor&&!Qn(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Kn,isPlainObject:Xn,isUndefined:Qn,isDate:function(t){return"[object Date]"===zn.call(t)},isFile:function(t){return"[object File]"===zn.call(t)},isBlob:function(t){return"[object Blob]"===zn.call(t)},isFunction:tr,isStream:function(t){return Kn(t)&&tr(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:er,merge:function t(){var e={};function n(n,r){Xn(e[r])&&Xn(n)?e[r]=t(e[r],n):Xn(n)?e[r]=t({},n):Wn(n)?e[r]=n.slice():e[r]=n}for(var r=0,o=arguments.length;r<o;r++)er(arguments[r],n);return e},extend:function(t,e,n){return er(e,(function(e,r){t[r]=n&&"function"==typeof e?Yn(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}},rr=nr;function or(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ir=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(rr.isURLSearchParams(e))r=e.toString();else{var o=[];rr.forEach(e,(function(t,e){null!=t&&(rr.isArray(t)?e+="[]":t=[t],rr.forEach(t,(function(t){rr.isDate(t)?t=t.toISOString():rr.isObject(t)&&(t=JSON.stringify(t)),o.push(or(e)+"="+or(t))})))})),r=o.join("&")}if(r){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t},ur=nr;function sr(){this.handlers=[]}sr.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},sr.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},sr.prototype.forEach=function(t){ur.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var ar,fr,cr,lr,hr,pr,dr,yr,gr,mr,vr,br,wr,_r,Er,Or,xr,Sr,Nr=sr,Tr=nr,jr=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t};function Ar(){if(fr)return ar;fr=1;var t=jr;return ar=function(e,n,r,o,i){var u=new Error(e);return t(u,n,r,o,i)},ar}function Ir(){if(lr)return cr;lr=1;var t=Ar();return cr=function(e,n,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?n(t("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}}function Lr(){if(pr)return hr;pr=1;var t=nr;return hr=t.isStandardBrowserEnv()?{write:function(e,n,r,o,i,u){var s=[];s.push(e+"="+encodeURIComponent(n)),t.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),t.isString(o)&&s.push("path="+o),t.isString(i)&&s.push("domain="+i),!0===u&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},hr}function Br(){return yr?dr:(yr=1,dr=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)})}function Pr(){return mr?gr:(mr=1,gr=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t})}function Ur(){if(br)return vr;br=1;var t=Br(),e=Pr();return vr=function(n,r){return n&&!t(r)?e(n,r):r}}function kr(){if(_r)return wr;_r=1;var t=nr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return wr=function(n){var r,o,i,u={};return n?(t.forEach(n.split("\n"),(function(n){if(i=n.indexOf(":"),r=t.trim(n.substr(0,i)).toLowerCase(),o=t.trim(n.substr(i+1)),r){if(u[r]&&e.indexOf(r)>=0)return;u[r]="set-cookie"===r?(u[r]?u[r]:[]).concat([o]):u[r]?u[r]+", "+o:o}})),u):u},wr}function Rr(){if(Or)return Er;Or=1;var t=nr;return Er=t.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(t){var e=t;return n&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(n){var r=t.isString(n)?o(n):n;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}}function qr(){if(Sr)return xr;Sr=1;var t=nr,e=Ir(),n=Lr(),r=ir,o=Ur(),i=kr(),u=Rr(),s=Ar();return xr=function(a){return new Promise((function(f,c){var l=a.data,h=a.headers,p=a.responseType;t.isFormData(l)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(a.auth){var y=a.auth.username||"",g=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";h.Authorization="Basic "+btoa(y+":"+g)}var m=o(a.baseURL,a.url);function v(){if(d){var t="getAllResponseHeaders"in d?i(d.getAllResponseHeaders()):null,n={data:p&&"text"!==p&&"json"!==p?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:t,config:a,request:d};e(f,c,n),d=null}}if(d.open(a.method.toUpperCase(),r(m,a.params,a.paramsSerializer),!0),d.timeout=a.timeout,"onloadend"in d?d.onloadend=v:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(v)},d.onabort=function(){d&&(c(s("Request aborted",a,"ECONNABORTED",d)),d=null)},d.onerror=function(){c(s("Network Error",a,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+a.timeout+"ms exceeded";a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),c(s(t,a,a.transitional&&a.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},t.isStandardBrowserEnv()){var b=(a.withCredentials||u(m))&&a.xsrfCookieName?n.read(a.xsrfCookieName):void 0;b&&(h[a.xsrfHeaderName]=b)}"setRequestHeader"in d&&t.forEach(h,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete h[e]:d.setRequestHeader(e,t)})),t.isUndefined(a.withCredentials)||(d.withCredentials=!!a.withCredentials),p&&"json"!==p&&(d.responseType=a.responseType),"function"==typeof a.onDownloadProgress&&d.addEventListener("progress",a.onDownloadProgress),"function"==typeof a.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then((function(t){d&&(d.abort(),c(t),d=null)})),l||(l=null),d.send(l)}))},xr}var $r=nr,Mr=function(t,e){Tr.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},Cr=jr,Dr={"Content-Type":"application/x-www-form-urlencoded"};function Fr(t,e){!$r.isUndefined(t)&&$r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Jr,Hr={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Jr=qr()),Jr),transformRequest:[function(t,e){return Mr(e,"Accept"),Mr(e,"Content-Type"),$r.isFormData(t)||$r.isArrayBuffer(t)||$r.isBuffer(t)||$r.isStream(t)||$r.isFile(t)||$r.isBlob(t)?t:$r.isArrayBufferView(t)?t.buffer:$r.isURLSearchParams(t)?(Fr(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):$r.isObject(t)||e&&"application/json"===e["Content-Type"]?(Fr(e,"application/json"),function(t,e,n){if($r.isString(t))try{return(e||JSON.parse)(t),$r.trim(t)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional,n=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&$r.isString(t)&&t.length)try{return JSON.parse(t)}catch(i){if(o){if("SyntaxError"===i.name)throw Cr(i,this,"E_JSON_PARSE");throw i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Hr.headers={common:{Accept:"application/json, text/plain, */*"}},$r.forEach(["delete","get","head"],(function(t){Hr.headers[t]={}})),$r.forEach(["post","put","patch"],(function(t){Hr.headers[t]=$r.merge(Dr)}));var Gr,Vr,Zr=Hr,Yr=nr,zr=Zr;function Wr(){return Vr?Gr:(Vr=1,Gr=function(t){return!(!t||!t.__CANCEL__)})}var Qr=nr,Kr=function(t,e,n){var r=this||zr;return Yr.forEach(n,(function(n){t=n.call(r,t,e)})),t},Xr=Wr(),to=Zr;function eo(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var no=nr,ro=function(t,e){e=e||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function s(t,e){return no.isPlainObject(t)&&no.isPlainObject(e)?no.merge(t,e):no.isPlainObject(e)?no.merge({},e):no.isArray(e)?e.slice():e}function a(r){no.isUndefined(e[r])?no.isUndefined(t[r])||(n[r]=s(void 0,t[r])):n[r]=s(t[r],e[r])}no.forEach(r,(function(t){no.isUndefined(e[t])||(n[t]=s(void 0,e[t]))})),no.forEach(o,a),no.forEach(i,(function(r){no.isUndefined(e[r])?no.isUndefined(t[r])||(n[r]=s(void 0,t[r])):n[r]=s(void 0,e[r])})),no.forEach(u,(function(r){r in e?n[r]=s(t[r],e[r]):r in t&&(n[r]=s(void 0,t[r]))}));var f=r.concat(o).concat(i).concat(u),c=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===f.indexOf(t)}));return no.forEach(c,a),n},oo={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},io={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){io[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var uo={},so=oo.version.split(".");function ao(t,e){for(var n=e?e.split("."):so,r=t.split("."),o=0;o<3;o++){if(n[o]>r[o])return!0;if(n[o]<r[o])return!1}return!1}io.transitional=function(t,e,n){var r=e&&ao(e);function o(t,e){return"[Axios v"+oo.version+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,i,u){if(!1===t)throw new Error(o(i," has been removed in "+e));return r&&!uo[i]&&(uo[i]=!0,console.warn(o(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,u)}};var fo,co,lo,ho,po,yo,go,mo,vo={isOlderVersion:ao,assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),o=r.length;o-- >0;){var i=r[o],u=e[i];if(u){var s=t[i],a=void 0===s||u(s,i,t);if(!0!==a)throw new TypeError("option "+i+" must be "+a)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:io},bo=nr,wo=ir,_o=Nr,Eo=function(t){return eo(t),t.headers=t.headers||{},t.data=Kr.call(t,t.data,t.headers,t.transformRequest),t.headers=Qr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Qr.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||to.adapter)(t).then((function(e){return eo(t),e.data=Kr.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return Xr(e)||(eo(t),e&&e.response&&(e.response.data=Kr.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},Oo=ro,xo=vo,So=xo.validators;function No(t){this.defaults=t,this.interceptors={request:new _o,response:new _o}}function To(){if(co)return fo;function t(t){this.message=t}return co=1,t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,fo=t}No.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Oo(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&xo.assertOptions(e,{silentJSONParsing:So.transitional(So.boolean,"1.0.0"),forcedJSONParsing:So.transitional(So.boolean,"1.0.0"),clarifyTimeoutError:So.transitional(So.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var o,i=[];if(this.interceptors.response.forEach((function(t){i.push(t.fulfilled,t.rejected)})),!r){var u=[Eo,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),o=Promise.resolve(t);u.length;)o=o.then(u.shift(),u.shift());return o}for(var s=t;n.length;){var a=n.shift(),f=n.shift();try{s=a(s)}catch(c){f(c);break}}try{o=Eo(s)}catch(c){return Promise.reject(c)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},No.prototype.getUri=function(t){return t=Oo(this.defaults,t),wo(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},bo.forEach(["delete","get","head","options"],(function(t){No.prototype[t]=function(e,n){return this.request(Oo(n||{},{method:t,url:e,data:(n||{}).data}))}})),bo.forEach(["post","put","patch"],(function(t){No.prototype[t]=function(e,n,r){return this.request(Oo(r||{},{method:t,url:e,data:n}))}}));var jo=nr,Ao=Zn,Io=No,Lo=ro;function Bo(t){var e=new Io(t),n=Ao(Io.prototype.request,e);return jo.extend(n,Io.prototype,e),jo.extend(n,e),n}var Po=Bo(Zr);Po.Axios=Io,Po.create=function(t){return Bo(Lo(Po.defaults,t))},Po.Cancel=To(),Po.CancelToken=function(){if(ho)return lo;ho=1;var t=To();function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(t){n=t}));var r=this;e((function(e){r.reason||(r.reason=new t(e),n(r.reason))}))}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var t;return{token:new e((function(e){t=e})),cancel:t}},lo=e}(),Po.isCancel=Wr(),Po.all=function(t){return Promise.all(t)},Po.spread=yo?po:(yo=1,po=function(t){return function(e){return t.apply(null,e)}}),Po.isAxiosError=mo?go:(mo=1,go=function(t){return"object"==typeof t&&!0===t.isAxiosError}),Vn.exports=Po,Vn.exports.default=Po;var Uo,ko=Vn.exports,Ro=i(ko);!function(t){t.H5="h5",t.WX_MP="wxmp",t.UNI_APP="uniapp"}(Uo||(Uo={}));var qo,$o,Mo=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},Co=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Do=function(){function t(t){this.options=Object.assign({},t),this.options.timeout=(null==t?void 0:t.timeout)||15e3}return t.prototype.send=function(t,e){return Mo(this,void 0,void 0,(function(){var n,r,o;return Co(this,(function(i){switch(i.label){case 0:n=Object.assign({},e,{action:t}),r=setTimeout((function(){console.warn("Database operation is longer than 3s. Please check query performance and your network environment.")}),3e3),i.label=1;case 1:return i.trys.push([1,,3,4]),o=this.options.baseUrl+this.options.dbProxyUrl,[4,this.request(o,n)];case 2:return[2,i.sent().data];case 3:return clearTimeout(r),[7];case 4:return[2]}}))}))},t.prototype.request=function(t,e){return Mo(this,void 0,void 0,(function(){var n,r;return Co(this,(function(o){switch(o.label){case 0:if(this.options.environment!==Uo.H5)throw new Error("environment type must be h5");return n=this.options.getAccessToken(),r=this.getHeaders(n),[4,Ro.post(t,e,{headers:r,timeout:this.options.timeout})];case 1:return[2,o.sent()]}}))}))},t.prototype.getHeaders=function(t,e){var n;e=null!=e?e:{"Content-Type":"application/json"},t&&(e.Authorization="Bearer "+t);var r=(null===(n=this.options)||void 0===n?void 0:n.headers)||{};return Object.assign(e,r)},t}(),Fo=globalThis&&globalThis.__extends||(qo=function(t,e){return qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},qo(t,e)},function(t,e){function n(){this.constructor=t}qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Jo=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},Ho=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Go=function(t){function e(e){return t.call(this,e)||this}return Fo(e,t),e.prototype.request=function(t,e,n){var r;return Jo(this,void 0,void 0,(function(){var o,i,u;return Ho(this,(function(s){switch(s.label){case 0:if(this.options.environment!==Uo.UNI_APP)throw new Error("environment type must be uniapp");return o=this.options.getAccessToken(),i=this.getHeaders(o),u={url:t,header:i,method:null!==(r=null==n?void 0:n.method)&&void 0!==r?r:"POST",data:e,dataType:"json"},[4,uni.request(u)];case 1:return[2,s.sent()]}}))}))},e}(Do),Vo=globalThis&&globalThis.__extends||($o=function(t,e){return $o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},$o(t,e)},function(t,e){function n(){this.constructor=t}$o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zo=globalThis&&globalThis.__assign||function(){return Zo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Zo.apply(this,arguments)},Yo=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},zo=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Wo=function(t){function e(e){return t.call(this,e)||this}return Vo(e,t),e.prototype.request=function(t,e,n){var r;return Yo(this,void 0,void 0,(function(){var o,i,u;return zo(this,(function(s){if(this.options.environment!==Uo.WX_MP)throw new Error("environment type must be wxmp");return o=this.options.getAccessToken(),i=this.getHeaders(o),u={url:t,header:i,method:null!==(r=null==n?void 0:n.method)&&void 0!==r?r:"POST",data:e,dataType:"json"},[2,new Promise((function(t,e){wx.request(Zo(Zo({},u),{success:function(e){t(e)},fail:function(t){e(t)}}))}))]}))}))},e}(Do),Qo=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},Ko=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xo=function(){function t(t){this.config={baseUrl:t.baseUrl,dbProxyUrl:t.dbProxyUrl,getAccessToken:(null==t?void 0:t.getAccessToken)||function(){return console.warn("WARNING: no getAccessToken set for db proxy request"),""},environment:(null==t?void 0:t.environment)||Uo.H5,primaryKey:null==t?void 0:t.primaryKey,timeout:null==t?void 0:t.timeout,headers:null==t?void 0:t.headers,requestClass:null==t?void 0:t.requestClass};var e=this.requestClass;this._request=new e(this.config)}return Object.defineProperty(t.prototype,"requestClass",{get:function(){var t,e,n,r=null===(t=this.config)||void 0===t?void 0:t.environment;return(null===(e=this.config)||void 0===e?void 0:e.requestClass)?null===(n=this.config)||void 0===n?void 0:n.requestClass:r===Uo.UNI_APP?Go:r===Uo.WX_MP?Wo:Do},enumerable:!0,configurable:!0}),t.prototype.database=function(){var t;return new Gn({request:this._request,primaryKey:null===(t=this.config)||void 0===t?void 0:t.primaryKey})},t.prototype.invokeFunction=function(t,e){return Qo(this,void 0,void 0,(function(){var n;return Ko(this,(function(r){switch(r.label){case 0:return n=this.config.baseUrl+"/"+t,[4,this._request.request(n,e)];case 1:return[2,r.sent().data]}}))}))},t.prototype.invoke=function(t,e){return Qo(this,void 0,void 0,(function(){return Ko(this,(function(n){switch(n.label){case 0:return[4,this.invokeFunction(t,e)];case 1:return[2,n.sent()]}}))}))},t}();globalThis.wx&&!globalThis.process&&(globalThis.process={env:{}},console.info("hacked for `process` missing for wechat miniprogram"));var ti={class:"mdui-card-primary w-600px px-2"},ei={class:"mdui-card-content message-content inline-block"},ni={class:"inline-block"};e("default",u({__name:"lafyun",setup(e){var n,i,u,b=new Xo({baseUrl:"https://t2d2l8.lafyun.com:443",getAccessToken:()=>localStorage.getItem("access_token")||""});n="laf",i="laf",t().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().awrap(b.invoke("login",{username:n,password:i}));case 2:return(u=e.sent).access_token&&localStorage.setItem("access_token",u.access_token),e.abrupt("return",u);case 5:case"end":return e.stop()}}),null,null,null,Promise);var w=s([]),_=new WebSocket("wss://t2d2l8.lafyun.com:443");_.onopen=t=>{},_.onmessage=t=>{JSON.parse(t.data).forEach((t=>{if("add"===t.type)w.value.push(t);else if("update"===t.type){var e=w.value.findIndex((e=>e._id==t._id));e>-1?w.value[e]=t:w.value.push(t)}else if("delete"===t.type){var n=w.value.findIndex((e=>e._id==t._id));n>-1&&w.value.splice(n,1)}}))};_.onclose=()=>{};var E=()=>{var t=JSON.stringify({_id:"",type:"add",content:"hi"});_.send(t)};return(t,e)=>{var n=v,i=o,u=r;return a(),f("div",null,[(a(!0),f(c,null,l(g(w),(t=>{var e;return a(),f("div",{key:t._id,class:"mdui-card",style:{margin:"10px 0",width:"500px"}},[h("div",ti,[h("div",ei,[p(d((null===(e=t.object)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.username)+"："+t._id),1),y(n,{modelValue:t.object.content,"onUpdate:modelValue":e=>t.object.content=e,clearable:"",onInput:e=>{return n=t._id,r=t.object.content,o=JSON.stringify({_id:n,type:"update",content:r}),void _.send(o);var n,r,o}},null,8,["modelValue","onUpdate:modelValue","onInput"])]),h("div",ni,[y(i,{class:"relative top-1",onClick:e=>{return n=t._id,r=JSON.stringify({_id:n,type:"delete"}),void _.send(r);var n,r}},null,8,["onClick"])])])])})),128)),y(u,{type:"primary",size:"default",onClick:E},{default:m((()=>[p("发送")])),_:1})])}}}))}}}))}();
