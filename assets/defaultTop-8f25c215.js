/* empty css             *//* empty css                */import{E as $e}from"./popper-bad9a22d.js";import{E as U,a as ge,d as J,u as X,o as V,c as K,w as i,b as Z,m as Le,T as Ve,e as ae,f as me,h as We,g as y,i as be,j as le,k as _e,l as re,n as $,p as Re,q as De,s as ee,t as ue,v as de,x as oe,y as ye,z as L,A as Y,B as Ee,C as je,D as Fe,F as te,G as Se,H as ve,I as Qe,J as Ue,K as qe,L as He,M as Xe,N as Te,O as Ze,r as Ne,P as j,Q as A,R as ne,S as b,U as Q,V as Ge,W as Me,X as Je,Y as Ke,Z as Ye,$ as et,a0 as tt,a1 as Ce,a2 as nt,a3 as v,a4 as O,a5 as ke,a6 as ot,a7 as at,a8 as lt,a9 as st}from"./index-08a94d7c.js";/* empty css              *//* empty css            */import{_ as ut,E as it,a as rt}from"./select-68470c1e.js";import"./scrollbar-8c832c1f.js";import{E as dt}from"./switch-a2264273.js";import{_ as ct}from"./mingyanjinju.vue_vue_type_script_setup_true_lang-47d590f0.js";import{p as Ie}from"./platinum_colors_zh-402f1160.js";import{u as mt}from"./useDarks-8b42b091.js";import{t as ie}from"./aria-bc8e8b0f.js";import{T as pt}from"./index-86a38320.js";import{u as ft}from"./index-fc57844d.js";import{t as ce}from"./event-1da57d2d.js";import{f as vt}from"./vnode-aab1b8d0.js";import{i as we}from"./isNil-c75b1b34.js";import"./constants-0b468837.js";import"./focus-trap-e8af7ae6.js";import"./index-cb2a535a.js";import"./use-form-item-351b2825.js";import"./index-0c61d19d.js";import"./strings-0ffbe5bc.js";import"./scroll-7b4bb15c.js";import"./isEqual-a74b9ffd.js";import"./_baseIsEqual-8f5e917d.js";import"./_Uint8Array-e8c8a997.js";import"./_getTag-eacb9242.js";import"./debounce-f8a15bfa.js";import"./_baseIteratee-61905122.js";import"./identity-46f208ab.js";import"./validator-afe7fbed.js";let ht=class{constructor(t,n){this.parent=t,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",u=>{let a=!1;switch(u.code){case U.down:{this.gotoSubIndex(this.subIndex+1),a=!0;break}case U.up:{this.gotoSubIndex(this.subIndex-1),a=!0;break}case U.tab:{ie(t,"mouseleave");break}case U.enter:case U.space:{a=!0,u.currentTarget.click();break}}return a&&(u.preventDefault(),u.stopPropagation()),!1})})}},gt=class{constructor(t,n){this.domNode=t,this.submenu=null,this.submenu=null,this.init(n)}init(t){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(".".concat(t,"-menu"));n&&(this.submenu=new ht(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let n=!1;switch(t.code){case U.down:{ie(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case U.up:{ie(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case U.tab:{ie(t.currentTarget,"mouseleave");break}case U.enter:case U.space:{n=!0,t.currentTarget.click();break}}n&&t.preventDefault()})}},bt=class{constructor(t,n){this.domNode=t,this.init(n)}init(t){const n=this.domNode.childNodes;Array.from(n).forEach(u=>{u.nodeType===1&&new gt(u,t)})}};const _t=J({name:"ElMenuCollapseTransition",setup(){const e=X("menu");return{listeners:{onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,u){ae(n,"".concat(e.namespace.value,"-opacity-transition")),n.style.opacity="1",u()},onAfterEnter(n){me(n,"".concat(e.namespace.value,"-opacity-transition")),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),We(n,e.m("collapse"))?(me(n,e.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),ae(n,e.m("collapse"))):(ae(n,e.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),me(n,e.m("collapse"))),n.style.width="".concat(n.scrollWidth,"px"),n.style.overflow="hidden"},onLeave(n){ae(n,"horizontal-collapse-transition"),n.style.width="".concat(n.dataset.scrollWidth,"px")}}}}});function yt(e,t,n,u,a,x){return V(),K(Ve,Le({mode:"out-in"},e.listeners),{default:i(()=>[Z(e.$slots,"default")]),_:3},16)}var Mt=ge(_t,[["render",yt],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function Be(e,t){const n=y(()=>{let a=e.parent;const x=[t.value];for(;a.type.name!=="ElMenu";)a.props.index&&x.unshift(a.props.index),a=a.parent;return x});return{parentMenu:y(()=>{let a=e.parent;for(;a&&!["ElMenu","ElSubMenu"].includes(a.type.name);)a=a.parent;return a}),indexPath:n}}function xt(e){return y(()=>{const n=e.backgroundColor;return n?new pt(n).shade(20).toString():""})}const Pe=(e,t)=>{const n=X("menu");return y(()=>n.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":xt(e).value||"","active-color":e.activeTextColor||"",level:"".concat(t)}))},St=be({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:le},expandOpenIcon:{type:le},collapseCloseIcon:{type:le},collapseOpenIcon:{type:le}}),se="ElSubMenu";var xe=J({name:se,props:St,setup(e,{slots:t,expose:n}){ft({from:"popper-append-to-body",replacement:"teleported",scope:se,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},y(()=>e.popperAppendToBody!==void 0));const u=_e(),{indexPath:a,parentMenu:x}=Be(u,y(()=>e.index)),f=X("menu"),I=X("sub-menu"),m=re("rootMenu");m||ce(se,"can not inject root menu");const S=re("subMenu:".concat(x.value.uid));S||ce(se,"can not inject sub menu");const h=$({}),N=$({});let E;const w=$(!1),T=$(),r=$(null),B=y(()=>_.value==="horizontal"&&R.value?"bottom-start":"right-start"),D=y(()=>_.value==="horizontal"&&R.value||_.value==="vertical"&&!m.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?z.value?e.expandOpenIcon:e.expandCloseIcon:Re:e.collapseCloseIcon&&e.collapseOpenIcon?z.value?e.collapseOpenIcon:e.collapseCloseIcon:De),R=y(()=>S.level===0),F=y(()=>{var p;const M=(p=e.teleported)!=null?p:e.popperAppendToBody;return M===void 0?R.value:M}),q=y(()=>m.props.collapse?"".concat(f.namespace.value,"-zoom-in-left"):"".concat(f.namespace.value,"-zoom-in-top")),G=y(()=>_.value==="horizontal"&&R.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),z=y(()=>m.openedMenus.includes(e.index)),g=y(()=>{let p=!1;return Object.values(h.value).forEach(M=>{M.active&&(p=!0)}),Object.values(N.value).forEach(M=>{M.active&&(p=!0)}),p}),_=y(()=>m.props.mode),o=ee({index:e.index,indexPath:a,active:g}),d=Pe(m.props,S.level+1),l=()=>{var p,M,P;return(P=(M=(p=r.value)==null?void 0:p.popperRef)==null?void 0:M.popperInstanceRef)==null?void 0:P.destroy()},s=p=>{p||l()},c=()=>{m.props.menuTrigger==="hover"&&m.props.mode==="horizontal"||m.props.collapse&&m.props.mode==="vertical"||e.disabled||m.handleSubMenuClick({index:e.index,indexPath:a.value,active:g.value})},C=(p,M=e.showTimeout)=>{var P;p.type!=="focus"&&(m.props.menuTrigger==="click"&&m.props.mode==="horizontal"||!m.props.collapse&&m.props.mode==="vertical"||e.disabled||(S.mouseInChild.value=!0,E==null||E(),{stop:E}=Se(()=>{m.openMenu(e.index,a.value)},M),F.value&&((P=x.value.vnode.el)==null||P.dispatchEvent(new MouseEvent("mouseenter")))))},k=(p=!1)=>{var M,P;m.props.menuTrigger==="click"&&m.props.mode==="horizontal"||!m.props.collapse&&m.props.mode==="vertical"||(E==null||E(),S.mouseInChild.value=!1,{stop:E}=Se(()=>!w.value&&m.closeMenu(e.index,a.value),e.hideTimeout),F.value&&p&&((M=u.parent)==null?void 0:M.type.name)==="ElSubMenu"&&((P=S.handleMouseleave)==null||P.call(S,!0)))};ue(()=>m.props.collapse,p=>s(!!p));{const p=P=>{N.value[P.index]=P},M=P=>{delete N.value[P.index]};de("subMenu:".concat(u.uid),{addSubMenu:p,removeSubMenu:M,handleMouseleave:k,mouseInChild:w,level:S.level+1})}return n({opened:z}),oe(()=>{m.addSubMenu(o),S.addSubMenu(o)}),ye(()=>{S.removeSubMenu(o),m.removeSubMenu(o)}),()=>{var p;const M=[(p=t.title)==null?void 0:p.call(t),L(Ee,{class:I.e("icon-arrow"),style:{transform:z.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&m.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Y(D.value)?L(u.appContext.components[D.value]):L(D.value)})],P=m.isMenuPopup?L($e,{ref:r,visible:z.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:B.value,teleported:F.value,fallbackPlacements:G.value,transition:q.value,gpuAcceleration:!1},{content:()=>{var W;return L("div",{class:[f.m(_.value),f.m("popup-container"),e.popperClass],onMouseenter:H=>C(H,100),onMouseleave:()=>k(!0),onFocus:H=>C(H,100)},[L("ul",{class:[f.b(),f.m("popup"),f.m("popup-".concat(B.value))],style:d.value},[(W=t.default)==null?void 0:W.call(t)])])},default:()=>L("div",{class:I.e("title"),onClick:c},M)}):L(te,{},[L("div",{class:I.e("title"),ref:T,onClick:c},M),L(ut,{},{default:()=>{var W;return je(L("ul",{role:"menu",class:[f.b(),f.m("inline")],style:d.value},[(W=t.default)==null?void 0:W.call(t)]),[[Fe,z.value]])}})]);return L("li",{class:[I.b(),I.is("active",g.value),I.is("opened",z.value),I.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:z.value,onMouseenter:C,onMouseleave:()=>k(!0),onFocus:C},[P])}}});const Ct=be({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:ve(Array),default:()=>Qe([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),pe=e=>Array.isArray(e)&&e.every(t=>Y(t)),kt={close:(e,t)=>Y(e)&&pe(t),open:(e,t)=>Y(e)&&pe(t),select:(e,t,n,u)=>Y(e)&&pe(t)&&Xe(n)&&(u===void 0||u instanceof Promise)};var It=J({name:"ElMenu",props:Ct,emits:kt,setup(e,{emit:t,slots:n,expose:u}){const a=_e(),x=a.appContext.config.globalProperties.$router,f=$(),I=X("menu"),m=X("sub-menu"),S=$(-1),h=$(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),N=$(e.defaultActive),E=$({}),w=$({}),T=y(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),r=()=>{const l=N.value&&E.value[N.value];if(!l||e.mode==="horizontal"||e.collapse)return;l.indexPath.forEach(c=>{const C=w.value[c];C&&B(c,C.indexPath)})},B=(l,s)=>{h.value.includes(l)||(e.uniqueOpened&&(h.value=h.value.filter(c=>s.includes(c))),h.value.push(l),t("open",l,s))},D=l=>{const s=h.value.indexOf(l);s!==-1&&h.value.splice(s,1)},R=(l,s)=>{D(l),t("close",l,s)},F=({index:l,indexPath:s})=>{h.value.includes(l)?R(l,s):B(l,s)},q=l=>{(e.mode==="horizontal"||e.collapse)&&(h.value=[]);const{index:s,indexPath:c}=l;if(!(we(s)||we(c)))if(e.router&&x){const C=l.route||s,k=x.push(C).then(p=>(p||(N.value=s),p));t("select",s,c,{index:s,indexPath:c,route:C},k)}else N.value=s,t("select",s,c,{index:s,indexPath:c})},G=l=>{const s=E.value,c=s[l]||N.value&&s[N.value]||s[e.defaultActive];c?N.value=c.index:N.value=l},z=()=>{var l,s;if(!f.value)return-1;const c=Array.from((s=(l=f.value)==null?void 0:l.childNodes)!=null?s:[]).filter(H=>H.nodeName!=="#comment"&&(H.nodeName!=="#text"||H.nodeValue)),C=64,k=Number.parseInt(getComputedStyle(f.value).paddingLeft,10),p=Number.parseInt(getComputedStyle(f.value).paddingRight,10),M=f.value.clientWidth-k-p;let P=0,W=0;return c.forEach((H,Ae)=>{P+=H.offsetWidth||0,P<=M-C&&(W=Ae+1)}),W===c.length?-1:W},g=(l,s=33.34)=>{let c;return()=>{c&&clearTimeout(c),c=setTimeout(()=>{l()},s)}};let _=!0;const o=()=>{const l=()=>{S.value=-1,Te(()=>{S.value=z()})};_?l():g(l)(),_=!1};ue(()=>e.defaultActive,l=>{E.value[l]||(N.value=""),G(l)}),ue(()=>e.collapse,l=>{l&&(h.value=[])}),ue(E.value,r);let d;Ue(()=>{e.mode==="horizontal"&&e.ellipsis?d=qe(f,o).stop:d==null||d()});{const l=k=>{w.value[k.index]=k},s=k=>{delete w.value[k.index]};de("rootMenu",ee({props:e,openedMenus:h,items:E,subMenus:w,activeIndex:N,isMenuPopup:T,addMenuItem:k=>{E.value[k.index]=k},removeMenuItem:k=>{delete E.value[k.index]},addSubMenu:l,removeSubMenu:s,openMenu:B,closeMenu:R,handleMenuItemClick:q,handleSubMenuClick:F})),de("subMenu:".concat(a.uid),{addSubMenu:l,removeSubMenu:s,mouseInChild:$(!1),level:0})}return oe(()=>{e.mode==="horizontal"&&new bt(a.vnode.el,I.namespace.value)}),u({open:s=>{const{indexPath:c}=w.value[s];c.forEach(C=>B(C,c))},close:D,handleResize:o}),()=>{var l,s;let c=(s=(l=n.default)==null?void 0:l.call(n))!=null?s:[];const C=[];if(e.mode==="horizontal"&&f.value){const M=vt(c),P=S.value===-1?M:M.slice(0,S.value),W=S.value===-1?[]:M.slice(S.value);W!=null&&W.length&&e.ellipsis&&(c=P,C.push(L(xe,{index:"sub-menu-more",class:m.e("hide-arrow")},{title:()=>L(Ee,{class:m.e("icon-more")},{default:()=>L(He)}),default:()=>W})))}const k=Pe(e,0),p=L("ul",{key:String(e.collapse),role:"menubar",ref:f,style:k.value,class:{[I.b()]:!0,[I.m(e.mode)]:!0,[I.m("collapse")]:e.collapse}},[...c,...C]);return e.collapseTransition&&e.mode==="vertical"?L(Mt,()=>p):p}}});const wt=be({index:{type:ve([String,null]),default:null},route:{type:ve([String,Object])},disabled:Boolean}),$t={click:e=>Y(e.index)&&Array.isArray(e.indexPath)},fe="ElMenuItem",Et=J({name:fe,components:{ElTooltip:$e},props:wt,emits:$t,setup(e,{emit:t}){const n=_e(),u=re("rootMenu"),a=X("menu"),x=X("menu-item");u||ce(fe,"can not inject root menu");const{parentMenu:f,indexPath:I}=Be(n,Ze(e,"index")),m=re("subMenu:".concat(f.value.uid));m||ce(fe,"can not inject sub menu");const S=y(()=>e.index===u.activeIndex),h=ee({index:e.index,indexPath:I,active:S}),N=()=>{e.disabled||(u.handleMenuItemClick({index:e.index,indexPath:I.value,route:e.route}),t("click",h))};return oe(()=>{m.addSubMenu(h),u.addMenuItem(h)}),ye(()=>{m.removeSubMenu(h),u.removeMenuItem(h)}),{parentMenu:f,rootMenu:u,active:S,nsMenu:a,nsMenuItem:x,handleClick:N}}});function Tt(e,t,n,u,a,x){const f=Ne("el-tooltip");return V(),j("li",{class:ne([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:t[0]||(t[0]=(...I)=>e.handleClick&&e.handleClick(...I))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(V(),K(f,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:i(()=>[Z(e.$slots,"title")]),default:i(()=>[A("div",{class:ne(e.nsMenu.be("tooltip","trigger"))},[Z(e.$slots,"default")],2)]),_:3},8,["effect"])):(V(),j(te,{key:1},[Z(e.$slots,"default"),Z(e.$slots,"title")],64))],2)}var ze=ge(Et,[["render",Tt],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const Nt={title:String},Bt="ElMenuItemGroup",Pt=J({name:Bt,props:Nt,setup(){return{ns:X("menu-item-group")}}});function zt(e,t,n,u,a,x){return V(),j("li",{class:ne(e.ns.b())},[A("div",{class:ne(e.ns.e("title"))},[e.$slots.title?Z(e.$slots,"title",{key:1}):(V(),j(te,{key:0},[b(Q(e.title),1)],64))],2),A("ul",null,[Z(e.$slots,"default")])],2)}var Oe=ge(Pt,[["render",zt],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const Ot=Ge(It,{MenuItem:ze,MenuItemGroup:Oe,SubMenu:xe}),At=Me(ze);Me(Oe);const Lt=Me(xe);const Vt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Wt=A("path",{fill:"currentColor",d:"M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74c0-3.87-3.13-7-7-7m2 11.58V16h-1v-4.59l1.71-1.7c.39-.39.39-1.03 0-1.42c-.39-.39-1.03-.39-1.42 0L12 9.59l-1.29-1.3c-.39-.39-1.03-.39-1.42 0c-.39.39-.39 1.03 0 1.42l1.71 1.7V16h-1v-2.42C8.23 12.81 7 11.05 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.05-1.23 3.81-3 4.58M9 20h6v1c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1v-1Z"},null,-1),Rt=[Wt];function Dt(e,t){return V(),j("svg",Vt,Rt)}const jt={name:"mdi-lightbulb-variant-outline",render:Dt},Ft={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Qt=A("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35Z"},null,-1),Ut=[Qt];function qt(e,t){return V(),j("svg",Ft,Ut)}const Ht={name:"mdi-refresh",render:qt};const Xt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Zt=A("path",{fill:"currentColor",d:"m3.55 19.09l1.41 1.41l1.8-1.79l-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6s6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71l1.8 1.79l1.41-1.41l-1.79-1.8M20.45 5l-1.41-1.4l-1.8 1.79l1.42 1.42M13 1h-2v3h2M6.76 5.39L4.96 3.6L3.55 5l1.79 1.81l1.42-1.42M1 13h3v-2H1m12 9h-2v3h2"},null,-1),Gt=[Zt];function Jt(e,t){return V(),j("svg",Xt,Gt)}const Kt={name:"mdi-white-balance-sunny",render:Jt},Yt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},en=A("path",{fill:"currentColor",d:"M12 2a9.91 9.91 0 0 0-3 .46a10 10 0 0 1 0 19.08A10 10 0 1 0 12 2Z"},null,-1),tn=[en];function nn(e,t){return V(),j("svg",Yt,tn)}const on={name:"mdi-moon-waxing-crescent",render:nn};var he=J({name:"vue3-danmaku",components:{},props:{danmus:{type:Array,required:!0,default:()=>[]},channels:{type:Number,default:0},autoplay:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},useSlot:{type:Boolean,default:!1},debounce:{type:Number,default:100},speeds:{type:Number,default:200},randomChannel:{type:Boolean,default:!1},fontSize:{type:Number,default:18},top:{type:Number,default:4},right:{type:Number,default:0},isSuspend:{type:Boolean,default:!1},extraStyle:{type:String,default:""}},emits:["list-end","play-end","dm-over","dm-out","update:danmus"],setup(e,{emit:t,slots:n}){let u=$(document.createElement("div")),a=$(document.createElement("div"));const x=$(0),f=$(0);let I=0;const m=$(0),S=$(0),h=$(0),N=$(!1),E=$(!1),w=$({}),T=function(g,_,o="modelValue",d){return y({get:()=>g[o],set:l=>{_("update:".concat(o),d?d(l):l)}})}(e,t,"danmus"),r=ee({channels:y(()=>e.channels||m.value),autoplay:y(()=>e.autoplay),loop:y(()=>e.loop),useSlot:y(()=>e.useSlot),debounce:y(()=>e.debounce),randomChannel:y(()=>e.randomChannel)}),B=ee({height:y(()=>S.value),fontSize:y(()=>e.fontSize),speeds:y(()=>e.speeds),top:y(()=>e.top),right:y(()=>e.right)});function D(){R(),e.isSuspend&&function(){let g=[];a.value.addEventListener("mouseover",_=>{let o=_.target;o.className.includes("dm")||(o=o.closest(".dm")||o),o.className.includes("dm")&&(g.includes(o)||(t("dm-over",{el:o}),o.classList.add("pause"),g.push(o)))}),a.value.addEventListener("mouseout",_=>{let o=_.target;o.className.includes("dm")||(o=o.closest(".dm")||o),o.className.includes("dm")&&(t("dm-out",{el:o}),o.classList.remove("pause"),g.forEach(d=>{d.classList.remove("pause")}),g=[])})}(),r.autoplay&&F()}function R(){if(x.value=u.value.offsetWidth,f.value=u.value.offsetHeight,x.value===0||f.value===0)throw new Error("获取不到容器宽高")}function F(){E.value=!1,I||(I=setInterval(()=>function(){if(!E.value&&T.value.length)if(h.value>T.value.length-1){const g=a.value.children.length;r.loop&&(g<h.value&&(t("list-end"),h.value=0),q())}else q()}(),r.debounce))}function q(g){const _=r.loop?h.value%T.value.length:h.value,o=g||T.value[_];let d=document.createElement("div");r.useSlot?d=function(l,s){return Je({render:()=>L("div",{},[n.dm&&n.dm({danmu:l,index:s})])}).mount(document.createElement("div"))}(o,_).$el:(d.innerHTML=o,d.setAttribute("style",e.extraStyle),d.style.fontSize="".concat(B.fontSize,"px"),d.style.lineHeight="".concat(B.fontSize,"px")),d.classList.add("dm"),a.value.appendChild(d),d.style.opacity="0",Te(()=>{B.height||(S.value=d.offsetHeight),r.channels||(m.value=Math.floor(f.value/(B.height+B.top)));let l=function(s){let c=[...Array(r.channels).keys()];r.randomChannel&&(c=c.sort(()=>.5-Math.random()));for(let C of c){const k=w.value[C];if(!k||!k.length)return w.value[C]=[s],s.addEventListener("animationend",()=>w.value[C].splice(0,1)),C%r.channels;for(let p=0;p<k.length;p++){const M=G(k[p])-10;if(M<=.88*(s.offsetWidth-k[p].offsetWidth)||M<=0)break;if(p===k.length-1)return w.value[C].push(s),s.addEventListener("animationend",()=>w.value[C].splice(0,1)),C%r.channels}}return-1}(d);if(l>=0){const s=d.offsetWidth,c=B.height;d.classList.add("move"),d.dataset.index="".concat(_),d.style.opacity="1",d.style.top=l*(c+B.top)+"px",d.style.width=s+B.right+"px",d.style.setProperty("--dm-scroll-width","-".concat(x.value+s,"px")),d.style.left="".concat(x.value,"px"),d.style.animationDuration=x.value/B.speeds+"s",d.addEventListener("animationend",()=>{Number(d.dataset.index)!==T.value.length-1||r.loop||t("play-end",d.dataset.index),a.value&&a.value.removeChild(d)}),h.value++}else a.value.removeChild(d)})}function G(g){const _=g.offsetWidth||parseInt(g.style.width),o=g.getBoundingClientRect().right||a.value.getBoundingClientRect().right+_;return a.value.getBoundingClientRect().right-o}function z(){clearInterval(I),I=0,h.value=0}return oe(()=>{D()}),ye(()=>{z()}),{container:u,dmContainer:a,hidden:N,paused:E,danmuList:T,getPlayState:function(){return!E.value},resize:function(){R();const g=a.value.getElementsByClassName("dm");for(let _=0;_<g.length;_++){const o=g[_];o.style.setProperty("--dm-scroll-width","-".concat(x.value+o.offsetWidth,"px")),o.style.left="".concat(x.value,"px"),o.style.animationDuration=x.value/B.speeds+"s"}},play:F,pause:function(){E.value=!0},stop:function(){w.value={},a.value.innerHTML="",E.value=!0,N.value=!1,z()},show:function(){N.value=!1},hide:function(){N.value=!0},reset:function(){S.value=0,D()},add:function(g){if(h.value===T.value.length)return T.value.push(g),T.value.length-1;{const _=h.value%T.value.length;return T.value.splice(_,0,g),_+1}},push:function(g){return T.value.push(g),T.value.length-1},insert:q}}});const an={ref:"container",class:"vue-danmaku"};(function(e,t){t===void 0&&(t={});var n=t.insertAt;if(e&&typeof document<"u"){var u=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&u.firstChild?u.insertBefore(a,u.firstChild):u.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}})(".vue-danmaku {\n  position: relative;\n  overflow: hidden;\n}\n.vue-danmaku .danmus {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.vue-danmaku .danmus.show {\n  opacity: 1;\n}\n.vue-danmaku .danmus.paused .dm.move {\n  animation-play-state: paused;\n}\n.vue-danmaku .danmus .dm {\n  position: absolute;\n  font-size: 20px;\n  color: #ddd;\n  white-space: pre;\n  transform: translateX(0);\n  transform-style: preserve-3d;\n}\n.vue-danmaku .danmus .dm.move {\n  will-change: transform;\n  animation-name: moveLeft;\n  animation-timing-function: linear;\n  animation-play-state: running;\n}\n.vue-danmaku .danmus .dm.pause {\n  animation-play-state: paused;\n  z-index: 100;\n}\n@keyframes moveLeft {\n  from {\n    transform: translateX(0);\n  }\n  to {\n    transform: translateX(var(--dm-scroll-width));\n  }\n}\n@-webkit-keyframes moveLeft {\n  from {\n    -webkit-transform: translateX(0);\n  }\n  to {\n    -webkit-transform: translateX(var(--dm-scroll-width));\n  }\n}"),he.render=function(e,t,n,u,a,x){return V(),j("div",an,[A("div",{ref:"dmContainer",class:ne(["danmus",{show:!e.hidden},{paused:e.paused}])},null,2),Z(e.$slots,"default")],512)},he.__file="src/lib/Danmaku.vue";const ln={class:"flex-grow relative"},sn={class:"flex text-purple-600 flex-row items-center justify-center h-full"},un={class:"absolute bottom-4 right-28 text-xs flex items-end"},rn={class:"absolute bottom-0 right-4 text-xs flex items-end"},dn={class:"flex flex-col items-center justify-center text-12px"},cn={class:"text-#9a6700 text-14px"},mn=A("div",{class:"rotate-90"},"随机",-1),pn=A("div",{class:"z-10 fill-transparent animate-bounce animate-count-infinite animate-duration-3s"}," 图片 ",-1),fn={href:"https://github.com/fangtianq/tov-template",target:"_blank",class:"hover:border-b-orange-300 hover:border-b-2"},vn=["id"],Kn=J({__name:"defaultTop",setup(e){var E;const t=$(),n=$();de(Ke.REFDANMU,n);const u=w=>w.user?w.user.username+"："+w.content:w;oe(()=>{});const a=Ye(),{isDark:x}=mt(),f=et(),I=tt(),m=Ce(),S=nt()(),h=$((E=Ce())==null?void 0:E.path),N=w=>{w==="/demo/randomPic"&&(I.push(w),m.path==w&&I.replace("/refresh"))};return(w,T)=>{const r=At,B=Ht,D=ct,R=dt,F=rt,q=it,G=jt,z=Lt,g=Ot,_=Ne("router-view");return V(),j(te,null,[v(g,{"default-active":O(h),class:"el-menu-demo",mode:"horizontal",ellipsis:!1,router:!0,onSelect:N},{default:i(()=>[v(r,{index:"/"},{default:i(()=>[b(Q(O(f).t("header.shouye")),1)]),_:1}),A("div",ln,[v(D,null,{default:i(({mingyan:o,refresh:d,hitokoto:l})=>[A("div",sn,[A("div",null,Q(l),1)]),A("div",un,[b(Q("--来自：".concat(o.creator,"(").concat(o.from,")"))+" ",1),v(B,{class:"text-indigo-600 cursor-pointer",onClick:d},null,8,["onClick"])]),A("div",rn,Q("".concat(O(ot)(o.created_at).format())),1)]),_:1})]),A("div",dn,[v(R,{modelValue:O(x),"onUpdate:modelValue":T[0]||(T[0]=o=>ke(x)?x.value=o:null),"active-value":!0,"inactive-value":!1,"inline-prompt":"",style:"--el-switch-on-color: #2c2c2c; --el-switch-off-color: #f2f2f2","active-icon":O(on),"inactive-icon":O(Kt)},null,8,["modelValue","active-icon","inactive-icon"]),v(q,{modelValue:O(f).locale.value,"onUpdate:modelValue":T[1]||(T[1]=o=>O(f).locale.value=o),size:"small",class:"w-14"},{default:i(()=>[(V(!0),j(te,null,at(O(f).availableLocales,o=>(V(),K(F,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),v(r,{index:"/demo"},{default:i(()=>[b(Q(O(f).t("header.yangli")),1)]),_:1}),v(z,{index:"2"},{title:i(()=>[b("Workspace")]),default:i(()=>[v(r,{index:"/demo/user/pinia"},{default:i(()=>[b("pinia")]),_:1}),v(r,{index:"/about"},{default:i(()=>[b("about")]),_:1}),v(r,{index:"/test"},{default:i(()=>[b("test")]),_:1}),v(r,{index:"/temp/test"},{default:i(()=>[b("temptest")]),_:1}),v(z,{index:"3"},{title:i(()=>[A("span",cn,[v(G),b("FTQPriSpringbootVueBlog")])]),default:i(()=>[v(r,{index:"/pri/FTQPriSpringbootVueBlog"},{default:i(()=>[b("blogserver")]),_:1}),v(r,{index:"/pri/FTQPriSpringbootVueBlog/Spring-Boot-Security-Authorization"},{default:i(()=>[b("Spring-Boot-Security-Authorization")]),_:1}),v(r,{index:"/pri/FTQPriSpringbootVueBlog/Spring-Boot-Shiro-Authorization"},{default:i(()=>[b("Spring-Boot-Shiro-Authorization")]),_:1})]),_:1})]),_:1}),v(r,{index:"/demo/randomPic"},{default:i(()=>[mn,pn]),_:1}),v(r,{index:"/app"},{default:i(()=>[b("导航")]),_:1}),A("a",fn,[v(r,null,{default:i(()=>[b(Q(O(f).t("header.bangzhu")),1)]),_:1})]),O(S)?(V(),K(z,{key:0,index:""},{title:i(()=>[b("Signed in as "+Q(O(S).getUsername()),1)]),default:i(()=>[v(z,{index:"pri"},{title:i(()=>[b("样例页面")]),default:i(()=>[v(r,{index:"/pri/arenaOfValor/bronze",desc:"青铜"},{default:i(()=>[b("LiveQuery(leancloud)")]),_:1}),v(r,{index:"/pri/FTQPriSpringbootVueBlog/siderPage/liveQuery"},{default:i(()=>[b("socket(FTQPriSpringbootVueBlog)")]),_:1}),v(r,{index:"/pri/arenaOfValor/lafyun"},{default:i(()=>[b("socket(lafyun)")]),_:1}),v(r,{index:"/pri/arenaOfValor/gold"},{default:i(()=>[b("Threejs")]),_:1}),v(r,{index:"/pri/arenaOfValor/platinum"},{default:i(()=>[b("中国红")]),_:1}),v(r,{index:"/pri/arenaOfValor/diamond",desc:"钻石"},{default:i(()=>[b("useBroadcastChannel")]),_:1}),v(r,{index:"/pri/arenaOfValor/xingyao"},{default:i(()=>[b("m3u8-downloader")]),_:1}),v(r,{index:"/pri/arenaOfValor/king"},{default:i(()=>[b("zip上传解析")]),_:1}),v(r,{index:"/pri/fun/tgrj"},{default:i(()=>[b("甜狗日记")]),_:1})]),_:1}),O(a)?(V(),K(z,{key:0,index:"pri1"},{title:i(()=>[b("管理员")]),default:i(()=>[v(r,{index:"/admin/notepad"},{default:i(()=>[b("笔记本")]),_:1})]),_:1})):lt("",!0),v(r,{index:"/signout"},{default:i(()=>[b("Sign out")]),_:1})]),_:1})):(V(),K(r,{key:1,index:"/login"},{default:i(()=>[b(Q(O(f).t("header.denglu")),1)]),_:1}))]),_:1},8,["default-active"]),v(O(he),{ref_key:"danmakuRef",ref:n,danmus:O(t),"onUpdate:danmus":T[2]||(T[2]=o=>ke(t)?t.value=o:null),"random-channel":!0,"is-suspend":!0,"use-slot":""},{dm:i(({index:o,danmu:d})=>[A("span",{id:"danmu"+o,style:st({position:"sticky",color:O(Ie)[Math.floor(Math.random()*O(Ie).length)].hex})},Q(u(d)),13,vn)]),default:i(()=>[v(_)]),_:1},8,["danmus"])],64)}}});export{Kn as default};
