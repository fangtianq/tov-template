import{i as Y,a as K,d as P,l as se,u as J,n as d,g as H,y as le,bQ as D,O as j,o as T,c as W,w as Z,C as oe,Q as $,R as C,a4 as m,a9 as X,D as re,T as ne,bh as ee,P as te,a3 as F,F as ie,H as ce,aI as _,aJ as I,t as U,K as ue,N as V,v as fe,s as ve,x as de,bR as me,b as pe,al as he,a8 as be,M as ge,V as ye,bs as we}from"./index-08a94d7c.js";import{t as Se}from"./event-1da57d2d.js";const E=4,ze={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ee=({move:s,size:t,bar:a})=>({[a.size]:t,transform:"translate".concat(a.axis,"(").concat(s,"%)")}),ae=Symbol("scrollbarContextKey"),He=Y({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ke="Thumb",_e=P({__name:"thumb",props:He,setup(s){const t=s,a=se(ae),l=J("scrollbar");a||Se(ke,"can not inject scrollbar context");const i=d(),u=d(),n=d({}),v=d(!1);let r=!1,p=!1,h=ee?document.onselectstart:null;const o=H(()=>ze[t.vertical?"vertical":"horizontal"]),g=H(()=>Ee({size:t.size,move:t.move,bar:o.value})),y=H(()=>i.value[o.value.offset]**2/a.wrapElement[o.value.scrollSize]/t.ratio/u.value[o.value.offset]),w=c=>{var e;if(c.stopPropagation(),c.ctrlKey||[1,2].includes(c.button))return;(e=window.getSelection())==null||e.removeAllRanges(),M(c);const f=c.currentTarget;f&&(n.value[o.value.axis]=f[o.value.offset]-(c[o.value.client]-f.getBoundingClientRect()[o.value.direction]))},x=c=>{if(!u.value||!i.value||!a.wrapElement)return;const e=Math.abs(c.target.getBoundingClientRect()[o.value.direction]-c[o.value.client]),f=u.value[o.value.offset]/2,S=(e-f)*100*y.value/i.value[o.value.offset];a.wrapElement[o.value.scroll]=S*a.wrapElement[o.value.scrollSize]/100},M=c=>{c.stopImmediatePropagation(),r=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",z),h=document.onselectstart,document.onselectstart=()=>!1},R=c=>{if(!i.value||!u.value||r===!1)return;const e=n.value[o.value.axis];if(!e)return;const f=(i.value.getBoundingClientRect()[o.value.direction]-c[o.value.client])*-1,S=u.value[o.value.offset]-e,k=(f-S)*100*y.value/i.value[o.value.offset];a.wrapElement[o.value.scroll]=k*a.wrapElement[o.value.scrollSize]/100},z=()=>{r=!1,n.value[o.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",z),L(),p&&(v.value=!1)},O=()=>{p=!1,v.value=!!t.size},A=()=>{p=!0,v.value=r};le(()=>{L(),document.removeEventListener("mouseup",z)});const L=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return D(j(a,"scrollbarElement"),"mousemove",O),D(j(a,"scrollbarElement"),"mouseleave",A),(c,e)=>(T(),W(ne,{name:m(l).b("fade"),persisted:""},{default:Z(()=>[oe($("div",{ref_key:"instance",ref:i,class:C([m(l).e("bar"),m(l).is(m(o).key)]),onMousedown:x},[$("div",{ref_key:"thumb",ref:u,class:C(m(l).e("thumb")),style:X(m(g)),onMousedown:w},null,38)],34),[[re,c.always||v.value]])]),_:1},8,["name"]))}});var Q=K(_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Te=Y({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ce=P({__name:"bar",props:Te,setup(s,{expose:t}){const a=s,l=d(0),i=d(0);return t({handleScroll:n=>{if(n){const v=n.offsetHeight-E,r=n.offsetWidth-E;i.value=n.scrollTop*100/v*a.ratioY,l.value=n.scrollLeft*100/r*a.ratioX}}}),(n,v)=>(T(),te(ie,null,[F(Q,{move:l.value,ratio:n.ratioX,size:n.width,always:n.always},null,8,["move","ratio","size","always"]),F(Q,{move:i.value,ratio:n.ratioY,size:n.height,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Re=K(Ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Le=Y({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ce([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),Be={scroll:({scrollTop:s,scrollLeft:t})=>[s,t].every(_)},Ne="ElScrollbar",Pe=P({name:Ne}),xe=P({...Pe,props:Le,emits:Be,setup(s,{expose:t,emit:a}){const l=s,i=J("scrollbar");let u,n;const v=d(),r=d(),p=d(),h=d("0"),o=d("0"),g=d(),y=d(1),w=d(1),x=H(()=>{const e={};return l.height&&(e.height=I(l.height)),l.maxHeight&&(e.maxHeight=I(l.maxHeight)),[l.wrapStyle,e]}),M=H(()=>[l.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!l.native}]),R=H(()=>[i.e("view"),l.viewClass]),z=()=>{var e;r.value&&((e=g.value)==null||e.handleScroll(r.value),a("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function O(e,f){ge(e)?r.value.scrollTo(e):_(e)&&_(f)&&r.value.scrollTo(e,f)}const A=e=>{_(e)&&(r.value.scrollTop=e)},L=e=>{_(e)&&(r.value.scrollLeft=e)},c=()=>{if(!r.value)return;const e=r.value.offsetHeight-E,f=r.value.offsetWidth-E,S=e**2/r.value.scrollHeight,k=f**2/r.value.scrollWidth,B=Math.max(S,l.minSize),N=Math.max(k,l.minSize);y.value=S/(e-S)/(B/(e-B)),w.value=k/(f-k)/(N/(f-N)),o.value=B+E<e?"".concat(B,"px"):"",h.value=N+E<f?"".concat(N,"px"):""};return U(()=>l.noresize,e=>{e?(u==null||u(),n==null||n()):({stop:u}=ue(p,c),n=D("resize",c))},{immediate:!0}),U(()=>[l.maxHeight,l.height],()=>{l.native||V(()=>{var e;c(),r.value&&((e=g.value)==null||e.handleScroll(r.value))})}),fe(ae,ve({scrollbarElement:v,wrapElement:r})),de(()=>{l.native||V(()=>{c()})}),me(()=>c()),t({wrapRef:r,update:c,scrollTo:O,setScrollTop:A,setScrollLeft:L,handleScroll:z}),(e,f)=>(T(),te("div",{ref_key:"scrollbarRef",ref:v,class:C(m(i).b())},[$("div",{ref_key:"wrapRef",ref:r,class:C(m(M)),style:X(m(x)),onScroll:z},[(T(),W(he(e.tag),{id:e.id,ref_key:"resizeRef",ref:p,class:C(m(R)),style:X(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Z(()=>[pe(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?be("v-if",!0):(T(),W(Re,{key:0,ref_key:"barRef",ref:g,height:o.value,width:h.value,always:e.always,"ratio-x":w.value,"ratio-y":y.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Me=K(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const De=ye(Me),b=new Map;let q;ee&&(document.addEventListener("mousedown",s=>q=s),document.addEventListener("mouseup",s=>{for(const t of b.values())for(const{documentHandler:a}of t)a(s,q)}));function G(s,t){let a=[];return Array.isArray(t.arg)?a=t.arg:we(t.arg)&&a.push(t.arg),function(l,i){const u=t.instance.popperRef,n=l.target,v=i==null?void 0:i.target,r=!t||!t.instance,p=!n||!v,h=s.contains(n)||s.contains(v),o=s===n,g=a.length&&a.some(w=>w==null?void 0:w.contains(n))||a.length&&a.includes(v),y=u&&(u.contains(n)||u.contains(v));r||p||h||o||g||y||t.value(l,i)}}const We={beforeMount(s,t){b.has(s)||b.set(s,[]),b.get(s).push({documentHandler:G(s,t),bindingFn:t.value})},updated(s,t){b.has(s)||b.set(s,[]);const a=b.get(s),l=a.findIndex(u=>u.bindingFn===t.oldValue),i={documentHandler:G(s,t),bindingFn:t.value};l>=0?a.splice(l,1,i):a.push(i)},unmounted(s){b.delete(s)}};export{We as C,De as E};
