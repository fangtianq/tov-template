System.register(["./stats.module-legacy.d830d176.js","./index-legacy.7a69c0b7.js"],(function(e,t){"use strict";var r,a,n,i,o,s,c,l,d,u,f,h,m,p,v,g,b,y,N,w,x,k,A,T,_,E,C,R,L,I,j,O,q,H,S,M,z,U,P,F,G,B,D,V,J,W,X,Y,Z;return{setters:[e=>{r=e.ar,a=e.u,n=e.L,i=e.i,o=e.F,s=e.V,c=e.o,l=e.l,d=e.e,u=e.p,f=e.C,h=e.Z,m=e.a0,p=e.ad,v=e.af,g=e.as,b=e.am,y=e.a,N=e.z,w=e.aa,x=e.P,k=e._,A=e.at,T=e.j,_=e.k,E=e.D,C=e.H,R=e.au,L=e.Y,I=e.Q,j=e.m,O=e.a1,q=e.x,H=e.J,S=e.c,M=e.N,z=e.K,U=e.R,P=e.a7,F=e.$,G=e.W,B=e.ap,D=e.d,V=e.aq,J=e.av},e=>{W=e.d,X=e.h,Y=e.o,Z=e.a}],execute:function(){class K extends r{constructor(e){super(e)}parse(e){var t=0,r=1,n=2,i=3,o=9,s=10,c=11,l=48,d=4,u=0,f=1,h=2,m=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var p=0,v=new Uint8Array(e),g={id_length:v[p++],colormap_type:v[p++],image_type:v[p++],colormap_index:v[p++]|v[p++]<<8,colormap_length:v[p++]|v[p++]<<8,colormap_size:v[p++],origin:[v[p++]|v[p++]<<8,v[p++]|v[p++]<<8],width:v[p++]|v[p++]<<8,height:v[p++]|v[p++]<<8,pixel_size:v[p++],flags:v[p++]};!function(e){switch(e.image_type){case r:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case n:case i:case s:case c:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(g),g.id_length+p>e.length&&console.error("THREE.TGALoader: No data."),p+=g.id_length;var b=!1,y=!1,N=!1;switch(g.image_type){case o:b=!0,y=!0;break;case r:y=!0;break;case s:b=!0;break;case n:break;case c:b=!0,N=!0;break;case i:N=!0}var w=new Uint8Array(g.width*g.height*4),x=function(e,t,r,a,n){var i,o,s=r.pixel_size>>3,c=r.width*r.height*s;if(t&&(o=n.subarray(a,a+=r.colormap_length*(r.colormap_size>>3))),e){var l,d,u;i=new Uint8Array(c);for(var f=0,h=new Uint8Array(s);f<c;)if(d=1+(127&(l=n[a++])),128&l){for(u=0;u<s;++u)h[u]=n[a++];for(u=0;u<d;++u)i.set(h,f+u*s);f+=s*d}else{for(d*=s,u=0;u<d;++u)i[f+u]=n[a++];f+=d}}else i=n.subarray(a,a+=t?r.width*r.height:c);return{pixel_data:i,palettes:o}}(b,y,g,p,v);return function(e,t,r,a,n){var i,o,s,c,p,v;switch((g.flags&l)>>d){default:case h:i=0,s=1,p=t,o=0,c=1,v=r;break;case u:i=0,s=1,p=t,o=r-1,c=-1,v=-1;break;case m:i=t-1,s=-1,p=-1,o=0,c=1,v=r;break;case f:i=t-1,s=-1,p=-1,o=r-1,c=-1,v=-1}if(N)switch(g.pixel_size){case 8:!function(e,t,r,a,n,i,o,s){var c,l,d,u=0,f=g.width;for(d=t;d!==a;d+=r)for(l=n;l!==o;l+=i,u++)c=s[u],e[4*(l+f*d)+0]=c,e[4*(l+f*d)+1]=c,e[4*(l+f*d)+2]=c,e[4*(l+f*d)+3]=255}(e,o,c,v,i,s,p,a);break;case 16:!function(e,t,r,a,n,i,o,s){var c,l,d=0,u=g.width;for(l=t;l!==a;l+=r)for(c=n;c!==o;c+=i,d+=2)e[4*(c+u*l)+0]=s[d+0],e[4*(c+u*l)+1]=s[d+0],e[4*(c+u*l)+2]=s[d+0],e[4*(c+u*l)+3]=s[d+1]}(e,o,c,v,i,s,p,a);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(g.pixel_size){case 8:!function(e,t,r,a,n,i,o,s,c){var l,d,u,f=c,h=0,m=g.width;for(u=t;u!==a;u+=r)for(d=n;d!==o;d+=i,h++)l=s[h],e[4*(d+m*u)+3]=255,e[4*(d+m*u)+2]=f[3*l+0],e[4*(d+m*u)+1]=f[3*l+1],e[4*(d+m*u)+0]=f[3*l+2]}(e,o,c,v,i,s,p,a,n);break;case 16:!function(e,t,r,a,n,i,o,s){var c,l,d,u=0,f=g.width;for(d=t;d!==a;d+=r)for(l=n;l!==o;l+=i,u+=2)c=s[u+0]+(s[u+1]<<8),e[4*(l+f*d)+0]=(31744&c)>>7,e[4*(l+f*d)+1]=(992&c)>>2,e[4*(l+f*d)+2]=(31&c)<<3,e[4*(l+f*d)+3]=32768&c?0:255}(e,o,c,v,i,s,p,a);break;case 24:!function(e,t,r,a,n,i,o,s){var c,l,d=0,u=g.width;for(l=t;l!==a;l+=r)for(c=n;c!==o;c+=i,d+=3)e[4*(c+u*l)+3]=255,e[4*(c+u*l)+2]=s[d+0],e[4*(c+u*l)+1]=s[d+1],e[4*(c+u*l)+0]=s[d+2]}(e,o,c,v,i,s,p,a);break;case 32:!function(e,t,r,a,n,i,o,s){var c,l,d=0,u=g.width;for(l=t;l!==a;l+=r)for(c=n;c!==o;c+=i,d+=4)e[4*(c+u*l)+2]=s[d+0],e[4*(c+u*l)+1]=s[d+1],e[4*(c+u*l)+0]=s[d+2],e[4*(c+u*l)+3]=s[d+3]}(e,o,c,v,i,s,p,a);break;default:console.error("THREE.TGALoader: Format not supported.")}}(w,g.width,g.height,x.pixel_data,x.palettes),{data:w,width:g.width,height:g.height,flipY:!0,generateMipmaps:!0,minFilter:a}}}class Q extends n{constructor(e){super(e)}load(e,t,r,a){var n=this,s=""===n.path?i.extractUrlBase(e):n.path,c=new o(n.manager);c.setPath(n.path),c.setRequestHeader(n.requestHeader),c.setWithCredentials(n.withCredentials),c.load(e,(function(r){try{t(n.parse(r,s))}catch(i){a?a(i):console.error(i),n.manager.itemError(e)}}),r,a)}parse(e,t){function r(e,t){for(var r=[],a=e.childNodes,n=0,i=a.length;n<i;n++){var o=a[n];o.nodeName===t&&r.push(o)}return r}function a(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),a=0,n=t.length;a<n;a++)r[a]=t[a];return r}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),a=0,n=t.length;a<n;a++)r[a]=parseFloat(t[a]);return r}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),a=0,n=t.length;a<n;a++)r[a]=parseInt(t[a]);return r}function G(e){return e.substring(1)}function B(e){return 0===Object.keys(e).length}function D(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function V(e){return void 0!==e?e.textContent:"Y_UP"}function J(e,t,a,n){var i=r(e,t)[0];if(void 0!==i)for(var o=r(i,a),s=0;s<o.length;s++)n(o[s])}function W(e,t){for(var r in e)e[r].build=t(e[r])}function X(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function Y(e){for(var t={inputs:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType&&"input"===n.nodeName){var i=G(n.getAttribute("source")),o=n.getAttribute("semantic");t.inputs[o]=i}}return t}function Z(e){var t={},r=e.getAttribute("target").split("/"),a=r.shift(),n=r.shift(),i=-1!==n.indexOf("("),o=-1!==n.indexOf(".");if(o)r=n.split("."),n=r.shift(),t.member=r.shift();else if(i){var s=n.split("(");n=s.shift();for(var c=0;c<s.length;c++)s[c]=parseInt(s[c].replace(/\)/,""));t.indices=s}return t.id=a,t.sid=n,t.arraySyntax=i,t.memberSyntax=o,t.sampler=G(e.getAttribute("source")),t}function Q(e){var t=[],r=e.channels,a=e.samplers,n=e.sources;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],s=a[o.sampler],c=s.inputs.INPUT,l=s.inputs.OUTPUT;ne(ee(o,n[c],n[l]),t)}return t}function $(e){return X(Ht.animations[e],Q)}function ee(e,t,r){var a,n,i,o,s,c,l=Ht.nodes[e.id],d=yt(l.id),u=l.transforms[e.sid],f=l.matrix.clone().transpose(),h={};switch(u){case"matrix":for(i=0,o=t.array.length;i<o;i++)if(a=t.array[i],n=i*r.stride,void 0===h[a]&&(h[a]={}),!0===e.arraySyntax){var m=r.array[n],p=e.indices[0]+4*e.indices[1];h[a][p]=m}else for(s=0,c=r.stride;s<c;s++)h[a][s]=r.array[n+s];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',u)}var v=function(e,t){var r=[];for(var a in e)r.push({time:parseFloat(a),value:e[a]});r.sort(i);for(var n=0;n<16;n++)ie(r,n,t.elements[n]);return r;function i(e,t){return e.time-t.time}}(h,f);return{name:d.uuid,keyframes:v}}var te=new s,re=new s,ae=new I;function ne(e,t){for(var r=e.keyframes,a=e.name,n=[],i=[],o=[],s=[],c=0,l=r.length;c<l;c++){var d=r[c],u=d.time,f=d.value;ct.fromArray(f).transpose(),ct.decompose(te,ae,re),n.push(u),i.push(te.x,te.y,te.z),o.push(ae.x,ae.y,ae.z,ae.w),s.push(re.x,re.y,re.z)}return i.length>0&&t.push(new p(a+".position",n,i)),o.length>0&&t.push(new v(a+".quaternion",n,o)),s.length>0&&t.push(new p(a+".scale",n,s)),t}function ie(e,t,r){var a,n,i,o=!0;for(n=0,i=e.length;n<i;n++)void 0===(a=e[n]).value[t]?a.value[t]=null:o=!1;if(!0===o)for(n=0,i=e.length;n<i;n++)(a=e[n]).value[t]=r;else!function(e,t){for(var r,a,n=0,i=e.length;n<i;n++){var o=e[n];if(null===o.value[t]){if(r=oe(e,n,t),a=se(e,n,t),null===r){o.value[t]=a.value[t];continue}if(null===a){o.value[t]=r.value[t];continue}ce(o,r,a,t)}}}(e,t)}function oe(e,t,r){for(;t>=0;){var a=e[t];if(null!==a.value[r])return a;t--}return null}function se(e,t,r){for(;t<e.length;){var a=e[t];if(null!==a.value[r])return a;t++}return null}function ce(e,t,r,a){r.time-t.time!=0?e.value[a]=(e.time-t.time)*(r.value[a]-t.value[a])/(r.time-t.time)+t.value[a]:e.value[a]=t.value[a]}function le(e){for(var t=[],r=e.name,a=e.end-e.start||-1,n=e.animations,i=0,o=n.length;i<o;i++)for(var s=$(n[i]),c=0,l=s.length;c<l;c++)t.push(s[c]);return new m(r,a,t)}function de(e){return X(Ht.clips[e],le)}function ue(e){for(var t={sources:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=i(n.textContent);break;case"source":var o=n.getAttribute("id");t.sources[o]=Ge(n);break;case"joints":t.joints=fe(n);break;case"vertex_weights":t.vertexWeights=he(n)}}return t}function fe(e){for(var t={inputs:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType&&"input"===n.nodeName){var i=n.getAttribute("semantic"),o=G(n.getAttribute("source"));t.inputs[i]=o}}return t}function he(e){for(var t={inputs:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"input":var i=n.getAttribute("semantic"),s=G(n.getAttribute("source")),c=parseInt(n.getAttribute("offset"));t.inputs[i]={id:s,offset:c};break;case"vcount":t.vcount=o(n.textContent);break;case"v":t.v=o(n.textContent)}}return t}function me(e){var t={id:e.id},r=Ht.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,r,a,n=4,i={joints:[],indices:{array:[],stride:n},weights:{array:[],stride:n}},o=e.sources,s=e.vertexWeights,l=s.vcount,d=s.v,u=s.inputs.JOINT.offset,f=s.inputs.WEIGHT.offset,h=e.sources[e.joints.inputs.JOINT],m=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=o[s.inputs.WEIGHT.id].array,v=0;for(t=0,a=l.length;t<a;t++){var g=l[t],b=[];for(r=0;r<g;r++){var y=d[v+u],N=p[d[v+f]];b.push({index:y,weight:N}),v+=2}for(b.sort(A),r=0;r<n;r++){var w=b[r];void 0!==w?(i.indices.array.push(w.index),i.weights.array.push(w.weight)):(i.indices.array.push(0),i.weights.array.push(0))}}for(e.bindShapeMatrix?i.bindMatrix=(new c).fromArray(e.bindShapeMatrix).transpose():i.bindMatrix=(new c).identity(),t=0,a=h.array.length;t<a;t++){var x=h.array[t],k=(new c).fromArray(m.array,t*m.stride).transpose();i.joints.push({name:x,boneInverse:k})}return i;function A(e,t){return t.weight-e.weight}}(e.skin),r.sources.skinIndices=t.skin.indices,r.sources.skinWeights=t.skin.weights),t}function pe(e){return void 0!==e.build?e.build:e.init_from}function ve(e){var t=Ht.images[e];return void 0!==t?X(t,pe):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function ge(e){for(var t={surfaces:{},samplers:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"newparam":be(n,t);break;case"technique":t.technique=we(n);break;case"extra":t.extra=Ee(n)}}return t}function be(e,t){for(var r=e.getAttribute("sid"),a=0,n=e.childNodes.length;a<n;a++){var i=e.childNodes[a];if(1===i.nodeType)switch(i.nodeName){case"surface":t.surfaces[r]=ye(i);break;case"sampler2D":t.samplers[r]=Ne(i)}}}function ye(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"init_from"===n.nodeName&&(t.init_from=n.textContent)}return t}function Ne(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"source"===n.nodeName&&(t.source=n.textContent)}return t}function we(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=n.nodeName,t.parameters=xe(n);break;case"extra":t.extra=Ee(n)}}return t}function xe(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[n.nodeName]=ke(n);break;case"transparent":t[n.nodeName]={opaque:n.hasAttribute("opaque")?n.getAttribute("opaque"):"A_ONE",data:ke(n)}}}return t}function ke(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"color":t[n.nodeName]=i(n.textContent);break;case"float":t[n.nodeName]=parseFloat(n.textContent);break;case"texture":t[n.nodeName]={id:n.getAttribute("texture"),extra:Ae(n)}}}return t}function Ae(e){for(var t={technique:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"extra"===n.nodeName&&Te(n,t)}return t}function Te(e,t){for(var r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"technique"===n.nodeName&&_e(n,t)}}function _e(e,t){for(var r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?t.technique[n.nodeName]=1:"FALSE"===n.textContent.toUpperCase()?t.technique[n.nodeName]=0:t.technique[n.nodeName]=parseInt(n.textContent);break;case"bump":t[n.nodeName]=Re(n)}}}function Ee(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"technique"===n.nodeName&&(t.technique=Ce(n))}return t}function Ce(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"double_sided":t[n.nodeName]=parseInt(n.textContent);break;case"bump":t[n.nodeName]=Re(n)}}return t}function Re(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"texture"===n.nodeName&&(t[n.nodeName]={id:n.getAttribute("texture"),texcoord:n.getAttribute("texcoord"),extra:Ae(n)})}return t}function Le(e){return e}function Ie(e){var t,r,a=(t=e.url,X(Ht.effects[t],Le)),n=a.profile.technique;switch(n.type){case"phong":case"blinn":r=new b;break;case"lambert":r=new g;break;default:r=new l}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=a.profile.samplers[e.id],n=null;if(void 0!==r?n=ve(a.profile.surfaces[r.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),n=ve(e.id)),null!==n){var i=function(e){var t=e.slice(2+(e.lastIndexOf(".")-1>>>0));return"tga"===(t=t.toLowerCase())?Ct:Lt}(n);if(void 0!==i){var o=i.load(n),s=e.extra;if(void 0!==s&&void 0!==s.technique&&!1===B(s.technique)){var c=s.technique;o.wrapS=c.wrapU?U:P,o.wrapT=c.wrapV?U:P,o.offset.set(c.offsetU||0,c.offsetV||0),o.repeat.set(c.repeatU||1,c.repeatV||1)}else o.wrapS=U,o.wrapT=U;return null!==t&&(o.colorSpace=t),o}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",n),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}r.name=e.name||"";var o=n.parameters;for(var s in o){var c=o[s];switch(s){case"diffuse":c.color&&r.color.fromArray(c.color),c.texture&&(r.map=i(c.texture,j));break;case"specular":c.color&&r.specular&&r.specular.fromArray(c.color),c.texture&&(r.specularMap=i(c.texture));break;case"bump":c.texture&&(r.normalMap=i(c.texture));break;case"ambient":c.texture&&(r.lightMap=i(c.texture,j));break;case"shininess":c.float&&r.shininess&&(r.shininess=c.float);break;case"emission":c.color&&r.emissive&&r.emissive.fromArray(c.color),c.texture&&(r.emissiveMap=i(c.texture,j))}}r.color.convertSRGBToLinear(),r.specular&&r.specular.convertSRGBToLinear(),r.emissive&&r.emissive.convertSRGBToLinear();var d=o.transparent,u=o.transparency;if(void 0===u&&d&&(u={float:1}),void 0===d&&u&&(d={opaque:"A_ONE",data:{color:[1,1,1,1]}}),d&&u)if(d.data.texture)r.transparent=!0;else{var f=d.data.color;switch(d.opaque){case"A_ONE":r.opacity=f[3]*u.float;break;case"RGB_ZERO":r.opacity=1-f[0]*u.float;break;case"A_ZERO":r.opacity=1-f[3]*u.float;break;case"RGB_ONE":r.opacity=f[0]*u.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',d.opaque)}r.opacity<1&&(r.transparent=!0)}if(void 0!==n.extra&&void 0!==n.extra.technique){var h=n.extra.technique;for(var m in h){var p=h[m];switch(m){case"double_sided":r.side=1===p?N:w;break;case"bump":r.normalMap=i(p.texture),r.normalScale=new y(1,1)}}}return r}function je(e){return X(Ht.materials[e],Ie)}function Oe(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if("technique_common"===r.nodeName)return qe(r)}return{}}function qe(e){for(var t={},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];switch(a.nodeName){case"perspective":case"orthographic":t.technique=a.nodeName,t.parameters=He(a)}}return t}function He(e){for(var t={},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];switch(a.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[a.nodeName]=parseFloat(a.textContent)}}return t}function Se(e){var t;switch(e.optics.technique){case"perspective":t=new x(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var r=e.optics.parameters.ymag,a=e.optics.parameters.xmag,n=e.optics.parameters.aspect_ratio;a=void 0===a?r*n:a,r=void 0===r?a/n:r,t=new k(-(a*=.5),a,r*=.5,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new x}return t.name=e.name||"",t}function Me(e){var t=Ht.cameras[e];return void 0!==t?X(t,Se):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ze(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=n.nodeName,t.parameters=Ue(n)}}return t}function Ue(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"color":var o=i(n.textContent);t.color=(new f).fromArray(o).convertSRGBToLinear();break;case"falloff_angle":t.falloffAngle=parseFloat(n.textContent);break;case"quadratic_attenuation":var s=parseFloat(n.textContent);t.distance=s?Math.sqrt(1/s):0}}return t}function Pe(e){var t;switch(e.technique){case"directional":t=new E;break;case"point":t=new _;break;case"spot":t=new T;break;case"ambient":t=new A}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function Fe(e){var t=Ht.lights[e];return void 0!==t?X(t,Pe):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function Ge(e){for(var t={array:[],stride:3},n=0;n<e.childNodes.length;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"float_array":t.array=i(o.textContent);break;case"Name_array":t.array=a(o.textContent);break;case"technique_common":var s=r(o,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function Be(e){for(var t={},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];1===a.nodeType&&(t[a.getAttribute("semantic")]=G(a.getAttribute("source")))}return t}function De(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"input":var i=G(n.getAttribute("source")),s=n.getAttribute("semantic"),c=parseInt(n.getAttribute("offset")),l=parseInt(n.getAttribute("set")),d=l>0?s+l:s;t.inputs[d]={id:i,offset:c},t.stride=Math.max(t.stride,c+1),"TEXCOORD"===s&&(t.hasUV=!0);break;case"vcount":t.vcount=o(n.textContent);break;case"p":t.p=o(n.textContent)}}return t}function Ve(e){for(var t=0,r=0,a=e.length;r<a;r++)!0===e[r].hasUV&&t++;t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function Je(e){var t={},r=e.sources,a=e.vertices,n=e.primitives;if(0===n.length)return{};var i=function(e){for(var t={},r=0;r<e.length;r++){var a=e[r];void 0===t[a.type]&&(t[a.type]=[]),t[a.type].push(a)}return t}(n);for(var o in i){var s=i[o];Ve(s),t[o]=We(s,r,a)}return t}function We(e,t,r){for(var a={},n={array:[],stride:0},i={array:[],stride:0},o={array:[],stride:0},s={array:[],stride:0},c={array:[],stride:0},l=[],d=4,u=[],f=4,h=new C,m=[],p=0,v=0;v<e.length;v++){var g=e[v],b=g.inputs,y=0;switch(g.type){case"lines":case"linestrips":y=2*g.count;break;case"triangles":y=3*g.count;break;case"polylist":for(var N=0;N<g.count;N++){var w=g.vcount[N];switch(w){case 3:y+=3;break;case 4:y+=6;break;default:y+=3*(w-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",g.type)}for(var x in h.addGroup(p,y,v),p+=y,g.material&&m.push(g.material),b){var k=b[x];switch(x){case"VERTEX":for(var A in r){var T=r[A];switch(A){case"POSITION":var _=n.array.length;if(Xe(g,t[T],k.offset,n.array),n.stride=t[T].stride,t.skinWeights&&t.skinIndices&&(Xe(g,t.skinIndices,k.offset,l),Xe(g,t.skinWeights,k.offset,u)),!1===g.hasUV&&!0===e.uvsNeedsFix)for(var E=(n.array.length-_)/n.stride,L=0;L<E;L++)o.array.push(0,0);break;case"NORMAL":Xe(g,t[T],k.offset,i.array),i.stride=t[T].stride;break;case"COLOR":Xe(g,t[T],k.offset,c.array),c.stride=t[T].stride;break;case"TEXCOORD":Xe(g,t[T],k.offset,o.array),o.stride=t[T].stride;break;case"TEXCOORD1":Xe(g,t[T],k.offset,s.array),o.stride=t[T].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',A)}}break;case"NORMAL":Xe(g,t[k.id],k.offset,i.array),i.stride=t[k.id].stride;break;case"COLOR":Xe(g,t[k.id],k.offset,c.array,!0),c.stride=t[k.id].stride;break;case"TEXCOORD":Xe(g,t[k.id],k.offset,o.array),o.stride=t[k.id].stride;break;case"TEXCOORD1":Xe(g,t[k.id],k.offset,s.array),s.stride=t[k.id].stride}}}return n.array.length>0&&h.setAttribute("position",new R(n.array,n.stride)),i.array.length>0&&h.setAttribute("normal",new R(i.array,i.stride)),c.array.length>0&&h.setAttribute("color",new R(c.array,c.stride)),o.array.length>0&&h.setAttribute("uv",new R(o.array,o.stride)),s.array.length>0&&h.setAttribute("uv1",new R(s.array,s.stride)),l.length>0&&h.setAttribute("skinIndex",new R(l,d)),u.length>0&&h.setAttribute("skinWeight",new R(u,f)),a.data=h,a.type=e[0].type,a.materialKeys=m,a}function Xe(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.p,o=e.stride,s=e.vcount;function c(e){for(var t=i[e+r]*d,o=t+d;t<o;t++)a.push(l[t]);if(n){var s=a.length-d-1;It.setRGB(a[s+0],a[s+1],a[s+2]).convertSRGBToLinear(),a[s+0]=It.r,a[s+1]=It.g,a[s+2]=It.b}}var l=t.array,d=t.stride;if(void 0!==e.vcount)for(var u=0,f=0,h=s.length;f<h;f++){var m=s[f];if(4===m){var p=u+1*o,v=u+2*o,g=u+3*o;c(u+0*o),c(p),c(g),c(p),c(v),c(g)}else if(3===m){var b=u+1*o,y=u+2*o;c(u+0*o),c(b),c(y)}else if(m>4)for(var N=1,w=m-2;N<=w;N++){var x=u+o*N,k=u+o*(N+1);c(u+0*o),c(x),c(k)}u+=o*m}else for(var A=0,T=i.length;A<T;A+=o)c(A)}function Ye(e){return X(Ht.geometries[e],Je)}function Ze(e){return void 0!==e.build?e.build:e}function Ke(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"joint":t.joints[a.getAttribute("sid")]=Qe(a);break;case"link":t.links.push(et(a))}}}function Qe(e){for(var t,r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"prismatic":case"revolute":t=$e(a)}}return t}function $e(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new s,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"axis":var n=i(a.textContent);t.axis.fromArray(n);break;case"limits":var o=a.getElementsByTagName("max")[0],c=a.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(c.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function et(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"attachment_full":t.attachments.push(tt(a));break;case"matrix":case"translate":case"rotate":t.transforms.push(rt(a))}}return t}function tt(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"link":t.links.push(et(a));break;case"matrix":case"translate":case"rotate":t.transforms.push(rt(a))}}return t}function rt(e){var t={type:e.nodeName},r=i(e.textContent);switch(t.type){case"matrix":t.obj=new c,t.obj.fromArray(r).transpose();break;case"translate":t.obj=new s,t.obj.fromArray(r);break;case"rotate":t.obj=new s,t.obj.fromArray(r),t.angle=h.degToRad(r[3])}return t}function at(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];1===a.nodeType&&"technique_common"===a.nodeName&&nt(a,t)}}function nt(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"inertia":t.inertia=i(a.textContent);break;case"mass":t.mass=i(a.textContent)[0]}}}function it(e){for(var t={target:e.getAttribute("target").split("/").pop()},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType&&"axis"===a.nodeName){var n=a.getElementsByTagName("param")[0];t.axis=n.textContent;var i=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=i.substring(0,i.length-1)}}return t}function ot(e){return void 0!==e.build?e.build:e}function st(e){for(var t=[],r=kt.querySelector('[id="'+e.id+'"]'),a=0;a<r.childNodes.length;a++){var n=r.childNodes[a];if(1===n.nodeType){var o=void 0,l=void 0;switch(n.nodeName){case"matrix":o=i(n.textContent);var d=(new c).fromArray(o).transpose();t.push({sid:n.getAttribute("sid"),type:n.nodeName,obj:d});break;case"translate":case"scale":o=i(n.textContent),l=(new s).fromArray(o),t.push({sid:n.getAttribute("sid"),type:n.nodeName,obj:l});break;case"rotate":o=i(n.textContent),l=(new s).fromArray(o);var u=h.degToRad(o[3]);t.push({sid:n.getAttribute("sid"),type:n.nodeName,obj:l,angle:u})}}}return t}var ct=new c,lt=new s;function dt(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new c,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType){var n=void 0;switch(a.nodeName){case"node":t.nodes.push(a.getAttribute("id")),dt(a);break;case"instance_camera":t.instanceCameras.push(G(a.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(ut(a));break;case"instance_light":t.instanceLights.push(G(a.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(ut(a));break;case"instance_node":t.instanceNodes.push(G(a.getAttribute("url")));break;case"matrix":n=i(a.textContent),t.matrix.multiply(ct.fromArray(n).transpose()),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"translate":n=i(a.textContent),lt.fromArray(n),t.matrix.multiply(ct.makeTranslation(lt.x,lt.y,lt.z)),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"rotate":n=i(a.textContent);var o=h.degToRad(n[3]);t.matrix.multiply(ct.makeRotationAxis(lt.fromArray(n),o)),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"scale":n=i(a.textContent),t.matrix.scale(lt.fromArray(n)),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"extra":break;default:console.log(a)}}}return bt(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Ht.nodes[t.id]=t,t}function ut(e){for(var t={id:G(e.getAttribute("url")),materials:{},skeletons:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];switch(a.nodeName){case"bind_material":for(var n=a.getElementsByTagName("instance_material"),i=0;i<n.length;i++){var o=n[i],s=o.getAttribute("symbol"),c=o.getAttribute("target");t.materials[s]=G(c)}break;case"skeleton":t.skeletons.push(G(a.textContent))}}return t}function ft(e,t){var r,a,n,i,o=[],s=[];for(r=0;r<e.length;r++){var c=e[r];if(bt(c))ht(yt(c),t,o);else if(i=c,void 0!==Ht.visualScenes[i])for(var l=Ht.visualScenes[c].children,d=0;d<l.length;d++){var u=l[d];"JOINT"===u.type&&ht(yt(u.id),t,o)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",c)}for(r=0;r<t.length;r++)for(a=0;a<o.length;a++)if((n=o[a]).bone.name===t[r].name){s[r]=n,n.processed=!0;break}for(r=0;r<o.length;r++)!1===(n=o[r]).processed&&(s.push(n),n.processed=!0);var f=[],h=[];for(r=0;r<s.length;r++)n=s[r],f.push(n.bone),h.push(n.boneInverse);return new F(f,h)}function ht(e,t,r){e.traverse((function(e){if(!0===e.isBone){for(var a,n=0;n<t.length;n++){var i=t[n];if(i.name===e.name){a=i.boneInverse;break}}void 0===a&&(a=new c),r.push({bone:e,boneInverse:a,processed:!1})}}))}function mt(e){for(var t,r,a=[],n=e.matrix,i=e.nodes,o=e.type,s=e.instanceCameras,c=e.instanceControllers,l=e.instanceLights,d=e.instanceGeometries,u=e.instanceNodes,f=0,h=i.length;f<h;f++)a.push(yt(i[f]));for(var m=0,p=s.length;m<p;m++){var v=Me(s[m]);null!==v&&a.push(v.clone())}for(var g=0,b=c.length;g<b;g++)for(var y=c[g],N=(t=y.id,X(Ht.controllers[t],me)),w=gt(Ye(N.id),y.materials),x=ft(y.skeletons,N.skin.joints),k=0,A=w.length;k<A;k++){var T=w[k];T.isSkinnedMesh&&(T.bind(x,N.skin.bindMatrix),T.normalizeSkinWeights()),a.push(T)}for(var _=0,E=l.length;_<E;_++){var C=Fe(l[_]);null!==C&&a.push(C.clone())}for(var R=0,I=d.length;R<I;R++)for(var j=d[R],q=gt(Ye(j.id),j.materials),H=0,S=q.length;H<S;H++)a.push(q[H]);for(var M=0,z=u.length;M<z;M++)a.push(yt(u[M]).clone());if(0===i.length&&1===a.length)r=a[0];else{r="JOINT"===o?new O:new L;for(var U=0;U<a.length;U++)r.add(a[U])}return r.name="JOINT"===o?e.sid:e.name,r.matrix.copy(n),r.matrix.decompose(r.position,r.quaternion,r.scale),r}var pt=new l({name:n.DEFAULT_MATERIAL_NAME,color:16711935});function vt(e,t){for(var r=[],a=0,n=e.length;a<n;a++){var i=t[e[a]];void 0===i?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[a]),r.push(pt)):r.push(je(i))}return r}function gt(e,t){var r=[];for(var a in e){var n=e[a],i=vt(n.materialKeys,t);if(0===i.length&&("lines"===a||"linestrips"===a?i.push(new q):i.push(new b)),"lines"===a||"linestrips"===a)for(var o=0,s=i.length;o<s;o++){var c=i[o];if(!0===c.isMeshPhongMaterial||!0===c.isMeshLambertMaterial){var l=new q;l.color.copy(c.color),l.opacity=c.opacity,l.transparent=c.transparent,i[o]=l}}var d=void 0!==n.data.attributes.skinIndex,u=1===i.length?i[0]:i,f=void 0;switch(a){case"lines":f=new z(n.data,u);break;case"linestrips":f=new M(n.data,u);break;case"triangles":case"polylist":f=d?new H(n.data,u):new S(n.data,u)}r.push(f)}return r}function bt(e){return void 0!==Ht.nodes[e]}function yt(e){return X(Ht.nodes[e],mt)}function Nt(e){var t=new L;t.name=e.name;for(var r=e.children,a=0;a<r.length;a++){var n=r[a];t.add(yt(n.id))}return t}function wt(e){return X(Ht.visualScenes[e],Nt)}if(0===e.length)return{scene:new d};var xt=(new DOMParser).parseFromString(e,"application/xml"),kt=r(xt,"COLLADA")[0],At=xt.getElementsByTagName("parsererror")[0];if(void 0!==At){var Tt,_t=r(At,"div")[0];return Tt=_t?_t.textContent:function(e){for(var t="",r=[e];r.length;){var a=r.shift();a.nodeType===Node.TEXT_NODE?t+=a.textContent:(t+="\n",r.push.apply(r,a.childNodes))}return t.trim()}(At),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",Tt),null}var Et=kt.getAttribute("version");console.debug("THREE.ColladaLoader: File version",Et);var Ct,Rt=function(e){return{unit:D(r(e,"unit")[0]),upAxis:V(r(e,"up_axis")[0])}}(r(kt,"asset")[0]),Lt=new u(this.manager);Lt.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),K&&(Ct=new K(this.manager)).setPath(this.resourcePath||t);var It=new f,jt=[],Ot={},qt=0,Ht={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};J(kt,"library_animations","animation",(function e(t){for(var r={sources:{},samplers:{},channels:{}},a=!1,n=0,i=t.childNodes.length;n<i;n++){var o=t.childNodes[n];if(1===o.nodeType){var s=void 0;switch(o.nodeName){case"source":s=o.getAttribute("id"),r.sources[s]=Ge(o);break;case"sampler":s=o.getAttribute("id"),r.samplers[s]=Y(o);break;case"channel":s=o.getAttribute("target"),r.channels[s]=Z(o);break;case"animation":e(o),a=!0;break;default:console.log(o)}}}!1===a&&(Ht.animations[t.getAttribute("id")||h.generateUUID()]=r)})),J(kt,"library_animation_clips","animation_clip",(function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"instance_animation"===n.nodeName&&t.animations.push(G(n.getAttribute("url")))}Ht.clips[e.getAttribute("id")]=t})),J(kt,"library_controllers","controller",(function(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"skin":t.id=G(n.getAttribute("source")),t.skin=ue(n);break;case"morph":t.id=G(n.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Ht.controllers[e.getAttribute("id")]=t})),J(kt,"library_images","image",(function(e){var t={init_from:r(e,"init_from")[0].textContent};Ht.images[e.getAttribute("id")]=t})),J(kt,"library_effects","effect",(function(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"profile_COMMON"===n.nodeName&&(t.profile=ge(n))}Ht.effects[e.getAttribute("id")]=t})),J(kt,"library_materials","material",(function(e){for(var t={name:e.getAttribute("name")},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"instance_effect"===n.nodeName&&(t.url=G(n.getAttribute("url")))}Ht.materials[e.getAttribute("id")]=t})),J(kt,"library_cameras","camera",(function(e){for(var t={name:e.getAttribute("name")},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"optics"===n.nodeName&&(t.optics=Oe(n))}Ht.cameras[e.getAttribute("id")]=t})),J(kt,"library_lights","light",(function(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];1===n.nodeType&&"technique_common"===n.nodeName&&(t=ze(n))}Ht.lights[e.getAttribute("id")]=t})),J(kt,"library_geometries","geometry",(function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},a=r(e,"mesh")[0];if(void 0!==a){for(var n=0;n<a.childNodes.length;n++){var i=a.childNodes[n];if(1===i.nodeType){var o=i.getAttribute("id");switch(i.nodeName){case"source":t.sources[o]=Ge(i);break;case"vertices":t.vertices=Be(i);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",i.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(De(i));break;default:console.log(i)}}}Ht.geometries[e.getAttribute("id")]=t}})),J(kt,"library_nodes","node",dt),J(kt,"library_visual_scenes","visual_scene",(function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),r=0;r<t.length;r++){var a=t[r];!1===a.hasAttribute("id")&&a.setAttribute("id","three_default_"+qt++)}}(e);for(var a=r(e,"node"),n=0;n<a.length;n++)t.children.push(dt(a[n]));Ht.visualScenes[e.getAttribute("id")]=t})),J(kt,"library_kinematics_models","kinematics_model",(function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];1===a.nodeType&&"technique_common"===a.nodeName&&Ke(a,t)}Ht.kinematicsModels[e.getAttribute("id")]=t})),J(kt,"library_physics_models","physics_model",(function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];1===a.nodeType&&"rigid_body"===a.nodeName&&(t.rigidBodies[a.getAttribute("name")]={},at(a,t.rigidBodies[a.getAttribute("name")]))}Ht.physicsModels[e.getAttribute("id")]=t})),J(kt,"scene","instance_kinematics_scene",(function(e){for(var t={bindJointAxis:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];1===a.nodeType&&"bind_joint_axis"===a.nodeName&&t.bindJointAxis.push(it(a))}Ht.kinematicsScenes[G(e.getAttribute("url"))]=t})),W(Ht.animations,Q),W(Ht.clips,le),W(Ht.controllers,me),W(Ht.images,pe),W(Ht.effects,Le),W(Ht.materials,Ie),W(Ht.cameras,Se),W(Ht.lights,Pe),W(Ht.geometries,Je),W(Ht.visualScenes,Nt),function(){var e=Ht.clips;if(!0===B(e)){if(!1===B(Ht.animations)){var t=[];for(var r in Ht.animations)for(var a=$(r),n=0,i=a.length;n<i;n++)t.push(a[n]);jt.push(new m("default",-1,t))}}else for(var o in e)jt.push(de(o))}(),function(){var e=Object.keys(Ht.kinematicsModels)[0],t=Object.keys(Ht.kinematicsScenes)[0],r=Object.keys(Ht.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var a,n=(a=e,X(Ht.kinematicsModels[a],Ze)),i=function(e){return X(Ht.kinematicsScenes[e],ot)}(t),o=wt(r),s=i.bindJointAxis,l={},d=0,u=s.length;d<u;d++){var f=s[d],m=kt.querySelector('[sid="'+f.target+'"]');if(m){var p=m.parentElement;g(f.jointIndex,p)}}var v=new c;Ot={joints:n&&n.joints,getJointValue:function(e){var t=l[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var r=l[e];if(r){var a=r.joint;if(t>a.limits.max||t<a.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+a.limits.min+", max: "+a.limits.max+").");else if(a.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var n=r.object,i=a.axis,o=r.transforms;ct.identity();for(var s=0;s<o.length;s++){var c=o[s];if(c.sid&&-1!==c.sid.indexOf(e))switch(a.type){case"revolute":ct.multiply(v.makeRotationAxis(i,h.degToRad(t)));break;case"prismatic":ct.multiply(v.makeTranslation(i.x*t,i.y*t,i.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+a.type)}else switch(c.type){case"matrix":ct.multiply(c.obj);break;case"translate":ct.multiply(v.makeTranslation(c.obj.x,c.obj.y,c.obj.z));break;case"scale":ct.scale(c.obj);break;case"rotate":ct.multiply(v.makeRotationAxis(c.obj,c.angle))}}n.matrix.copy(ct),n.matrix.decompose(n.position,n.quaternion,n.scale),l[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function g(e,t){var r=t.getAttribute("name"),a=n.joints[e];o.traverse((function(n){n.name===r&&(l[e]={object:n,transforms:st(t),joint:a,position:a.zeroPosition})}))}}();var St=function(e){return wt(G(r(e,"instance_visual_scene")[0].getAttribute("url")))}(r(kt,"scene")[0]);return St.animations=jt,"Z_UP"===Rt.upAxis&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),St.rotation.set(-Math.PI/2,0,0)),St.scale.multiplyScalar(Rt.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),jt},kinematics:Ot,library:Ht,scene:St}}}var $={id:"container1",class:"flex justify-center items-center flex-col"};e("_",W({__name:"webgl_loader_collada",setup(e){var r,a,n,i,o,s,c=4*window.innerWidth/5,l=4*window.innerHeight/5;return X((()=>{var e=document.getElementById("container1");function u(){n.aspect=c/l,n.updateProjectionMatrix(),o.setSize(c,l)}!function(){(n=new x(45,c/l,.1,2e3)).position.set(8,10,8),n.lookAt(0,3,0),i=new d,a=new V;var f=new J((function(){i.add(s)}));new Q(f).load(new URL(""+new URL("../models/collada/elf/elf.dae",t.meta.url).href,self.location).href,(function(e){s=e.scene}));var h=new A(13421772,.4);i.add(h);var m=new E(16777215,.8);m.position.set(1,1,0).normalize(),i.add(m),(o=new G).outputEncoding=B,o.setPixelRatio(window.devicePixelRatio),o.setSize(c,l),null==e||e.appendChild(o.domElement),(r=D()).dom.style.top="0",r.dom.style.left="0",r.dom.style.position="absolute",null==e||e.appendChild(r.dom),window.addEventListener("resize",u)}(),function e(){var t;requestAnimationFrame(e),t=a.getDelta(),void 0!==s&&(s.rotation.z+=.5*t),o.render(i,n),r.update()}()})),(e,t)=>(Y(),Z("div",$))}}))}}}));
