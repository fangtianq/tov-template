System.register(["./index-legacy.769c0dbd.js","./index-legacy.dc51434c.js","./favicon-legacy.99295790.js","./route-block-legacy.6f0c4e8e.js"],(function(e,s){"use strict";var l,a,o,t,d,r,n,u,i,c,m,p,b,f,h,g,C,w,v,_,V,k,x;return{setters:[e=>{l=e.a},e=>{a=e.d,o=e.z,t=e.l,d=e._,r=e.e,n=e.i,u=e.w,i=e.R,c=e.r,m=e.j,p=e.f,b=e.S,f=e.h,h=e.k,g=e.t,C=e.n,w=e.T,v=e.m,_=e.E,V=e.U},e=>{k=e._},e=>{x=e.b}],execute:function(){const s={class:"bg-white h-screen font-github"},y={class:"flex justify-center items-center flex-col"},S=p("div",{class:"p-8"},[p("img",{src:k,class:"w-12 h-12",alt:"tov"})],-1),P=p("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign up to tov-template ",-1),I={class:"h-98 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},j={class:"w-max h-max cursor-pointer"},U=["src"],E=p("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[h(" Already have an account? "),p("a",{href:"login",class:"text-github_a"}," Sign in → "),h(" . ")],-1),N=e("default",a({__name:"signup",setup(e){l.get("api/article/all").then((e=>{}));const a=o({username:"",password:"",checkPass:"",nickName:"",smsCodeInput:"",smsCode:"",smsCodeVisible:!1,smsCodeCanSend:!1,smsCodeTip:"刷新验证码",captcha:t()}),k=e=>{a.smsCodeVisible=e},x=d.debounce((()=>{k(!0),a.smsCodeCanSend=!1,i().then((e=>{a.smsCode=e.url,a.captcha=e}))}),1e3,{leading:!0,trailing:!1}),N=v(),T=o({password:[{validator:(e,s,l)=>{if(""===s)l(new Error("Please input the password"));else{if(""!==a.checkPass){if(!F.value)return;F.value.validateField("checkPass",(()=>null))}l()}},trigger:"blur"}],checkPass:[{validator:(e,s,l)=>{""===s?l(new Error("Please input the password again")):s!==a.password?l(new Error("Two inputs don't match!")):l()},trigger:"blur"}],smsCodeInput:[{validator:(e,s,l)=>{a.smsCodeCanSend?l():l(new Error("SmsCode don't match!"))},trigger:"blur"}]}),F=t();return(e,l)=>{const o=c("el-input"),t=c("el-form-item"),d=c("i-mdi:check"),i=c("el-button"),v=c("el-popover"),M=c("el-form");return m(),r("div",s,[n(M,{ref_key:"ruleFormRef",ref:F,model:a,"label-position":"top",rules:T},{default:u((()=>[p("div",y,[S,P,p("div",I,[n(t,{label:"Phone number"},{default:u((()=>[n(o,{modelValue:a.username,"onUpdate:modelValue":l[0]||(l[0]=e=>a.username=e)},null,8,["modelValue"])])),_:1}),n(t,{label:"Password",prop:"password"},{default:u((()=>[n(o,{modelValue:a.password,"onUpdate:modelValue":l[1]||(l[1]=e=>a.password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(t,{label:"Confirm",prop:"checkPass"},{default:u((()=>[n(o,{modelValue:a.checkPass,"onUpdate:modelValue":l[2]||(l[2]=e=>a.checkPass=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),n(t,{label:"nickName"},{default:u((()=>[n(o,{modelValue:a.nickName,"onUpdate:modelValue":l[3]||(l[3]=e=>a.nickName=e)},null,8,["modelValue"])])),_:1}),n(t,{prop:"smsCodeInput"},{default:u((()=>[n(v,{visible:a.smsCodeVisible,placement:"top"},{reference:u((()=>[n(i,{id:"verify",class:b("text-github_a mb-1"),onClick:f(x)},{default:u((()=>[p("span",{class:b(a.smsCodeCanSend?"text-green-500":"")},[h(g(a.smsCodeTip)+" ",1),C(n(d,null,null,512),[[w,a.smsCodeCanSend]])],2)])),_:1},8,["onClick"])])),default:u((()=>[p("div",j,[p("img",{src:a.smsCode},null,8,U)])])),_:1},8,["visible"]),n(o,{modelValue:a.smsCodeInput,"onUpdate:modelValue":l[4]||(l[4]=e=>a.smsCodeInput=e),modelModifiers:{trim:!0},class:"w-8",disabled:!a.smsCodeVisible,onFocus:l[5]||(l[5]=e=>k(!0)),onInput:l[6]||(l[6]=e=>{var s;""!=a.smsCodeInput&&4==a.smsCodeInput.length&&(null===(s=a.captcha)||void 0===s||s.verify(a.smsCodeInput).then((e=>{k(!1),a.smsCodeCanSend=!0,a.smsCodeVisible=!1}),(e=>{"800"==e.code?x():_.error(e.rawMessage)})).catch((e=>{_.error(e)})))})},null,8,["modelValue","disabled"])])),_:1}),n(t,null,{default:u((()=>[n(i,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:l[7]||(l[7]=e=>{var s;(s=F.value)&&s.validate((e=>{if(!e)return!1;V()(a.username,a.password).then((e=>{_.success("注册成功"),N.push("login")}),(e=>{_.error(`注册失败：${e.rawMessage}`)}))}))})},{default:u((()=>[h("Sign up")])),_:1})])),_:1})]),E])])),_:1},8,["model","rules"])])}}}));"function"==typeof x&&x(N)}}}));
