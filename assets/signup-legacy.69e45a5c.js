System.register(["./base-legacy.38854648.js","./logo-legacy.9317aa1c.js","./popper-legacy.dc35de2a.js","./popover-legacy.c1f83345.js","./button-legacy.1437b25c.js","./index-legacy.e18a26ca.js","./input-legacy.13394860.js","./index-legacy.83ff287f.js","./index-legacy.f062f27b.js","./route-block-legacy.509c7347.js","./constants-legacy.5c83ba09.js","./use-form-item-legacy.a719f71f.js","./event-legacy.7722cbb2.js","./_baseClone-legacy.7ab23f44.js","./_Uint8Array-legacy.6e03d40b.js","./_initCloneObject-legacy.f5f0eb45.js","./_getTag-legacy.0fe4d496.js","./favicon-legacy.13288711.js","./isNil-legacy.e248952d.js","./focus-trap-legacy.bbd52a79.js","./index-legacy.b04618f5.js","./index-legacy.b33c6eb8.js"],(function(e,l){"use strict";var s,a,n,o,t,r,d,u,i,c,m,p,g,b,f,h,C,y,v,w,_,j,V,k,x,S,P,E;return{setters:[null,e=>{s=e._,a=e.E,n=e.a},null,e=>{o=e.E},e=>{t=e.E},e=>{r=e.o,d=e.z,u=e.p,i=e.g,c=e.J,m=e.j,p=e.aD,g=e.ay,b=e.r,f=e.A,h=e.w,C=e.s,y=e.q,v=e.a9,w=e.aa,_=e.n,j=e.x,V=e.cE,k=e.aV,x=e.cF},null,e=>{S=e.a},e=>{P=e.E},e=>{E=e.b},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},I=[u("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1)],N={name:"mdi-check",render:function(e,s){return r(),d("svg",l,I)}},U={class:"h-screen font-github"},M={class:"flex justify-center items-center flex-col"},F=u("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign up to tov-template ",-1),L={class:"w-77 bg-github_bg dark:bg-github_bg_dark border-github_b rounded-xl border-1 p-4"},T={class:"w-max h-max cursor-pointer"},A=["src"],O={class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},Z={class:"text-github_a"},q=e("default",i({__name:"signup",setup(e){S.get("api/article/all").then((e=>{}));var l=c({username:"",password:"",checkPass:"",nickName:"",smsCodeInput:"",smsCode:"",smsCodeVisible:!1,smsCodeCanSend:!1,smsCodeTip:"刷新验证码",captcha:m()}),i=e=>{l.smsCodeVisible=e},E=p.debounce((()=>{i(!0),l.smsCodeCanSend=!1,V().then((e=>{l.smsCode=e.url,l.captcha=e}))}),1e3,{leading:!0,trailing:!1}),I=g(),q=c({password:[{validator:(e,s,a)=>{if(""===s)a(new Error("Please input the password"));else{if(""!==l.checkPass){if(!z.value)return;z.value.validateField("checkPass",(()=>null))}a()}},trigger:"blur"}],checkPass:[{validator:(e,s,a)=>{""===s?a(new Error("Please input the password again")):s!==l.password?a(new Error("Two inputs don't match!")):a()},trigger:"blur"}],smsCodeInput:[{validator:(e,s,a)=>{l.smsCodeCanSend?a():a(new Error("SmsCode don't match!"))},trigger:"blur"}]}),z=m();return(e,c)=>{var m=s,p=P,g=a,V=N,S=t,B=o,D=b("router-link"),J=n;return r(),d("div",U,[f(J,{ref_key:"ruleFormRef",ref:z,model:C(l),"label-position":"top",rules:C(q)},{default:h((()=>[u("div",M,[f(m),F,u("div",L,[f(g,{label:"Phone number"},{default:h((()=>[f(p,{modelValue:C(l).username,"onUpdate:modelValue":c[0]||(c[0]=e=>C(l).username=e)},null,8,["modelValue"])])),_:1}),f(g,{label:"Password",prop:"password"},{default:h((()=>[f(p,{modelValue:C(l).password,"onUpdate:modelValue":c[1]||(c[1]=e=>C(l).password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),f(g,{label:"Confirm",prop:"checkPass"},{default:h((()=>[f(p,{modelValue:C(l).checkPass,"onUpdate:modelValue":c[2]||(c[2]=e=>C(l).checkPass=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),f(g,{label:"nickName"},{default:h((()=>[f(p,{modelValue:C(l).nickName,"onUpdate:modelValue":c[3]||(c[3]=e=>C(l).nickName=e)},null,8,["modelValue"])])),_:1}),f(g,{prop:"smsCodeInput"},{default:h((()=>[f(B,{visible:C(l).smsCodeVisible,placement:"top"},{reference:h((()=>[f(S,{id:"verify",class:y("text-github_a mb-1"),disabled:C(l).smsCodeCanSend,onClick:C(E)},{default:h((()=>[u("span",{class:y(C(l).smsCodeCanSend?"text-green-500":"")},[v(w(C(l).smsCodeTip)+" ",1),_(f(V,null,null,512),[[j,C(l).smsCodeCanSend]])],2)])),_:1},8,["disabled","onClick"])])),default:h((()=>[u("div",T,[u("img",{src:C(l).smsCode},null,8,A)])])),_:1},8,["visible"]),f(p,{modelValue:C(l).smsCodeInput,"onUpdate:modelValue":c[4]||(c[4]=e=>C(l).smsCodeInput=e),modelModifiers:{trim:!0},class:"w-8",disabled:!C(l).smsCodeVisible,onFocus:c[5]||(c[5]=e=>i(!0)),onInput:c[6]||(c[6]=e=>{var s;""!=l.smsCodeInput&&4==l.smsCodeInput.length&&(null===(s=l.captcha)||void 0===s||s.verify(l.smsCodeInput).then((e=>{i(!1),l.smsCodeCanSend=!0,l.smsCodeVisible=!1}),(e=>{"800"==e.code?E():k.error(e.rawMessage)})).catch((e=>{k.error(e)})))})},null,8,["modelValue","disabled"])])),_:1}),f(g,null,{default:h((()=>[f(S,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:c[7]||(c[7]=e=>{var s;(s=C(z))&&s.validate((e=>{if(!e)return!1;x()(l.username,l.password).then((e=>{k.success("注册成功"),I.push("login"),e.id}),(e=>{k.error(`注册失败：${e.rawMessage||e.response.data}`)}))}))})},{default:h((()=>[v("Sign up")])),_:1})])),_:1})]),u("div",O,[v(" Already have an account? "),u("a",Z,[f(D,{to:"login"},{default:h((()=>[v(" Sign in → ")])),_:1})]),v(" . ")])])])),_:1},8,["model","rules"])])}}}));"function"==typeof E&&E(q)}}}));
