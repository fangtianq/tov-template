!function(){function e(e,o){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,o){if(!e)return;if("string"==typeof e)return n(e,o);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,o)}(e))||o&&e&&"number"==typeof e.length){r&&(e=r);var t=0,l=function(){};return{s:l,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}System.register(["./request-legacy.48eedf95.js","./index-legacy.c981faa3.js","./Button-legacy.657f1979.js","./light-legacy.c84d9ae8.js","./use-rtl-legacy.c6d5a75f.js","./fade-in-scale-up.cssr-legacy.07459f2d.js","./throttle-legacy.8fada74a.js","./Space-legacy.b19f8842.js"],(function(n,o){"use strict";var r,t,l,i,a,s,u,d,c,h,f,g,v,p,m,b,y,j,x,$,C,S,w,z,R,T,_,L,N,H,B,O,k,P,M,F,q,W,E;return{setters:[e=>{r=e.a},e=>{t=e.l,l=e.g,i=e.d,a=e.n,s=e.x,u=e.t,d=e.O,c=e.z,h=e.v,f=e.T,g=e.N,v=e.bt,p=e.o,m=e.P,b=e.a3,y=e.w,j=e.S,x=e.a4},e=>{$=e.s,C=e.a,S=e.b,w=e._},e=>{z=e.c,R=e.e,T=e.N,_=e.w},e=>{L=e.i,N=e.a,H=e.c,B=e.g,O=e.b,k=e.u,P=e.e,M=e.d,F=e.f},e=>{q=e.f},e=>{W=e.t},e=>{E=e._}],execute:function(){function o(e,n){var o=t(L,null);return l((()=>e.hljs||(null==o?void 0:o.mergedHljsRef.value)))}var A={name:"Code",common:z,self:e=>({textColor:e.textColor2,fontSize:e.fontSize,fontWeightStrong:e.fontWeightStrong,"mono-3":"#a0a1a7","hue-1":"#0184bb","hue-2":"#4078f2","hue-3":"#a626a4","hue-4":"#50a14f","hue-5":"#e45649","hue-5-2":"#c91243","hue-6":"#986801","hue-6-2":"#c18401",lineNumberTextColor:e.textColor3})},I=N([H("code","\n font-size: var(--n-font-size);\n font-family: var(--n-font-family);\n ",[B("show-line-numbers","\n display: flex;\n "),O("line-numbers","\n user-select: none;\n padding-right: 12px;\n text-align: right;\n transition: color .3s var(--n-bezier);\n color: var(--n-line-number-text-color);\n "),B("word-wrap",[N("pre","\n white-space: pre-wrap;\n word-break: break-all;\n ")]),N("pre","\n margin: 0;\n line-height: inherit;\n font-size: inherit;\n font-family: inherit;\n "),N("[class^=hljs]","\n color: var(--n-text-color);\n transition: \n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ")]),e=>{var n=`${e.props.bPrefix}code`;return[`${n} .hljs-comment,\n ${n} .hljs-quote {\n color: var(--n-mono-3);\n font-style: italic;\n }`,`${n} .hljs-doctag,\n ${n} .hljs-keyword,\n ${n} .hljs-formula {\n color: var(--n-hue-3);\n }`,`${n} .hljs-section,\n ${n} .hljs-name,\n ${n} .hljs-selector-tag,\n ${n} .hljs-deletion,\n ${n} .hljs-subst {\n color: var(--n-hue-5);\n }`,`${n} .hljs-literal {\n color: var(--n-hue-1);\n }`,`${n} .hljs-string,\n ${n} .hljs-regexp,\n ${n} .hljs-addition,\n ${n} .hljs-attribute,\n ${n} .hljs-meta-string {\n color: var(--n-hue-4);\n }`,`${n} .hljs-built_in,\n ${n} .hljs-class .hljs-title {\n color: var(--n-hue-6-2);\n }`,`${n} .hljs-attr,\n ${n} .hljs-variable,\n ${n} .hljs-template-variable,\n ${n} .hljs-type,\n ${n} .hljs-selector-class,\n ${n} .hljs-selector-attr,\n ${n} .hljs-selector-pseudo,\n ${n} .hljs-number {\n color: var(--n-hue-6);\n }`,`${n} .hljs-symbol,\n ${n} .hljs-bullet,\n ${n} .hljs-link,\n ${n} .hljs-meta,\n ${n} .hljs-selector-id,\n ${n} .hljs-title {\n color: var(--n-hue-2);\n }`,`${n} .hljs-emphasis {\n font-style: italic;\n }`,`${n} .hljs-strong {\n font-weight: var(--n-font-weight-strong);\n }`,`${n} .hljs-link {\n text-decoration: underline;\n }`]}]),V=Object.assign(Object.assign({},P.props),{language:String,code:{type:String,default:""},trim:{type:Boolean,default:!0},hljs:Object,uri:Boolean,inline:Boolean,wordWrap:Boolean,showLineNumbers:Boolean,internalFontSize:Number,internalNoHighlight:Boolean}),D=i({name:"Code",props:V,setup(n,r){var t=r.slots,i=n.internalNoHighlight,c=k(),h=c.mergedClsPrefixRef,f=c.inlineThemeDisabled,g=a(null),v=i?{value:void 0}:o(n),p=l((()=>!n.inline&&!n.wordWrap&&n.showLineNumbers)),m=()=>{if(!t.default){var e=g.value;if(e){var o=n.language,r=n.uri?window.decodeURIComponent(n.code):n.code;if(o){var l=((e,n,o)=>{var r=v.value;return r&&e&&r.getLanguage(e)?r.highlight(o?n.trim():n,{language:e}).value:null})(o,r,n.trim);if(null!==l){if(n.inline)e.innerHTML=l;else{var i=e.querySelector(".__code__");i&&e.removeChild(i);var a=document.createElement("pre");a.className="__code__",a.innerHTML=l,e.appendChild(a)}return}}if(n.inline)e.textContent=r;else{var s=e.querySelector(".__code__");if(s)s.textContent=r;else{var u=document.createElement("pre");u.className="__code__",u.textContent=r,e.innerHTML="",e.appendChild(u)}}}}};s(m),u(d(n,"language"),m),u(d(n,"code"),m),i||u(v,m);var b=P("Code","-code",I,A,n,h),y=l((()=>{var e=b.value,o=e.common,r=o.cubicBezierEaseInOut,t=o.fontFamilyMono,l=e.self,i=l.textColor,a=l.fontSize,s=l.fontWeightStrong,u=l.lineNumberTextColor,d=l["mono-3"],c=l["hue-1"],h=l["hue-2"],f=l["hue-3"],g=l["hue-4"],v=l["hue-5"],p=l["hue-5-2"],m=l["hue-6"],y=l["hue-6-2"],j=n.internalFontSize;return{"--n-font-size":j?`${j}px`:a,"--n-font-family":t,"--n-font-weight-strong":s,"--n-bezier":r,"--n-text-color":i,"--n-mono-3":d,"--n-hue-1":c,"--n-hue-2":h,"--n-hue-3":f,"--n-hue-4":g,"--n-hue-5":v,"--n-hue-5-2":p,"--n-hue-6":m,"--n-hue-6-2":y,"--n-line-number-text-color":u}})),j=f?R("code",l((()=>`${n.internalFontSize||"a"}`)),y,n):void 0;return{mergedClsPrefix:h,codeRef:g,mergedShowLineNumbers:p,lineNumbers:l((()=>{var o,r=1,t=[],l=!1,i=e(n.code);try{for(i.s();!(o=i.n()).done;){"\n"===o.value?(l=!0,t.push(r++)):l=!1}}catch(a){i.e(a)}finally{i.f()}return l||t.push(r++),t.join("\n")})),cssVars:f?void 0:y,themeClass:null==j?void 0:j.themeClass,onRender:null==j?void 0:j.onRender}},render(){var e,n,o=this.mergedClsPrefix,r=this.wordWrap,t=this.mergedShowLineNumbers,l=this.onRender;return null==l||l(),c("code",{class:[`${o}-code`,this.themeClass,r&&`${o}-code--word-wrap`,t&&`${o}-code--show-line-numbers`],style:this.cssVars,ref:"codeRef"},t?c("pre",{class:`${o}-code__line-numbers`},this.lineNumbers):null,null===(n=(e=this.$slots).default)||void 0===n?void 0:n.call(e))}}),U=M({name:"Log",common:z,peers:{Scrollbar:$,Code:A},self:e=>{var n=e.textColor2,o=e.modalColor,r=e.borderColor;return{loaderFontSize:e.fontSize,loaderTextColor:n,loaderColor:o,loaderBorder:`1px solid ${r}`,loadingColor:e.primaryColor}}}),G=i({name:"LogLoader",props:{clsPrefix:{type:String,required:!0}},setup:()=>({locale:C("Log").localeRef}),render(){var e=this.clsPrefix;return c("div",{class:`${e}-log-loader`},c(T,{clsPrefix:e,strokeWidth:24,scale:.85}),c("span",{class:`${e}-log-loader__content`},this.locale.loading))}}),Y=F("n-log"),J=i({props:{line:{type:String,default:""}},setup(e){var n=t(Y),o=n.trimRef,r=n.highlightRef,i=n.languageRef,c=n.mergedHljsRef,h=a(null),f=l((()=>o.value?e.line.trim():e.line));function g(){h.value&&(h.value.innerHTML=function(e,n){var o=c.value;if(o&&e&&o.getLanguage(e))return o.highlight(n,{language:e}).value;return n}(i.value,f.value))}return s((()=>{r.value&&g()})),u(d(e,"line"),(()=>{r.value&&g()})),{highlight:r,selfRef:h,maybeTrimmedLines:f}},render(){var e=this.highlight,n=this.maybeTrimmedLines;return c("pre",{ref:"selfRef"},e?null:n)}}),K=H("log","\n position: relative;\n box-sizing: border-box;\n transition: border-color .3s var(--n-bezier);\n",[N("pre","\n white-space: pre-wrap;\n word-break: break-word;\n margin: 0;\n "),H("log-loader","\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n box-sizing: border-box;\n position: absolute;\n right: 16px;\n top: 8px;\n height: 34px;\n border-radius: 17px;\n line-height: 34px;\n white-space: nowrap;\n overflow: hidden;\n border: var(--n-loader-border);\n color: var(--n-loader-text-color);\n background-color: var(--n-loader-color);\n font-size: var(--n-loader-font-size);\n ",[q(),O("content","\n display: inline-block;\n vertical-align: bottom;\n line-height: 34px;\n padding-left: 40px;\n padding-right: 20px;\n white-space: nowrap;\n "),H("base-loading","\n color: var(--n-loading-color);\n position: absolute;\n left: 12px;\n top: calc(50% - 10px);\n font-size: 20px;\n width: 20px;\n height: 20px;\n display: inline-block;\n ")])]),Q=Object.assign(Object.assign({},P.props),{loading:Boolean,trim:Boolean,log:String,fontSize:{type:Number,default:14},lines:{type:Array,default:()=>[]},lineHeight:{type:Number,default:1.25},language:String,rows:{type:Number,default:15},offsetTop:{type:Number,default:0},offsetBottom:{type:Number,default:0},hljs:Object,onReachTop:Function,onReachBottom:Function,onRequireMore:Function}),X=i({name:"Log",props:Q,setup(e){var n=k(e),r=n.mergedClsPrefixRef,t=n.inlineThemeDisabled,i=a(!1),s=l((()=>void 0!==e.language)),u=l((()=>`calc(${Math.round(e.rows*e.lineHeight*e.fontSize)}px)`)),c=l((()=>{var n=e.log;return n?n.split("\n"):e.lines})),f=a(null),v=P("Log","-log",K,U,e,r);var p=W((function(n){if(i.value)return void g((()=>{i.value=!1}));if(f.value){var o=f.value,r=o.containerRef,t=o.contentRef;if(r&&t){var l=r.offsetHeight,a=r.scrollTop,s=a,u=t.offsetHeight-a-l,d=n.deltaY;if(0===s&&d<0){var c=e.onRequireMore;c&&c("top")}if(u<=0&&d>0){var h=e.onRequireMore;h&&h("bottom")}}}}),300);function m(e){var n=f.value;if(n){var o=e.silent,r=e.top,t=e.position;o&&(i.value=!0),void 0!==r?n.scrollTo({left:0,top:r}):"bottom"!==t&&"top"!==t||n.scrollTo({position:t})}}h(Y,{languageRef:d(e,"language"),mergedHljsRef:o(e),trimRef:d(e,"trim"),highlightRef:s});var b={scrollTo:m},y=l((()=>{var e=v.value,n=e.self,o=n.loaderFontSize,r=n.loaderTextColor,t=n.loaderColor,l=n.loaderBorder,i=n.loadingColor;return{"--n-bezier":e.common.cubicBezierEaseInOut,"--n-loader-font-size":o,"--n-loader-border":l,"--n-loader-color":t,"--n-loader-text-color":r,"--n-loading-color":i}})),j=t?R("log",void 0,y,e):void 0;return Object.assign(Object.assign({},b),{mergedClsPrefix:r,scrollbarRef:f,mergedTheme:v,styleHeight:u,mergedLines:c,scrollToTop:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'top'})` instead."),m({position:"top",silent:e})},scrollToBottom:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'bottom'})` instead."),m({position:"bottom",silent:e})},handleWheel:p,handleScroll:function(n){var o=n.target,r=o.firstElementChild;if(i.value)g((()=>{i.value=!1}));else{var t=o.offsetHeight,l=o.scrollTop,a=r.offsetHeight-l-t;if(l<=e.offsetTop){var s=e.onReachTop,u=e.onRequireMore;u&&u("top"),s&&s()}if(a<=e.offsetBottom){var d=e.onReachBottom,c=e.onRequireMore;c&&c("bottom"),d&&d()}}},cssVars:t?void 0:y,themeClass:null==j?void 0:j.themeClass,onRender:null==j?void 0:j.onRender})},render(){var e=this.mergedClsPrefix,n=this.mergedTheme,o=this.onRender;return null==o||o(),c("div",{class:[`${e}-log`,this.themeClass],style:[{lineHeight:this.lineHeight,height:this.styleHeight},this.cssVars],onWheelPassive:this.handleWheel},[c(S,{ref:"scrollbarRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar,onScroll:this.handleScroll},{default:()=>c(D,{internalNoHighlight:!0,internalFontSize:this.fontSize,theme:n.peers.Code,themeOverrides:n.peerOverrides.Code},{default:()=>this.mergedLines.map(((e,n)=>c(J,{key:n,line:e})))})}),c(f,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?c(G,{clsPrefix:e}):null})])}}),Z=i({__name:"实时日志",setup(e){var n=a(!0);function o(){var e=new EventSource("/api/log/find");e.onmessage=function(e){e.data,t.value=t.value+e.data+"\r\n"},e.onopen=function(){},e.onerror=function(n){e.close()},e.addEventListener("myEvent",(function(e){e.data}),!1)}var t=a(""),l=()=>{r.get("/log/logSomethingGet",{}).then((()=>{}))},i=a();return s((()=>{v(t,(e=>{var n;null===(n=i.value)||void 0===n||n.scrollTo({position:"bottom",slient:!0})})),o()})),(e,r)=>{var a=w,s=X,u=E;return p(),m("div",null,[b(u,{vertical:"",class:"px-8 h-screen"},{default:y((()=>[b(a,{onClick:l},{default:y((()=>[j(" 添加数据 ")])),_:1}),b(a,{disabled:!0,onClick:o},{default:y((()=>[j(" Flux ")])),_:1}),b(s,{ref_key:"logInst",ref:i,loading:x(n),log:x(t),rows:45},null,8,["loading","log"])])),_:1})])}}}),ee=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));n("_",ee)}}}))}();
