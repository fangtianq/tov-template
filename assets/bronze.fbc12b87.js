import{d as U,H as B,l,I as z,J as F,Q as n,o as I,e as G,F as K,s as S,h as _,i as p,w as W,f as c,t as L,K as H,L as D,A as M,r as v,j as k,k as N}from"./index.1f85ee33.js";const $={class:"flex justify-center items-center flex-col"},j=c("h1",{class:"text-7xl"},"LiveQuery",-1),q={class:"w-50 pl-2 pr-2 inline-block"},J={class:"inline-block"},Y=c("div",{class:"cursor-move"},"\u{1F44B} Drag here!",-1),P=c("div",{class:"text-xs opacity-50"},"Handle that triggers the drag event",-1),X={class:"text-sm opacity-50"},ee=U({__name:"bronze",setup(Z){const m=B(n.TODO.name);let d=l();m.find().then(t=>{d.value=t}),m.subscribe().then(t=>{t.on("create",e=>{d.value.push(e)}),t.on("enter",(e,s)=>{}),t.on("update",(e,s)=>{const o=d.value.findIndex(h=>h.id==(e==null?void 0:e.id));d.value[o]=e}),t.on("delete",e=>{d.value=d.value.filter(s=>s.id!=(e==null?void 0:e.id))})});const R=()=>{const t=D.Object.extend(n.TODO.name),e=new t;e.set(n.TODO.keys.content,"Hello world!"),e.set(n.TODO.keys.done,!0),e.set(n.TODO.keys.user,M()()),e.save().then(s=>{})},E=(t,e)=>{const s=D.Object.createWithoutData(n.TODO.name,t);s.set(n.TODO.keys.done,e),s.save()},T=(t,e)=>{const s=D.Object.createWithoutData(n.TODO.name,t);s.set(n.TODO.keys.content,e),s.save()},V=t=>{D.Object.createWithoutData(n.TODO.name,t).destroy()},O=l(null);let{x:r,y:u,style:w}=z(O,{initialValue:{x:40,y:40}});const[f,g]=[l(r),l(u)];let y=l();F([f,g],()=>{const t=D.Object.createWithoutData(n.DRAGGABLE.name,y.value);t.set(n.DRAGGABLE.keys.x,f.value),t.set(n.DRAGGABLE.keys.y,g.value),t.save()},{debounce:500});const x=B(n.DRAGGABLE.name),b=(t,e)=>{const s=D.Object.extend(n.DRAGGABLE.name),o=new s;return o.set(n.DRAGGABLE.keys.name,"bronzeDrag"),o.set(n.DRAGGABLE.keys.x,t),o.set(n.DRAGGABLE.keys.y,e),o.save(),o},A=t=>{if(t){r.value=t.x,u.value=t.y;return}x.find().then(e=>{if(!(e!=null&&e.length))A(b(40,40));else{const s=e.filter(o=>o.get(n.DRAGGABLE.keys.name)=="bronzeDrag")[0];r.value=s.get(n.DRAGGABLE.keys.x),u.value=s.get(n.DRAGGABLE.keys.y),y=l(s.id)}},e=>{e.code=="101"&&A(b(40,40))})};return x.subscribe().then(t=>{t.on("create",e=>{y=l(e.id),r.value=e.get(n.DRAGGABLE.keys.x),u.value=e.get(n.DRAGGABLE.keys.y)}),t.on("enter",(e,s)=>{}),t.on("update",(e,s)=>{y=l(e.id),r.value=e.get(n.DRAGGABLE.keys.x),u.value=e.get(n.DRAGGABLE.keys.y)}),t.on("delete",e=>{})}),I(()=>{}),A(null),(t,e)=>{const s=v("el-switch"),o=v("el-input"),h=v("i-mdi:delete"),C=v("el-button");return k(),G("div",$,[j,(k(!0),G(K,null,S(_(d),a=>(k(),G("div",{key:a.id,class:"flex items-center justify-center p-2"},[p(s,{modelValue:a.attributes.done,"onUpdate:modelValue":i=>a.attributes.done=i,onClick:i=>E(a.id,a.attributes.done)},null,8,["modelValue","onUpdate:modelValue","onClick"]),c("div",q,[p(o,{modelValue:a.attributes.content,"onUpdate:modelValue":i=>a.attributes.content=i,clearable:"",onInput:i=>T(a.id,a.attributes.content)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),c("div",J,[p(h,{class:"mt-1",onClick:i=>V(a.id)},null,8,["onClick"])])]))),128)),p(C,{onClick:R},{default:W(()=>[N(" \u70B9\u51FB\u6DFB\u52A0")]),_:1}),c("div",{ref_key:"settingRef",ref:O,style:H(_(w)),class:"bg-light-50 fixed shadow select-none z-10 hover:shadow-lg px-4 py-2 border-gray-400/30 rounded fixed"},[Y,P,c("div",X," I am at "+L(Math.round(_(r)))+", "+L(Math.round(_(u))),1)],4)])}}});export{ee as default};
