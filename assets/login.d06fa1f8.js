import{d as f,ak as E,l as k,o as F,al as V,e as y,i as s,w as n,am as B,an as b,m as C,ao as R,j as S,f as a,k as d,ap as P,aq as c,ai as N,ar as T}from"./index.13d9b1d7.js";import{E as U,a as M}from"./el-form-item.3820b746.js";import{E as j}from"./el-button.5888cfd4.js";import{E as I}from"./el-input.4c6f286b.js";import{_ as $}from"./favicon.eb9475ba.js";import{b as _}from"./route-block.6a611cbf.js";import"./error.7e8331f1.js";import"./index.a034e4dc.js";import"./index.4f3c04c6.js";import"./index.8bfffa1c.js";import"./event.776e7e11.js";const q={class:"bg-white h-screen font-github"},A={class:"flex justify-center items-center flex-col"},D=a("div",{class:"p-8"},[a("img",{src:$,class:"w-12 h-12",alt:"tov"})],-1),z=a("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign in to tov-template ",-1),G={class:"h-57 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},H=a("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[d(" New to Tov? "),a("a",{href:"signup",class:"text-github_a"},"Create an account"),d(" . ")],-1),J=f({name:"***",beforeRouteEnter(g,i,e){e(l=>{B.isEmpty(b().value)||l.router.replace(i.path)})}}),K=f({...J,setup(g,{expose:i}){const e=E({username:"",password:""}),l=k(),p=C(),h=R();F(()=>{});const v=m=>{!m||m.validate(o=>{if(o)P()(e.username,e.password).then(t=>{b().value=t.getSessionToken(),c.success(`\u767B\u5F55\u6210\u529F\uFF0C\u6B22\u8FCE\u60A8${t.getUsername()}\u56DE\u6765~`);let{fromParams:r}=N(T());p.push(r.value.fromPath)},t=>{c.error(t.rawMessage)});else return!1})};return i({router:p,currentUser:V,route:h}),(m,o)=>{const t=I,r=U,w=j,x=M;return S(),y("div",q,[s(x,{ref_key:"ruleFormRef",ref:l,model:e,"label-position":"top"},{default:n(()=>[a("div",A,[D,z,a("div",G,[s(r,{label:"Phone number"},{default:n(()=>[s(t,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=u=>e.username=u)},null,8,["modelValue"])]),_:1}),s(r,{label:"Password"},{default:n(()=>[s(t,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=u=>e.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(r,null,{default:n(()=>[s(w,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:o[2]||(o[2]=u=>v(l.value))},{default:n(()=>[d("Sign in")]),_:1})]),_:1})]),H])]),_:1},8,["model"])])}}});typeof _=="function"&&_(K);export{K as default};
