!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,h=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){h=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(h)throw r}}return o}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}System.register(["./stats.module-legacy.d830d176.js","./index-legacy.c981faa3.js"],(function(i,n){"use strict";var r,s,a,o,l,h,d,u,c,p,m,g,v,f,A,w,b,x,y,_,E,T,R,S,L,C,I,M,k,O,N,F,H,P,$,D,B,j,U,G,V,K,z,X,Y,W,q,J,Q,Z,ee,te,ie,ne,re,se,ae,oe,le,he,de,ue,ce,pe,me,ge,ve,fe,Ae,we,be,xe,ye,_e,Ee,Te,Re,Se;return{setters:[e=>{r=e.f,s=e.g,a=e.h,o=e.L,l=e.i,h=e.F,d=e.C,u=e.j,c=e.k,p=e.D,m=e.l,g=e.m,v=e.n,f=e.a,A=e.o,w=e.V,b=e.I,x=e.O,y=e.p,_=e.q,E=e.r,T=e.s,R=e.t,S=e.u,L=e.R,C=e.v,I=e.w,M=e.x,k=e.y,O=e.z,N=e.G,F=e.H,H=e.J,P=e.c,$=e.K,D=e.N,B=e.U,j=e.X,U=e.Y,G=e.P,V=e.Z,K=e._,z=e.$,X=e.a0,Y=e.a1,W=e.a2,q=e.Q,J=e.a3,Q=e.a4,Z=e.a5,ee=e.a6,te=e.a7,ie=e.a8,ne=e.a9,re=e.aa,se=e.ab,ae=e.ac,oe=e.ad,le=e.ae,he=e.af,de=e.ag,ue=e.ah,ce=e.ai,pe=e.e,me=e.aj,ge=e.ak,ve=e.al,fe=e.am,Ae=e.an,we=e.ao,be=e.W,xe=e.ap,ye=e.d,_e=e.aq},e=>{Ee=e.d,Te=e.x,Re=e.o,Se=e.P}],execute:function(){function Le(e,t){if(t===r)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===s||t===a){var i=e.getIndex();if(null===i){var n=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var l=0;l<o.count;l++)n.push(l);e.setIndex(n),i=e.getIndex()}var h=i.count-2,d=[];if(t===s)for(var u=1;u<=h;u++)d.push(i.getX(0)),d.push(i.getX(u)),d.push(i.getX(u+1));else for(var c=0;c<h;c++)c%2==0?(d.push(i.getX(c)),d.push(i.getX(c+1)),d.push(i.getX(c+2))):(d.push(i.getX(c+2)),d.push(i.getX(c+1)),d.push(i.getX(c)));d.length/3!==h&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var p=e.clone();return p.setIndex(d),p.clearGroups(),p}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class Ce extends o{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Fe(e)})),this.register((function(e){return new Ge(e)})),this.register((function(e){return new Ve(e)})),this.register((function(e){return new Ke(e)})),this.register((function(e){return new Pe(e)})),this.register((function(e){return new $e(e)})),this.register((function(e){return new De(e)})),this.register((function(e){return new Be(e)})),this.register((function(e){return new Ne(e)})),this.register((function(e){return new je(e)})),this.register((function(e){return new He(e)})),this.register((function(e){return new Ue(e)})),this.register((function(e){return new ke(e)})),this.register((function(e){return new ze(e)})),this.register((function(e){return new Xe(e)}))}load(e,t,i,n){var r,s=this;r=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:l.extractUrlBase(e),this.manager.itemStart(e);var a=function(t){n?n(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},o=new h(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{s.parse(i,r,(function(i){t(i),s.manager.itemEnd(e)}),a)}catch(n){a(n)}}),i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){var r,s={},a={},o=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(o.decode(new Uint8Array(e,0,4))===Ye){try{s[Me.KHR_BINARY_GLTF]=new Je(e)}catch(m){return void(n&&n(m))}r=JSON.parse(s[Me.KHR_BINARY_GLTF].content)}else r=JSON.parse(o.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new yt(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var h=0;h<this.pluginCallbacks.length;h++){var d=this.pluginCallbacks[h](l);a[d.name]=d,s[d.name]=!0}if(r.extensionsUsed)for(var u=0;u<r.extensionsUsed.length;++u){var c=r.extensionsUsed[u],p=r.extensionsRequired||[];switch(c){case Me.KHR_MATERIALS_UNLIT:s[c]=new Oe;break;case Me.KHR_DRACO_MESH_COMPRESSION:s[c]=new Qe(r,this.dracoLoader);break;case Me.KHR_TEXTURE_TRANSFORM:s[c]=new Ze;break;case Me.KHR_MESH_QUANTIZATION:s[c]=new et;break;default:p.indexOf(c)>=0&&void 0===a[c]&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(i,n)}}parseAsync(e,t){var i=this;return new Promise((function(n,r){i.parse(e,t,n,r)}))}}function Ie(){var e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var Me={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ke{constructor(e){this.parser=e,this.name=Me.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){for(var e=this.parser,t=this.parser.json.nodes||[],i=0,n=t.length;i<n;i++){var r=t[i];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){var t=this.parser,i="light:"+e,n=t.cache.get(i);if(n)return n;var r,s=t.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e],o=new d(16777215);void 0!==a.color&&o.fromArray(a.color);var l=void 0!==a.range?a.range:0;switch(a.type){case"directional":(r=new p(o)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new c(o)).distance=l;break;case"spot":(r=new u(o)).distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,r.angle=a.spot.outerConeAngle,r.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return r.position.set(0,0,0),r.decay=2,vt(r,a),void 0!==a.intensity&&(r.intensity=a.intensity),r.name=t.createUniqueName(a.name||"light_"+e),n=Promise.resolve(r),t.cache.add(i,n),n}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){var t=this,i=this.parser,n=i.json.nodes[e],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return i._getNodeRef(t.cache,r,e)}))}}class Oe{constructor(){this.name=Me.KHR_MATERIALS_UNLIT}getMaterialType(){return m}extendParams(e,t,i){var n=[];e.color=new d(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var s=r.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(e,"map",r.baseColorTexture,g))}return Promise.all(n)}}class Ne{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){var i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var n=i.extensions[this.name].emissiveStrength;return void 0!==n&&(t.emissiveIntensity=n),Promise.resolve()}}class Fe{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],s=n.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){var a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new f(a,a)}return Promise.all(r)}}class He{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],s=n.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(r)}}class Pe{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_SHEEN}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[];t.sheenColor=new d(0,0,0),t.sheenRoughness=0,t.sheen=1;var s=n.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,g)),void 0!==s.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class $e{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],s=n.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class De{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_VOLUME}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],s=n.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;var a=s.attenuationColor||[1,1,1];return t.attenuationColor=new d(a[0],a[1],a[2]),Promise.all(r)}}class Be{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_IOR}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var n=i.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class je{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_SPECULAR}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],s=n.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));var a=s.specularColorFactor||[1,1,1];return t.specularColor=new d(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,g)),Promise.all(r)}}class Ue{constructor(e){this.parser=e,this.name=Me.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],s=n.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&r.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(r)}}class Ge{constructor(e){this.parser=e,this.name=Me.KHR_TEXTURE_BASISU}loadTexture(e){var t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var r=n.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,s)}}class Ve{constructor(e){this.parser=e,this.name=Me.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){var t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;var s=r.extensions[t],a=n.images[s.source],o=i.textureLoader;if(a.uri){var l=i.options.manager.getHandler(a.uri);null!==l&&(o=l)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,s.source,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Ke{constructor(e){this.parser=e,this.name=Me.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){var t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;var s=r.extensions[t],a=n.images[s.source],o=i.textureLoader;if(a.uri){var l=i.options.manager.getHandler(a.uri);null!==l&&(o=l)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,s.source,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class ze{constructor(e){this.name=Me.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){var t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){var n=i.extensions[this.name],r=this.parser.getDependency("buffer",n.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){var t=n.byteOffset||0,i=n.byteLength||0,r=n.count,a=n.byteStride,o=new Uint8Array(e,t,i);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(r,a,o,n.mode,n.filter).then((function(e){return e.buffer})):s.ready.then((function(){var e=new ArrayBuffer(r*a);return s.decodeGltfBuffer(new Uint8Array(e),r,a,o,n.mode,n.filter),e}))}))}return null}}class Xe{constructor(e){this.name=Me.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){var i=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var s,a=t(n.meshes[r.mesh].primitives);try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o.mode!==rt.TRIANGLES&&o.mode!==rt.TRIANGLE_STRIP&&o.mode!==rt.TRIANGLE_FAN&&void 0!==o.mode)return null}}catch(p){a.e(p)}finally{a.f()}var l=r.extensions[this.name].attributes,h=[],d={},u=function(e){h.push(i.parser.getDependency("accessor",l[e]).then((t=>(d[e]=t,d[e]))))};for(var c in l)u(c);return h.length<1?null:(h.push(this.parser.createNodeMesh(e)),Promise.all(h).then((e=>{var i,n=e.pop(),r=n.isGroup?n.children:[n],s=e[0].count,a=[],o=t(r);try{for(o.s();!(i=o.n()).done;){for(var l=i.value,h=new A,u=new w,c=new q,m=new w(1,1,1),g=new b(l.geometry,l.material,s),v=0;v<s;v++)d.TRANSLATION&&u.fromBufferAttribute(d.TRANSLATION,v),d.ROTATION&&c.fromBufferAttribute(d.ROTATION,v),d.SCALE&&m.fromBufferAttribute(d.SCALE,v),g.setMatrixAt(v,h.compose(u,c,m));for(var f in d)"TRANSLATION"!==f&&"ROTATION"!==f&&"SCALE"!==f&&l.geometry.setAttribute(f,d[f]);x.prototype.copy.call(g,l),this.parser.assignFinalMaterial(g),a.push(g)}}catch(p){o.e(p)}finally{o.f()}return n.isGroup?(n.clear(),n.add(...a),n):a[0]})))}}var Ye="glTF",We=1313821514,qe=5130562;class Je{constructor(e){this.name=Me.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ye)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n=this.header.length-12,r=new DataView(e,12),s=0;s<n;){var a=r.getUint32(s,!0);s+=4;var o=r.getUint32(s,!0);if(s+=4,o===We){var l=new Uint8Array(e,12+s,a);this.content=i.decode(l)}else if(o===qe){var h=12+s;this.body=e.slice(h,h+a)}s+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Qe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Me.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){var i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},o={},l={};for(var h in s){var d=ht[h]||h.toLowerCase();a[d]=s[h]}for(var u in e.attributes){var c=ht[u]||u.toLowerCase();if(void 0!==s[u]){var p=i.accessors[e.attributes[u]],m=st[p.componentType];l[c]=m.name,o[c]=!0===p.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var i in e.attributes){var n=e.attributes[i],r=o[i];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class Ze{constructor(){this.name=Me.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class et{constructor(){this.name=Me.KHR_MESH_QUANTIZATION}}class tt extends ce{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n*3+n,s=0;s!==n;s++)t[s]=i[r+s];return t}interpolate_(e,t,i,n){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,h=n-t,d=(i-t)/h,u=d*d,c=u*d,p=e*l,m=p-l,g=-2*c+3*u,v=c-u,f=1-g,A=v-u+d,w=0;w!==a;w++){var b=s[m+w+a],x=s[m+w+o]*h,y=s[p+w+a],_=s[p+w]*h;r[w]=f*b+A*x+g*y+v*_}return r}}var it=new q;class nt extends tt{interpolate_(e,t,i,n){var r=super.interpolate_(e,t,i,n);return it.fromArray(r).normalize().toArray(r),r}}var rt={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},st={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},at={9728:J,9729:R,9984:Q,9985:Z,9986:ee,9987:S},ot={33071:te,33648:ie,10497:L},lt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ht={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},dt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ut={CUBICSPLINE:void 0,LINEAR:W,STEP:ne},ct="OPAQUE",pt="MASK",mt="BLEND";function gt(e,t,i){for(var n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function vt(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ft(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(var s=0,a=r.length;s<a;s++)e.morphTargetDictionary[r[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function At(e){var t,i=e.extensions&&e.extensions[Me.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+wt(i.attributes):e.indices+":"+wt(e.attributes)+":"+e.mode,void 0!==e.targets)for(var n=0,r=e.targets.length;n<r;n++)t+=":"+wt(e.targets[n]);return t}function wt(e){for(var t="",i=Object.keys(e).sort(),n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function bt(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var xt=new A;class yt{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ie,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var i=!1,n=!1,r=-1;"undefined"!=typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=(n=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||i||n&&r<98?this.textureLoader=new y(this.options.manager):this.textureLoader=new _(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new h(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){var i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(t){var s={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:i,userData:{}};gt(r,s,n),vt(s,n),Promise.all(i._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],n=0,r=t.length;n<r;n++)for(var s=t[n].joints,a=0,o=s.length;a<o;a++)e[s[a]].isBone=!0;for(var l=0,h=e.length;l<h;l++){var d=e[l];void 0!==d.mesh&&(this._addNodeRef(this.meshCache,d.mesh),void 0!==d.skin&&(i[d.mesh].isSkinnedMesh=!0)),void 0!==d.camera&&this._addNodeRef(this.cameraCache,d.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(i,n,r){if(i.refs[n]<=1)return r;var s=r.clone(),a=(i,n)=>{var r=this.associations.get(i);null!=r&&this.associations.set(n,r);var s,o=t(i.children.entries());try{for(o.s();!(s=o.n()).done;){var l=e(s.value,2),h=l[0],d=l[1];a(d,n.children[h])}}catch(u){o.e(u)}finally{o.f()}};return a(r,s),s.name+="_instance_"+i.uses[n]++,s}_invokeOne(e){var t=Object.values(this.plugins);t.push(this);for(var i=0;i<t.length;i++){var n=e(t[i]);if(n)return n}return null}_invokeAll(e){var t=Object.values(this.plugins);t.unshift(this);for(var i=[],n=0;n<t.length;n++){var r=e(t[n]);r&&i.push(r)}return i}getDependency(e,t){var i=e+":"+t,n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":n=this.loadCamera(t);break;default:if(!(n=this._invokeOne((function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n}getDependencies(e){var t=this.cache.get(e);if(!t){var i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return i.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){var t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Me.KHR_BINARY_GLTF].body);var n=this.options;return new Promise((function(e,r){i.load(l.resolveURL(t.uri,n.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)}))}loadAccessor(e){var t=this,i=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse){var r=lt[n.type],s=st[n.componentType],a=!0===n.normalized,o=new s(n.count*r);return Promise.resolve(new E(o,r,a))}var l=[];return void 0!==n.bufferView?l.push(this.getDependency("bufferView",n.bufferView)):l.push(null),void 0!==n.sparse&&(l.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(l).then((function(e){var r,s,a=e[0],o=lt[n.type],l=st[n.componentType],h=l.BYTES_PER_ELEMENT,d=h*o,u=n.byteOffset||0,c=void 0!==n.bufferView?i.bufferViews[n.bufferView].byteStride:void 0,p=!0===n.normalized;if(c&&c!==d){var m=Math.floor(u/c),g="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+m+":"+n.count,v=t.cache.get(g);v||(r=new l(a,m*c,n.count*c/h),v=new T(r,c/h),t.cache.add(g,v)),s=new se(v,o,u%c/h,p)}else r=null===a?new l(n.count*o):new l(a,u,n.count*o),s=new E(r,o,p);if(void 0!==n.sparse){var f=lt.SCALAR,A=st[n.sparse.indices.componentType],w=n.sparse.indices.byteOffset||0,b=n.sparse.values.byteOffset||0,x=new A(e[1],w,n.sparse.count*f),y=new l(e[2],b,n.sparse.count*o);null!==a&&(s=new E(s.array.slice(),s.itemSize,s.normalized));for(var _=0,R=x.length;_<R;_++){var S=x[_];if(s.setX(S,y[_*o]),o>=2&&s.setY(S,y[_*o+1]),o>=3&&s.setZ(S,y[_*o+2]),o>=4&&s.setW(S,y[_*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return s}))}loadTexture(e){var t=this.json,i=this.options,n=t.textures[e].source,r=t.images[n],s=this.textureLoader;if(r.uri){var a=i.manager.getHandler(r.uri);null!==a&&(s=a)}return this.loadTextureImage(e,n,s)}loadTextureImage(e,t,i){var n=this,r=this.json,s=r.textures[e],a=r.images[t],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];var l=this.loadImageSource(t,i).then((function(t){t.flipY=!1,t.name=s.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);var i=(r.samplers||{})[s.sampler]||{};return t.magFilter=at[i.magFilter]||R,t.minFilter=at[i.minFilter]||S,t.wrapS=ot[i.wrapS]||L,t.wrapT=ot[i.wrapT]||L,n.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(e,t){var i=this.json,n=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));var r=i.images[e],s=self.URL||self.webkitURL,a=r.uri||"",o=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then((function(e){o=!0;var t=new Blob([e],{type:r.mimeType});return a=s.createObjectURL(t)}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var h=Promise.resolve(a).then((function(e){return new Promise((function(i,r){var s=i;!0===t.isImageBitmapLoader&&(s=function(e){var t=new ae(e);t.needsUpdate=!0,i(t)}),t.load(l.resolveURL(e,n.path),s,void 0,r)}))})).then((function(e){var t;return!0===o&&s.revokeObjectURL(a),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=h,h}assignTexture(e,t,i,n){var r=this;return this.getDependency("texture",i.index).then((function(s){if(!s)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((s=s.clone()).channel=i.texCoord),r.extensions[Me.KHR_TEXTURE_TRANSFORM]){var a=void 0!==i.extensions?i.extensions[Me.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var o=r.associations.get(s);s=r.extensions[Me.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),r.associations.set(s,o)}}return void 0!==n&&(s.colorSpace=n),e[t]=s,s}))}assignFinalMaterial(e){var t=e.geometry,i=e.material,n=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){var a="PointsMaterial:"+i.uuid,o=this.cache.get(a);o||(o=new C,I.prototype.copy.call(o,i),o.color.copy(i.color),o.map=i.map,o.sizeAttenuation=!1,this.cache.add(a,o)),i=o}else if(e.isLine){var l="LineBasicMaterial:"+i.uuid,h=this.cache.get(l);h||(h=new M,I.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,this.cache.add(l,h)),i=h}if(n||r||s){var d="ClonedMaterial:"+i.uuid+":";n&&(d+="derivative-tangents:"),r&&(d+="vertex-colors:"),s&&(d+="flat-shading:");var u=this.cache.get(d);u||(u=i.clone(),r&&(u.vertexColors=!0),s&&(u.flatShading=!0),n&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(d,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return k}loadMaterial(e){var t,i=this,n=this.json,r=this.extensions,s=n.materials[e],a={},o=[];if((s.extensions||{})[Me.KHR_MATERIALS_UNLIT]){var l=r[Me.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),o.push(l.extendParams(a,s,i))}else{var h=s.pbrMetallicRoughness||{};if(a.color=new d(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){var u=h.baseColorFactor;a.color.fromArray(u),a.opacity=u[3]}void 0!==h.baseColorTexture&&o.push(i.assignTexture(a,"map",h.baseColorTexture,g)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(o.push(i.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),o.push(i.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),o.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===s.doubleSided&&(a.side=O);var c=s.alphaMode||ct;if(c===mt?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===pt&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==m&&(o.push(i.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new f(1,1),void 0!==s.normalTexture.scale)){var p=s.normalTexture.scale;a.normalScale.set(p,p)}return void 0!==s.occlusionTexture&&t!==m&&(o.push(i.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==m&&(a.emissive=(new d).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==m&&o.push(i.assignTexture(a,"emissiveMap",s.emissiveTexture,g)),Promise.all(o).then((function(){var n=new t(a);return s.name&&(n.name=s.name),vt(n,s),i.associations.set(n,{materials:e}),s.extensions&&gt(r,n,s),n}))}createUniqueName(e){var t=N.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){var t=this,i=this.extensions,n=this.primitiveCache;function r(e){return i[Me.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(i){return _t(i,e,t)}))}for(var s=[],a=0,o=e.length;a<o;a++){var l=e[a],h=At(l),d=n[h];if(d)s.push(d.promise);else{var u=void 0;u=l.extensions&&l.extensions[Me.KHR_DRACO_MESH_COMPRESSION]?r(l):_t(new F,l,t),n[h]={primitive:l,promise:u},s.push(u)}}return Promise.all(s)}loadMesh(e){for(var t,i=this,n=this.json,r=this.extensions,o=n.meshes[e],l=o.primitives,h=[],d=0,u=l.length;d<u;d++){var c=void 0===l[d].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new k({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:re})),t.DefaultMaterial):this.getDependency("material",l[d].material);h.push(c)}return h.push(i.loadGeometries(l)),Promise.all(h).then((function(t){for(var n=t.slice(0,t.length-1),h=t[t.length-1],d=[],u=0,c=h.length;u<c;u++){var p=h[u],m=l[u],g=void 0,v=n[u];if(m.mode===rt.TRIANGLES||m.mode===rt.TRIANGLE_STRIP||m.mode===rt.TRIANGLE_FAN||void 0===m.mode)!0===(g=!0===o.isSkinnedMesh?new H(p,v):new P(p,v)).isSkinnedMesh&&g.normalizeSkinWeights(),m.mode===rt.TRIANGLE_STRIP?g.geometry=Le(g.geometry,a):m.mode===rt.TRIANGLE_FAN&&(g.geometry=Le(g.geometry,s));else if(m.mode===rt.LINES)g=new $(p,v);else if(m.mode===rt.LINE_STRIP)g=new D(p,v);else if(m.mode===rt.LINE_LOOP)g=new B(p,v);else{if(m.mode!==rt.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);g=new j(p,v)}Object.keys(g.geometry.morphAttributes).length>0&&ft(g,o),g.name=i.createUniqueName(o.name||"mesh_"+e),vt(g,o),m.extensions&&gt(r,g,m),i.assignFinalMaterial(g),d.push(g)}for(var f=0,A=d.length;f<A;f++)i.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return o.extensions&&gt(r,d[0],o),d[0];var w=new U;o.extensions&&gt(r,w,o),i.associations.set(w,{meshes:e});for(var b=0,x=d.length;b<x;b++)w.add(d[b]);return w}))}loadCamera(e){var t,i=this.json.cameras[e],n=i[i.type];if(n)return"perspective"===i.type?t=new G(V.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(t=new K(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),vt(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){for(var t=this.json.skins[e],i=[],n=0,r=t.joints.length;n<r;n++)i.push(this._loadNodeShallow(t.joints[n]));return void 0!==t.inverseBindMatrices?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then((function(e){for(var i=e.pop(),n=e,r=[],s=[],a=0,o=n.length;a<o;a++){var l=n[a];if(l){r.push(l);var h=new A;null!==i&&h.fromArray(i.array,16*a),s.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new z(r,s)}))}loadAnimation(e){for(var t=this.json,i=this,n=t.animations[e],r=n.name?n.name:"animation_"+e,s=[],a=[],o=[],l=[],h=[],d=0,u=n.channels.length;d<u;d++){var c=n.channels[d],p=n.samplers[c.sampler],m=c.target,g=m.node,v=void 0!==n.parameters?n.parameters[p.input]:p.input,f=void 0!==n.parameters?n.parameters[p.output]:p.output;void 0!==m.node&&(s.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",v)),o.push(this.getDependency("accessor",f)),l.push(p),h.push(m))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(h)]).then((function(e){for(var t=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=[],h=0,d=t.length;h<d;h++){var u=t[h],c=n[h],p=s[h],m=a[h],g=o[h];if(void 0!==u){u.updateMatrix&&(u.updateMatrix(),u.matrixAutoUpdate=!0);var v=i._createAnimationTracks(u,c,p,m,g);if(v)for(var f=0;f<v.length;f++)l.push(v[f])}}return new X(r,void 0,l)}))}createNodeMesh(e){var t=this.json,i=this,n=t.nodes[e];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then((function(e){var t=i._getNodeRef(i.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,i=n.weights.length;t<i;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){for(var t=this,i=this.json.nodes[e],n=t._loadNodeShallow(e),r=[],s=i.children||[],a=0,o=s.length;a<o;a++)r.push(t.getDependency("node",s[a]));var l=void 0===i.skin?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([n,Promise.all(r),l]).then((function(e){var t=e[0],i=e[1],n=e[2];null!==n&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(n,xt)}));for(var r=0,s=i.length;r<s;r++)t.add(i[r]);return t}))}_loadNodeShallow(e){var t=this.json,i=this.extensions,n=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var r=t.nodes[e],s=r.name?n.createUniqueName(r.name):"",a=[],o=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return o&&a.push(o),void 0!==r.camera&&a.push(n.getDependency("camera",r.camera).then((function(e){return n._getNodeRef(n.cameraCache,r.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){var a;if((a=!0===r.isBone?new Y:t.length>1?new U:1===t.length?t[0]:new x)!==t[0])for(var o=0,l=t.length;o<l;o++)a.add(t[o]);if(r.name&&(a.userData.name=r.name,a.name=s),vt(a,r),r.extensions&&gt(i,a,r),void 0!==r.matrix){var h=new A;h.fromArray(r.matrix),a.applyMatrix4(h)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return n.associations.has(a)||n.associations.set(a,{}),n.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(i){var n=this.extensions,r=this.json.scenes[i],s=this,a=new U;r.name&&(a.name=s.createUniqueName(r.name)),vt(a,r),r.extensions&&gt(n,a,r);for(var o=r.nodes||[],l=[],h=0,d=o.length;h<d;h++)l.push(s.getDependency("node",o[h]));return Promise.all(l).then((function(i){for(var n=0,r=i.length;n<r;n++)a.add(i[n]);return s.associations=(i=>{var n,r=new Map,a=t(s.associations);try{for(a.s();!(n=a.n()).done;){var o=e(n.value,2),l=o[0],h=o[1];(l instanceof I||l instanceof ae)&&r.set(l,h)}}catch(d){a.e(d)}finally{a.f()}return i.traverse((e=>{var t=s.associations.get(e);null!=t&&r.set(e,t)})),r})(a),a}))}_createAnimationTracks(e,t,i,n,r){var s,a=[],o=e.name?e.name:e.uuid,l=[];switch(dt[r.path]===dt.weights?e.traverse((function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)})):l.push(o),dt[r.path]){case dt.weights:s=le;break;case dt.rotation:s=he;break;default:switch(i.itemSize){case 1:s=le;break;case 2:case 3:s=oe}}for(var h=void 0!==n.interpolation?ut[n.interpolation]:W,d=this._getArrayFromAccessor(i),u=0,c=l.length;u<c;u++){var p=new s(l[u]+"."+dt[r.path],t.array,d,h);"CUBICSPLINE"===h&&this._createCubicSplineTrackInterpolant(p),a.push(p)}return a}_getArrayFromAccessor(e){var t=e.array;if(e.normalized){for(var i=bt(t.constructor),n=new Float32Array(t.length),r=0,s=t.length;r<s;r++)n[r]=t[r]*i;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof he?nt:tt)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function _t(e,t,i){var n=t.attributes,r=[];function s(t,n){return i.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var a in n){var o=ht[a]||a.toLowerCase();o in e.attributes||r.push(s(n[a],o))}if(void 0!==t.indices&&!e.index){var l=i.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(l)}return vt(e,t),function(e,t,i){var n=t.attributes,r=new de;if(void 0!==n.POSITION){var s=i.json.accessors[n.POSITION],a=s.min,o=s.max;if(void 0!==a&&void 0!==o){if(r.set(new w(a[0],a[1],a[2]),new w(o[0],o[1],o[2])),s.normalized){var l=bt(st[s.componentType]);r.min.multiplyScalar(l),r.max.multiplyScalar(l)}var h=t.targets;if(void 0!==h){for(var d=new w,u=new w,c=0,p=h.length;c<p;c++){var m=h[c];if(void 0!==m.POSITION){var g=i.json.accessors[m.POSITION],v=g.min,f=g.max;if(void 0!==v&&void 0!==f){if(u.setX(Math.max(Math.abs(v[0]),Math.abs(f[0]))),u.setY(Math.max(Math.abs(v[1]),Math.abs(f[1]))),u.setZ(Math.max(Math.abs(v[2]),Math.abs(f[2]))),g.normalized){var A=bt(st[g.componentType]);u.multiplyScalar(A)}d.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(d)}e.boundingBox=r;var b=new ue;r.getCenter(b.center),b.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,i),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,i){for(var n=!1,r=!1,s=!1,a=0,o=t.length;a<o;a++){var l=t[a];if(void 0!==l.POSITION&&(n=!0),void 0!==l.NORMAL&&(r=!0),void 0!==l.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(e);for(var h=[],d=[],u=[],c=0,p=t.length;c<p;c++){var m=t[c];if(n){var g=void 0!==m.POSITION?i.getDependency("accessor",m.POSITION):e.attributes.position;h.push(g)}if(r){var v=void 0!==m.NORMAL?i.getDependency("accessor",m.NORMAL):e.attributes.normal;d.push(v)}if(s){var f=void 0!==m.COLOR_0?i.getDependency("accessor",m.COLOR_0):e.attributes.color;u.push(f)}}return Promise.all([Promise.all(h),Promise.all(d),Promise.all(u)]).then((function(t){var i=t[0],a=t[1],o=t[2];return n&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=a),s&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,i):e}))}
/**
			 * lil-gui
			 * https://lil-gui.georgealways.com
			 * @version 0.18.2
			 * @author George Michael Brower
			 * @license MIT
			 */class Et{constructor(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"div";this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(n),this.$name=document.createElement("div"),this.$name.classList.add("name"),Et.nextNameID=Et.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Et.nextNameID,this.$widget=document.createElement(r),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",(e=>e.stopPropagation())),this.domElement.addEventListener("keyup",(e=>e.stopPropagation())),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.disable(!e)}disable(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){var t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);var e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Tt extends Et{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Rt(e){var t,i;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?i=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!i&&"#"+i}var St={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},Lt={isPrimitive:!1,match:e=>Array.isArray(e),fromHexString(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=St.fromHexString(e);t[0]=(n>>16&255)/255*i,t[1]=(n>>8&255)/255*i,t[2]=(255&n)/255*i},toHexString(t){var i=e(t,3),n=i[0],r=i[1],s=i[2],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return St.toHexString(n*(a=255/a)<<16^r*a<<8^s*a<<0)}},Ct={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=St.fromHexString(e);t.r=(n>>16&255)/255*i,t.g=(n>>8&255)/255*i,t.b=(255&n)/255*i},toHexString(e){var t=e.r,i=e.g,n=e.b,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return St.toHexString(t*(r=255/r)<<16^i*r<<8^n*r<<0)}},It=[{isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:Rt,toHexString:Rt},St,Lt,Ct];class Mt extends Et{constructor(e,t,i,n){var r;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(r=this.initialValue,It.find((e=>e.match(r)))),this._rgbScale=n,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{var e=Rt(this.$text.value);e&&this._setValueFromHexString(e)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){var t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class kt extends Et{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(e=>{e.preventDefault(),this.getValue().call(this.object),this._callOnChange()})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class Ot extends Et{constructor(e,t,i,n,r,s){super(e,t,i,"number"),this._initInput(),this.min(n),this.max(r);var a=void 0!==s;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._step=e,this._stepExplicit=t,this}updateDisplay(){var e=this.getValue();if(this._hasSlider){var t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;var e,t,i,n,r,s=e=>{var t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())},a=!1,o=s=>{if(a){var o=s.clientX-e,h=s.clientY-t;Math.abs(h)>5?(s.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(o)>5&&l()}if(!a){var d=s.clientY-i;r-=d*this._step*this._arrowKeyMultiplier(s),n+r>this._max?r=this._max-n:n+r<this._min&&(r=this._min-n),this._snapClampSetValue(n+r)}i=s.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",(()=>{var e=parseFloat(this.$input.value);isNaN(e)||(this._stepExplicit&&(e=this._snap(e)),this.setValue(this._clamp(e)))})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.key&&this.$input.blur(),"ArrowUp"===e.code&&(e.preventDefault(),s(this._step*this._arrowKeyMultiplier(e))),"ArrowDown"===e.code&&(e.preventDefault(),s(this._step*this._arrowKeyMultiplier(e)*-1))})),this.$input.addEventListener("wheel",(e=>{this._inputFocused&&(e.preventDefault(),s(this._step*this._normalizeMouseWheel(e)))}),{passive:!1}),this.$input.addEventListener("mousedown",(s=>{e=s.clientX,t=i=s.clientY,a=!0,n=this.getValue(),r=0,window.addEventListener("mousemove",o),window.addEventListener("mouseup",l)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");var e,t,i,n=e=>{var t,i,n,r,s,a=this.$slider.getBoundingClientRect(),o=(t=e,i=a.left,n=a.right,r=this._min,s=this._max,(t-i)/(n-i)*(s-r)+r);this._snapClampSetValue(o)},r=e=>{n(e.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)},a=!1,o=e=>{e.preventDefault(),this._setDraggingStyle(!0),n(e.touches[0].clientX),a=!1},l=i=>{if(a){var r=i.touches[0].clientX-e,s=i.touches[0].clientY-t;Math.abs(r)>Math.abs(s)?o(i):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",h))}else i.preventDefault(),n(i.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",h)},d=this._callOnFinishChange.bind(this);this.$slider.addEventListener("mousedown",(e=>{this._setDraggingStyle(!0),n(e.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",s)})),this.$slider.addEventListener("touchstart",(i=>{i.touches.length>1||(this._hasScrollBar?(e=i.touches[0].clientX,t=i.touches[0].clientY,a=!0):o(i),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",h))}),{passive:!1}),this.$slider.addEventListener("wheel",(e=>{if(!(Math.abs(e.deltaX)<Math.abs(e.deltaY))||!this._hasScrollBar){e.preventDefault();var t=this._normalizeMouseWheel(e)*this._step;this._snapClampSetValue(this.getValue()+t),this.$input.value=this.getValue(),clearTimeout(i),i=setTimeout(d,400)}}),{passive:!1})}_setDraggingStyle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){var t=e.deltaX,i=e.deltaY;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){var t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){var t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){var e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Nt extends Et{constructor(e,t,i,n){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(n)?n:Object.values(n),this._names=Array.isArray(n)?n:Object.keys(n),this._names.forEach((e=>{var t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)})),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){var e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class Ft extends Et{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}var Ht=!1;class Pt{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,i=e.autoPlace,n=void 0===i?void 0===t:i,r=e.container,s=e.width,a=e.title,o=void 0===a?"Controls":a,l=e.closeFolders,h=void 0!==l&&l,d=e.injectStyles,u=void 0===d||d,c=e.touchStyles,p=void 0===c||c;if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),p&&this.domElement.classList.add("allow-touch-styles"),!Ht&&u&&(!function(e){var t=document.createElement("style");t.innerHTML=e;var i=document.querySelector("head link[rel=stylesheet], head style");i?document.head.insertBefore(t,i):document.head.appendChild(t)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),Ht=!0),r?r.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this._closeFolders=h}add(e,t,i,n,r){if(Object(i)===i)return new Nt(this,e,t,i);var s=e[t];switch(typeof s){case"number":return new Ot(this,e,t,i,n,r);case"boolean":return new Tt(this,e,t);case"string":return new Ft(this,e,t);case"function":return new kt(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",s)}addColor(e,t){return new Mt(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}addFolder(e){var t=new Pt({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.controllers&&this.controllers.forEach((t=>{t instanceof kt||t._name in e.controllers&&t.load(e.controllers[t._name])})),t&&e.folders&&this.folders.forEach((t=>{t._title in e.folders&&t.load(e.folders[t._title])})),this}save(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={controllers:{},folders:{}};return this.controllers.forEach((e=>{if(!(e instanceof kt)){if(e._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}})),e&&this.folders.forEach((e=>{if(e._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()})),t}open(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{var t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");var i=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);var n=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame((()=>{this.$children.style.height=n+"px"}))})),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.controllersRecursive():this.controllers).forEach((e=>e.reset())),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),void 0!==this._onOpenClose&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((e=>e.destroy()))}controllersRecursive(){var e=Array.from(this.controllers);return this.folders.forEach((t=>{e=e.concat(t.controllersRecursive())})),e}foldersRecursive(){var e=Array.from(this.folders);return this.folders.forEach((t=>{e=e.concat(t.foldersRecursive())})),e}}var $t={id:"container",class:"flex justify-center items-center flex-col"};i("_",Ee({__name:"webgl_animation_skinning_blending",setup(e){var t,i,r,s,a,o,l,h,u,c,m,g,v,f,A,w,b=[],x=!1,y=0,_=4*window.innerWidth/5,E=4*window.innerHeight/5;return Te((()=>{var e=document.getElementById("container");function T(e){a.visible=e}function R(e){o.visible=e}function S(e){l.timeScale=e}function L(){A.forEach((function(e){e.stop()}))}function C(){F(u,w["modify idle weight"]),F(c,w["modify walk weight"]),F(m,w["modify run weight"]),A.forEach((function(e){e.play()}))}function I(){x?(x=!1,M()):u.paused?M():A.forEach((function(e){e.paused=!0}))}function M(){A.forEach((function(e){e.paused=!1}))}function k(){M(),x=!0,y=w["modify step size"]}function O(e,t,i){var n=function(e){return w["use default duration"]?e:w["set custom duration"]}(i);x=!1,M(),e===u?N(e,t,n):function(e,t,i){function n(r){r.action===e&&(l.removeEventListener("loop",n),N(e,t,i))}l.addEventListener("loop",n)}(e,t,n)}function N(e,t,i){F(t,1),t.time=0,e.crossFadeTo(t,i,!0)}function F(e,t){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(t)}function H(){r.aspect=_/E,r.updateProjectionMatrix(),i.setSize(_,E)}function $(){requestAnimationFrame($),g=u.getEffectiveWeight(),v=c.getEffectiveWeight(),f=m.getEffectiveWeight(),w["modify idle weight"]=g,w["modify walk weight"]=v,w["modify run weight"]=f,1===g&&0===v&&0===f&&(b[0].disable(),b[1].enable(),b[2].disable(),b[3].disable()),0===g&&1===v&&0===f&&(b[0].enable(),b[1].disable(),b[2].enable(),b[3].disable()),0===g&&0===v&&1===f&&(b[0].disable(),b[1].disable(),b[2].disable(),b[3].enable());var e=h.getDelta();x&&(e=y,y=0),l.update(e),s.update(),i.render(t,r)}!function(){(r=new G(45,_/E,1,1e3)).position.set(1,2,-3),r.lookAt(0,1,0),h=new _e,(t=new pe).background=new d(10526880),t.fog=new me(10526880,10,50);var g=new ge(16777215,4473924);g.position.set(0,20,0),t.add(g);var v=new p(16777215);v.position.set(-3,10,-10),v.castShadow=!0,v.shadow.camera.top=2,v.shadow.camera.bottom=-2,v.shadow.camera.left=-2,v.shadow.camera.right=2,v.shadow.camera.near=.1,v.shadow.camera.far=40,t.add(v);var f=new P(new ve(100,100),new fe({color:10066329,depthWrite:!1}));f.rotation.x=-Math.PI/2,f.receiveShadow=!0,t.add(f),(new Ce).load(new URL(""+new URL("../models/gltf/Soldier.glb",n.meta.url).href,self.location).href,(function(i){a=i.scene,t.add(a),a.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),(o=new Ae(a)).visible=!1,t.add(o),function(){var t=new Pt({width:310});t.domElement.style.top="0",t.domElement.style.right="0",t.domElement.style.position="absolute",null==e||e.appendChild(t.domElement);var i=t.addFolder("Visibility"),n=t.addFolder("Activation/Deactivation"),r=t.addFolder("Pausing/Stepping"),s=t.addFolder("Crossfading"),a=t.addFolder("Blend Weights"),o=t.addFolder("General Speed");w={"show model":!0,"show skeleton":!1,"deactivate all":L,"activate all":C,"pause/continue":I,"make single step":k,"modify step size":.05,"from walk to idle":function(){O(c,u,1)},"from idle to walk":function(){O(u,c,.5)},"from walk to run":function(){O(c,m,2.5)},"from run to walk":function(){O(m,c,5)},"use default duration":!0,"set custom duration":3.5,"modify idle weight":0,"modify walk weight":1,"modify run weight":0,"modify time scale":1},i.add(w,"show model").onChange(T),i.add(w,"show skeleton").onChange(R),n.add(w,"deactivate all"),n.add(w,"activate all"),r.add(w,"pause/continue"),r.add(w,"make single step"),r.add(w,"modify step size",.01,.1,.001),b.push(s.add(w,"from walk to idle")),b.push(s.add(w,"from idle to walk")),b.push(s.add(w,"from walk to run")),b.push(s.add(w,"from run to walk")),s.add(w,"use default duration"),s.add(w,"set custom duration",0,10,.01),a.add(w,"modify idle weight",0,1,.01).listen().onChange((function(e){F(u,e)})),a.add(w,"modify walk weight",0,1,.01).listen().onChange((function(e){F(c,e)})),a.add(w,"modify run weight",0,1,.01).listen().onChange((function(e){F(m,e)})),o.add(w,"modify time scale",0,1.5,.01).onChange(S),i.open(),n.open(),r.open(),s.open(),a.open(),o.open()}();var n=i.animations;l=new we(a),u=l.clipAction(n[0]),c=l.clipAction(n[3]),m=l.clipAction(n[1]),A=[u,c,m],C(),$()})),(i=new be({antialias:!0})).setPixelRatio(window.devicePixelRatio),i.setSize(_,E),i.outputEncoding=xe,i.shadowMap.enabled=!0,null==e||e.appendChild(i.domElement),(s=ye()).dom.style.top="0",s.dom.style.left="0",s.dom.style.position="absolute",null==e||e.appendChild(s.dom),window.addEventListener("resize",H)}()})),(e,t)=>(Re(),Se("div",$t))}}))}}}))}();
