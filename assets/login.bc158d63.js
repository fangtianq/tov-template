import{d as b,z as V,l as C,o as F,A as y,e as B,i as s,w as n,_ as E,B as g,m as R,C as S,r as i,j as P,f as r,k as c,D as N,E as f,x as T,G as U}from"./index.92d7ddfd.js";import{_ as M}from"./favicon.eb9475ba.js";import{b as p}from"./route-block.6a611cbf.js";const j={class:"bg-white h-screen font-github"},A={class:"flex justify-center items-center flex-col"},D=r("div",{class:"p-8"},[r("img",{src:M,class:"w-12 h-12",alt:"tov"})],-1),$=r("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign in to tov-template ",-1),z={class:"h-57 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},G=r("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[c(" New to Tov? "),r("a",{href:"signup",class:"text-github_a"},"Create an account"),c(" . ")],-1),q=b({name:"***",beforeRouteEnter(h,d,e){e(l=>{E.isEmpty(g().value)||l.router.replace(d.path)})}}),H=b({...q,setup(h,{expose:d}){const e=V({username:"",password:""}),l=C(),_=R(),v=S();F(()=>{});const w=m=>{!m||m.validate(t=>{if(t)N()(e.username,e.password).then(o=>{g().value=o.getSessionToken(),f.success(`\u767B\u5F55\u6210\u529F\uFF0C\u6B22\u8FCE\u60A8${o.getUsername()}\u56DE\u6765~`);let{fromParams:a}=T(U());_.push(a.value.fromPath)},o=>{f.error(o.rawMessage)});else return!1})};return d({router:_,currentUser:y,route:v}),(m,t)=>{const o=i("el-input"),a=i("el-form-item"),x=i("el-button"),k=i("el-form");return P(),B("div",j,[s(k,{ref_key:"ruleFormRef",ref:l,model:e,"label-position":"top"},{default:n(()=>[r("div",A,[D,$,r("div",z,[s(a,{label:"Phone number"},{default:n(()=>[s(o,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=u=>e.username=u)},null,8,["modelValue"])]),_:1}),s(a,{label:"Password"},{default:n(()=>[s(o,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=u=>e.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(a,null,{default:n(()=>[s(x,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:t[2]||(t[2]=u=>w(l.value))},{default:n(()=>[c("Sign in")]),_:1})]),_:1})]),G])]),_:1},8,["model"])])}}});typeof p=="function"&&p(H);export{H as default};
