import{c as v,aX as Oe,Q as De,y as be,aL as He,a5 as Ke,l as S,o as Ce,P as _,a9 as ze,aY as je,aZ as ge,A as Ue,aU as _e,B as q,C as we,a_ as We,a4 as G,d as Pe,a$ as Xe,aO as Ye,aJ as Ze,aT as Je,E as xe,b0 as ee,b1 as Qe,b2 as qe,b3 as Ge,aN as et,a3 as A,n as tt,aa as at,j as m,e as w,J as h,F as te,I as y,h as t,v as K,f as N,H as x,w as R,aR as j,aW as L,K as ae,i as ot,b4 as st,b5 as nt,X as lt,t as U,a7 as rt,_ as it,R as ut,Z as Se,M as dt}from"./index.0e2c63b6.js";import{u as ct,i as pt}from"./index.e30fd412.js";import{d as Ie}from"./error.7e8331f1.js";const oe="update:modelValue",Bt="change",At="input",ft=o=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(o),vt=["class","style"],mt=/^on[A-Z]/,ht=(o={})=>{const{excludeListeners:l=!1,excludeKeys:r}=o,a=v(()=>((r==null?void 0:r.value)||[]).concat(vt)),s=De();return s?v(()=>{var c;return Oe(Object.entries((c=s.proxy)==null?void 0:c.$attrs).filter(([u])=>!a.value.includes(u)&&!(l&&mt.test(u))))}):v(()=>({}))},yt=()=>{const o=be(He,void 0),l=be(Ke,void 0);return{form:o,formItem:l}},bt=(o,{formItemContext:l,disableIdGeneration:r,disableIdManagement:a})=>{r||(r=S(!1)),a||(a=S(!1));const s=S();let c;const u=v(()=>{var p;return!!(!o.label&&l&&l.inputIds&&((p=l.inputIds)==null?void 0:p.length)<=1)});return Ce(()=>{c=_([ze(o,"id"),r],([p,d])=>{const f=p!=null?p:d?void 0:ct().value;f!==s.value&&(l!=null&&l.removeInputId&&(s.value&&l.removeInputId(s.value),!(a!=null&&a.value)&&!d&&f&&l.addInputId(f)),s.value=f)},{immediate:!0})}),je(()=>{c&&c(),l!=null&&l.removeInputId&&s.value&&l.removeInputId(s.value)}),{isLabeledByFormItem:u,inputId:s}};function gt(o){const l=S();function r(){if(o.value==null)return;const{selectionStart:s,selectionEnd:c,value:u}=o.value;if(s==null||c==null)return;const p=u.slice(0,Math.max(0,s)),d=u.slice(Math.max(0,c));l.value={selectionStart:s,selectionEnd:c,value:u,beforeTxt:p,afterTxt:d}}function a(){if(o.value==null||l.value==null)return;const{value:s}=o.value,{beforeTxt:c,afterTxt:u,selectionStart:p}=l.value;if(c==null||u==null||p==null)return;let d=s.length;if(s.endsWith(u))d=s.length-u.length;else if(s.startsWith(c))d=c.length;else{const f=c[p-1],I=s.indexOf(f,p-1);I!==-1&&(d=I+1)}o.value.setSelectionRange(d,d)}return[r,a]}let b;const wt=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,xt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function St(o){const l=window.getComputedStyle(o),r=l.getPropertyValue("box-sizing"),a=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),s=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:xt.map(u=>`${u}:${l.getPropertyValue(u)}`).join(";"),paddingSize:a,borderSize:s,boxSizing:r}}function Ee(o,l=1,r){var a;b||(b=document.createElement("textarea"),document.body.appendChild(b));const{paddingSize:s,borderSize:c,boxSizing:u,contextStyle:p}=St(o);b.setAttribute("style",`${p};${wt}`),b.value=o.value||o.placeholder||"";let d=b.scrollHeight;const f={};u==="border-box"?d=d+c:u==="content-box"&&(d=d-s),b.value="";const I=b.scrollHeight-s;if(ge(l)){let g=I*l;u==="border-box"&&(g=g+s+c),d=Math.max(g,d),f.minHeight=`${g}px`}if(ge(r)){let g=I*r;u==="border-box"&&(g=g+s+c),d=Math.min(g,d)}return f.height=`${d}px`,(a=b.parentNode)==null||a.removeChild(b),b=void 0,f}const It=Ue({id:{type:String,default:void 0},size:_e,disabled:Boolean,modelValue:{type:q([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:q([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:we},prefixIcon:{type:we},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:q([Object,Array,String]),default:()=>We({})}}),Et={[oe]:o=>G(o),input:o=>G(o),change:o=>G(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},Ct=["role"],zt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Pt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],kt=Pe({name:"ElInput",inheritAttrs:!1}),Nt=Pe({...kt,props:It,emits:Et,setup(o,{expose:l,emit:r}){const a=o,s=Xe(),c=Ye(),u=v(()=>{const e={};return a.containerRole==="combobox"&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e}),p=ht({excludeKeys:v(()=>Object.keys(u.value))}),{form:d,formItem:f}=yt(),{inputId:I}=bt(a,{formItemContext:f}),g=Ze(),z=Je(),n=xe("input"),se=xe("textarea"),M=ee(),P=ee(),V=S(!1),W=S(!1),$=S(!1),O=S(!1),ne=S(),X=ee(a.inputStyle),T=v(()=>M.value||P.value),le=v(()=>{var e;return(e=d==null?void 0:d.statusIcon)!=null?e:!1}),F=v(()=>(f==null?void 0:f.validateState)||""),re=v(()=>F.value&&Qe[F.value]),ke=v(()=>O.value?qe:Ge),Ne=v(()=>[s.style,a.inputStyle]),ie=v(()=>[a.inputStyle,X.value,{resize:a.resize}]),E=v(()=>pt(a.modelValue)?"":String(a.modelValue)),D=v(()=>a.clearable&&!z.value&&!a.readonly&&!!E.value&&(V.value||W.value)),Y=v(()=>a.showPassword&&!z.value&&!a.readonly&&!!E.value&&(!!E.value||V.value)),k=v(()=>a.showWordLimit&&!!p.value.maxlength&&(a.type==="text"||a.type==="textarea")&&!z.value&&!a.readonly&&!a.showPassword),Z=v(()=>Array.from(E.value).length),Ve=v(()=>!!k.value&&Z.value>Number(p.value.maxlength)),$e=v(()=>!!c.suffix||!!a.suffixIcon||D.value||a.showPassword||k.value||!!F.value&&le.value),[Te,Fe]=gt(M);et(P,e=>{if(!k.value||a.resize!=="both")return;const i=e[0],{width:C}=i.contentRect;ne.value={right:`calc(100% - ${C+15+6}px)`}});const H=()=>{const{type:e,autosize:i}=a;if(!(!ut||e!=="textarea"))if(i){const C=Se(i)?i.minRows:void 0,Q=Se(i)?i.maxRows:void 0;X.value={...Ee(P.value,C,Q)}}else X.value={minHeight:Ee(P.value).minHeight}},B=()=>{const e=T.value;!e||e.value===E.value||(e.value=E.value)},J=async e=>{Te();let{value:i}=e.target;if(a.formatter&&(i=a.parser?a.parser(i):i,i=a.formatter(i)),!$.value){if(i===E.value){B();return}r(oe,i),r("input",i),await A(),B(),Fe()}},ue=e=>{r("change",e.target.value)},de=e=>{r("compositionstart",e),$.value=!0},ce=e=>{var i;r("compositionupdate",e);const C=(i=e.target)==null?void 0:i.value,Q=C[C.length-1]||"";$.value=!ft(Q)},pe=e=>{r("compositionend",e),$.value&&($.value=!1,J(e))},Be=()=>{O.value=!O.value,fe()},fe=async()=>{var e;await A(),(e=T.value)==null||e.focus()},Ae=()=>{var e;return(e=T.value)==null?void 0:e.blur()},ve=e=>{V.value=!0,r("focus",e)},me=e=>{var i;V.value=!1,r("blur",e),a.validateEvent&&((i=f==null?void 0:f.validate)==null||i.call(f,"blur").catch(C=>Ie()))},Re=e=>{W.value=!1,r("mouseleave",e)},Le=e=>{W.value=!0,r("mouseenter",e)},he=e=>{r("keydown",e)},Me=()=>{var e;(e=T.value)==null||e.select()},ye=()=>{r(oe,""),r("change",""),r("clear"),r("input","")};return _(()=>a.modelValue,()=>{var e;A(()=>H()),a.validateEvent&&((e=f==null?void 0:f.validate)==null||e.call(f,"change").catch(i=>Ie()))}),_(E,()=>B()),_(()=>a.type,async()=>{await A(),B(),H()}),Ce(()=>{!a.formatter&&a.parser,B(),A(H)}),l({input:M,textarea:P,ref:T,textareaStyle:ie,autosize:ze(a,"autosize"),focus:fe,blur:Ae,select:Me,clear:ye,resizeTextarea:H}),(e,i)=>tt((m(),w("div",ae(t(u),{class:[e.type==="textarea"?t(se).b():t(n).b(),t(n).m(t(g)),t(n).is("disabled",t(z)),t(n).is("exceed",t(Ve)),{[t(n).b("group")]:e.$slots.prepend||e.$slots.append,[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend,[t(n).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(n).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(n).bm("suffix","password-clear")]:t(D)&&t(Y)},e.$attrs.class],style:t(Ne),role:e.containerRole,onMouseenter:Le,onMouseleave:Re}),[h(" input "),e.type!=="textarea"?(m(),w(te,{key:0},[h(" prepend slot "),e.$slots.prepend?(m(),w("div",{key:0,class:y(t(n).be("group","prepend"))},[K(e.$slots,"prepend")],2)):h("v-if",!0),N("div",{class:y([t(n).e("wrapper"),t(n).is("focus",V.value)])},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),w("span",{key:0,class:y(t(n).e("prefix"))},[N("span",{class:y(t(n).e("prefix-inner"))},[K(e.$slots,"prefix"),e.prefixIcon?(m(),x(t(L),{key:0,class:y(t(n).e("icon"))},{default:R(()=>[(m(),x(j(e.prefixIcon)))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),N("input",ae({id:t(I),ref_key:"input",ref:M,class:t(n).e("inner")},t(p),{type:e.showPassword?O.value?"text":"password":e.type,disabled:t(z),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:a.form,onCompositionstart:de,onCompositionupdate:ce,onCompositionend:pe,onInput:J,onFocus:ve,onBlur:me,onChange:ue,onKeydown:he}),null,16,zt),h(" suffix slot "),t($e)?(m(),w("span",{key:1,class:y(t(n).e("suffix"))},[N("span",{class:y(t(n).e("suffix-inner"))},[!t(D)||!t(Y)||!t(k)?(m(),w(te,{key:0},[K(e.$slots,"suffix"),e.suffixIcon?(m(),x(t(L),{key:0,class:y(t(n).e("icon"))},{default:R(()=>[(m(),x(j(e.suffixIcon)))]),_:1},8,["class"])):h("v-if",!0)],64)):h("v-if",!0),t(D)?(m(),x(t(L),{key:1,class:y([t(n).e("icon"),t(n).e("clear")]),onMousedown:nt(t(lt),["prevent"]),onClick:ye},{default:R(()=>[ot(t(st))]),_:1},8,["class","onMousedown"])):h("v-if",!0),t(Y)?(m(),x(t(L),{key:2,class:y([t(n).e("icon"),t(n).e("password")]),onClick:Be},{default:R(()=>[(m(),x(j(t(ke))))]),_:1},8,["class"])):h("v-if",!0),t(k)?(m(),w("span",{key:3,class:y(t(n).e("count"))},[N("span",{class:y(t(n).e("count-inner"))},U(t(Z))+" / "+U(t(p).maxlength),3)],2)):h("v-if",!0),t(F)&&t(re)&&t(le)?(m(),x(t(L),{key:4,class:y([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(F)==="validating")])},{default:R(()=>[(m(),x(j(t(re))))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(m(),w("div",{key:1,class:y(t(n).be("group","append"))},[K(e.$slots,"append")],2)):h("v-if",!0)],64)):(m(),w(te,{key:1},[h(" textarea "),N("textarea",ae({id:t(I),ref_key:"textarea",ref:P,class:t(se).e("inner")},t(p),{tabindex:e.tabindex,disabled:t(z),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ie),"aria-label":e.label,placeholder:e.placeholder,form:a.form,onCompositionstart:de,onCompositionupdate:ce,onCompositionend:pe,onInput:J,onFocus:ve,onBlur:me,onChange:ue,onKeydown:he}),null,16,Pt),t(k)?(m(),w("span",{key:0,style:rt(ne.value),class:y(t(n).e("count"))},U(t(Z))+" / "+U(t(p).maxlength),7)):h("v-if",!0)],64))],16,Ct)),[[at,e.type!=="hidden"]])}});var Vt=it(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Rt=dt(Vt);export{Bt as C,Rt as E,At as I,oe as U,bt as a,yt as u};
