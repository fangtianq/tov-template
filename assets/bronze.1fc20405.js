import{d as C,bo as x,m as l,bp as U,bq as z,br as n,o as F,a as v,F as I,v as S,e as _,f as D,w as K,b as d,t as B,a1 as W,bs as p,aZ as M,h as A,i as N}from"./index.69fc3114.js";/* empty css             */import{E as $}from"./button.272ccfeb.js";import{_ as q}from"./delete.79b4c66a.js";/* empty css              */import{E as H}from"./switch.b6850cf7.js";import{E as j}from"./index.e65f5c45.js";import"./index.ab351347.js";import"./index.0e6a3da3.js";import"./index.75231c45.js";import"./index.b49062f4.js";import"./validator.5b3fe355.js";import"./event.ca9cda98.js";import"./isNil.aac33454.js";const Y={class:"flex justify-center items-center flex-col"},Z=d("h1",{class:"text-7xl"},"LiveQuery",-1),J={class:"w-50 pl-2 pr-2 inline-block"},P={class:"inline-block"},X=N(" \u70B9\u51FB\u6DFB\u52A0"),Q=d("div",{class:"cursor-move"},"\u{1F44B} Drag here!",-1),ee=d("div",{class:"text-xs opacity-50"},"Handle that triggers the drag event",-1),te={class:"text-sm opacity-50"},he=C({__name:"bronze",setup(ne){const f=x(n.TODO.name);let r=l();f.find().then(t=>{r.value=t}),f.subscribe().then(t=>{t.on("create",e=>{r.value.push(e)}),t.on("enter",(e,s)=>{}),t.on("update",(e,s)=>{const o=r.value.findIndex(h=>h.id==(e==null?void 0:e.id));r.value[o]=e}),t.on("delete",e=>{r.value=r.value.filter(s=>s.id!=(e==null?void 0:e.id))})});const E=()=>{const t=p.Object.extend(n.TODO.name),e=new t;e.set(n.TODO.keys.content,"Hello world!"),e.set(n.TODO.keys.done,!0),e.set(n.TODO.keys.user,M()()),e.save().then(s=>{})},L=(t,e)=>{const s=p.Object.createWithoutData(n.TODO.name,t);s.set(n.TODO.keys.done,e),s.save()},R=(t,e)=>{const s=p.Object.createWithoutData(n.TODO.name,t);s.set(n.TODO.keys.content,e),s.save()},T=t=>{p.Object.createWithoutData(n.TODO.name,t).destroy()},G=l(null);let{x:c,y:i,style:V}=U(G,{initialValue:{x:40,y:40}});const[g,k]=[l(c),l(i)];let m=l();z([g,k],()=>{const t=p.Object.createWithoutData(n.DRAGGABLE.name,m.value);t.set(n.DRAGGABLE.keys.x,g.value),t.set(n.DRAGGABLE.keys.y,k.value),t.save()},{debounce:500});const O=x(n.DRAGGABLE.name),b=(t,e)=>{const s=p.Object.extend(n.DRAGGABLE.name),o=new s;return o.set(n.DRAGGABLE.keys.name,"bronzeDrag"),o.set(n.DRAGGABLE.keys.x,t),o.set(n.DRAGGABLE.keys.y,e),o.save(),o},y=t=>{if(t){c.value=t.x,i.value=t.y;return}O.find().then(e=>{if(!(e!=null&&e.length))y(b(40,40));else{const s=e.filter(o=>o.get(n.DRAGGABLE.keys.name)=="bronzeDrag")[0];c.value=s.get(n.DRAGGABLE.keys.x),i.value=s.get(n.DRAGGABLE.keys.y),m=l(s.id)}},e=>{e.code=="101"&&y(b(40,40))})};return O.subscribe().then(t=>{t.on("create",e=>{m=l(e.id),c.value=e.get(n.DRAGGABLE.keys.x),i.value=e.get(n.DRAGGABLE.keys.y)}),t.on("enter",(e,s)=>{}),t.on("update",(e,s)=>{m=l(e.id),c.value=e.get(n.DRAGGABLE.keys.x),i.value=e.get(n.DRAGGABLE.keys.y)}),t.on("delete",e=>{})}),F(()=>{}),y(null),(t,e)=>{const s=H,o=j,h=q,w=$;return A(),v("div",Y,[Z,(A(!0),v(I,null,S(_(r),a=>(A(),v("div",{key:a.id,class:"flex items-center justify-center p-2"},[D(s,{modelValue:a.attributes.done,"onUpdate:modelValue":u=>a.attributes.done=u,onClick:u=>L(a.id,a.attributes.done)},null,8,["modelValue","onUpdate:modelValue","onClick"]),d("div",J,[D(o,{modelValue:a.attributes.content,"onUpdate:modelValue":u=>a.attributes.content=u,clearable:"",onInput:u=>R(a.id,a.attributes.content)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),d("div",P,[D(h,{class:"mt-1",onClick:u=>T(a.id)},null,8,["onClick"])])]))),128)),D(w,{onClick:E},{default:K(()=>[X]),_:1}),d("div",{ref_key:"settingRef",ref:G,style:W(_(V)),class:"bg-light-50 fixed shadow select-none z-10 hover:shadow-lg px-4 py-2 border-gray-400/30 rounded fixed"},[Q,ee,d("div",te," I am at "+B(Math.round(_(c)))+", "+B(Math.round(_(i))),1)],4)])}}});export{he as default};
