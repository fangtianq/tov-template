System.register(["./index-legacy.fecd96c2.js","./index-legacy.b043d796.js","./el-form-item-legacy.f082bb53.js","./el-popover-legacy.f91724c7.js","./el-popper-legacy.89eb8e4a.js","./el-button-legacy.33715e83.js","./el-input-legacy.a3e8e89d.js","./favicon-legacy.99295790.js","./route-block-legacy.6f0c4e8e.js","./error-legacy.3397af0e.js","./index-legacy.f841718d.js","./index-legacy.34e65e4f.js","./index-legacy.45dffb3f.js","./event-legacy.39ad8904.js"],(function(e,s){"use strict";var l,a,o,t,d,r,n,i,u,c,m,p,f,g,b,h,C,w,v,y,k,x,V,_,j,P,S;return{setters:[e=>{l=e.a},e=>{a=e.j,o=e.e,t=e.f,d=e.d,r=e.ak,n=e.l,i=e.am,u=e.i,c=e.w,m=e.bw,p=e.I,f=e.h,g=e.k,b=e.t,h=e.n,C=e.aa,w=e.m,v=e.aq,y=e.bx},e=>{k=e.E,x=e.a},e=>{V=e.E},()=>{},e=>{_=e.E},e=>{j=e.E},e=>{P=e._},e=>{S=e.b},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const s={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},I=[t("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1)],E={name:"mdi-check",render:function(e,l){return a(),o("svg",s,I)}},U={class:"bg-white h-screen font-github"},L={class:"flex justify-center items-center flex-col"},M=t("div",{class:"p-8"},[t("img",{src:P,class:"w-12 h-12",alt:"tov"})],-1),N=t("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign up to tov-template ",-1),F={class:"h-98 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},T={class:"w-max h-max cursor-pointer"},q=["src"],A=t("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[g(" Already have an account? "),t("a",{href:"login",class:"text-github_a"}," Sign in → "),g(" . ")],-1),B=e("default",d({__name:"signup",setup(e){l.get("api/article/all").then((e=>{}));const s=r({username:"",password:"",checkPass:"",nickName:"",smsCodeInput:"",smsCode:"",smsCodeVisible:!1,smsCodeCanSend:!1,smsCodeTip:"刷新验证码",captcha:n()}),d=e=>{s.smsCodeVisible=e},P=i.debounce((()=>{d(!0),s.smsCodeCanSend=!1,m().then((e=>{s.smsCode=e.url,s.captcha=e}))}),1e3,{leading:!0,trailing:!1}),S=w(),I=r({password:[{validator:(e,l,a)=>{if(""===l)a(new Error("Please input the password"));else{if(""!==s.checkPass){if(!B.value)return;B.value.validateField("checkPass",(()=>null))}a()}},trigger:"blur"}],checkPass:[{validator:(e,l,a)=>{""===l?a(new Error("Please input the password again")):l!==s.password?a(new Error("Two inputs don't match!")):a()},trigger:"blur"}],smsCodeInput:[{validator:(e,l,a)=>{s.smsCodeCanSend?a():a(new Error("SmsCode don't match!"))},trigger:"blur"}]}),B=n();return(e,l)=>{const r=j,n=k,i=E,m=_,w=V,R=x;return a(),o("div",U,[u(R,{ref_key:"ruleFormRef",ref:B,model:s,"label-position":"top",rules:I},{default:c((()=>[t("div",L,[M,N,t("div",F,[u(n,{label:"Phone number"},{default:c((()=>[u(r,{modelValue:s.username,"onUpdate:modelValue":l[0]||(l[0]=e=>s.username=e)},null,8,["modelValue"])])),_:1}),u(n,{label:"Password",prop:"password"},{default:c((()=>[u(r,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=e=>s.password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(n,{label:"Confirm",prop:"checkPass"},{default:c((()=>[u(r,{modelValue:s.checkPass,"onUpdate:modelValue":l[2]||(l[2]=e=>s.checkPass=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(n,{label:"nickName"},{default:c((()=>[u(r,{modelValue:s.nickName,"onUpdate:modelValue":l[3]||(l[3]=e=>s.nickName=e)},null,8,["modelValue"])])),_:1}),u(n,{prop:"smsCodeInput"},{default:c((()=>[u(w,{visible:s.smsCodeVisible,placement:"top"},{reference:c((()=>[u(m,{id:"verify",class:p("text-github_a mb-1"),onClick:f(P)},{default:c((()=>[t("span",{class:p(s.smsCodeCanSend?"text-green-500":"")},[g(b(s.smsCodeTip)+" ",1),h(u(i,null,null,512),[[C,s.smsCodeCanSend]])],2)])),_:1},8,["onClick"])])),default:c((()=>[t("div",T,[t("img",{src:s.smsCode},null,8,q)])])),_:1},8,["visible"]),u(r,{modelValue:s.smsCodeInput,"onUpdate:modelValue":l[4]||(l[4]=e=>s.smsCodeInput=e),modelModifiers:{trim:!0},class:"w-8",disabled:!s.smsCodeVisible,onFocus:l[5]||(l[5]=e=>d(!0)),onInput:l[6]||(l[6]=e=>{var l;""!=s.smsCodeInput&&4==s.smsCodeInput.length&&(null===(l=s.captcha)||void 0===l||l.verify(s.smsCodeInput).then((e=>{d(!1),s.smsCodeCanSend=!0,s.smsCodeVisible=!1}),(e=>{"800"==e.code?P():v.error(e.rawMessage)})).catch((e=>{v.error(e)})))})},null,8,["modelValue","disabled"])])),_:1}),u(n,null,{default:c((()=>[u(m,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:l[7]||(l[7]=e=>{var l;(l=B.value)&&l.validate((e=>{if(!e)return!1;y()(s.username,s.password).then((e=>{v.success("注册成功"),S.push("login")}),(e=>{v.error(`注册失败：${e.rawMessage}`)}))}))})},{default:c((()=>[g("Sign up")])),_:1})])),_:1})]),A])])),_:1},8,["model","rules"])])}}}));"function"==typeof S&&S(B)}}}));
