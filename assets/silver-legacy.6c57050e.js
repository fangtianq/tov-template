System.register(["./base-legacy.38854648.js","./button-legacy.f4bbbf8c.js","./delete-legacy.0e288ba1.js","./input-legacy.ea5c2c98.js","./index-legacy.4a81f09d.js","./request-legacy.99f7bc1d.js","./index-legacy.bfa02090.js","./index-legacy.969a3fd5.js","./use-form-item-legacy.aca14bad.js","./constants-legacy.ec33dc26.js","./index-legacy.b33c6eb8.js","./index-legacy.a5287923.js","./event-legacy.7722cbb2.js","./isNil-legacy.e248952d.js"],(function(e,t){"use strict";var s,l,a,n,c,o,r,u,i,d,b,y,j,v,p,g,m,O,k,I,f,x,N,S,w,h;return{setters:[null,e=>{s=e.E},e=>{l=e._},null,e=>{a=e.d,n=e.e,c=e.as,o=e.f,r=e.I,u=e.o,i=e.aS,d=e.j,b=e.x,y=e.m,j=e.F,v=e.an,p=e.p,g=e.y,m=e.w,O=e.a8,k=e.by,I=e.bz,f=e.b1,x=e.b2,N=e.ax,S=e.a9},e=>{w=e.a},e=>{h=e.E},null,null,null,null,null,null,null],execute:function(){var t={class:"main"},J={class:"message-container"},T=y("h3",null,"后台：org.sang.socket.livequery.LiveQueryController",-1),C=y("h3",null,"https://github.com/fangtianq/FTQPriSpringbootVueBlog",-1),D={class:"mdui-card-primary"},V={class:"mdui-card-content message-content inline-block"},F={class:"inline-block"};e("default",a({__name:"silver",setup(e){var a,_,q=n(c.REFDANMU),z={Authorization:"",ContentType:"text/LCObject"},E=null,Q=o([]),U=()=>{E&&(i.success("websocket重新连接成功..."),clearInterval(E),E=null),_=new k("/websocket"),(a=I.over(_)).connect(z,(()=>{i.success("websocket连接成功..."),a.subscribe("/create",(e=>{Q.value.push(JSON.parse(e.body))})),a.subscribe("/delete",(e=>{var t=JSON.parse(e.body).objectId;Q.value=Q.value.filter((e=>e.objectId!=t))})),a.subscribe("/update",(e=>{var t=JSON.parse(e.body).objectId,s=Q.value.findIndex((e=>e.objectId==t));Q.value[s]=JSON.parse(e.body),q.value.insert(JSON.parse(e.body).object)}))}),(e=>{E=setInterval((()=>{U()}),5e3),i.error("websocket断线重连中...")})),w.post("/find",{className:f.TODO.name}).then((e=>{Q.value=e.data.list}))};r((()=>{U()})),u((()=>{a.disconnect((()=>{_.onclose,_.close(),i.success("websocket断开成功！")}))}));var A=()=>{var e=new(x.Object.extend(f.TODO.name));e.set(f.TODO.keys.content,"Hello world!"),e.set(f.TODO.keys.done,!0),e.set(f.TODO.keys.user,N()());var t=JSON.stringify({object:e.attributes,className:e.className});a.send("/app/saveInBackground",z,t)};return(e,n)=>{var c=h,o=l,r=s;return d(),b("div",t,[y("div",J,[T,C,(d(!0),b(j,null,v(p(Q),(e=>(d(),b("div",{key:e.objectId,class:"mdui-card",style:{margin:"10px 0",width:"500px"}},[y("div",D,[y("div",V,[O(S(e.object.user.username+"："),1),g(c,{modelValue:e.object.content,"onUpdate:modelValue":t=>e.object.content=t,clearable:"",onInput:t=>{return s=e.objectId,l=e.object,void a.send("/app/updateObject",z,JSON.stringify({objectId:s,object:l}));var s,l}},null,8,["modelValue","onUpdate:modelValue","onInput"])]),y("div",F,[g(o,{class:"relative top-1",onClick:t=>{return s=e.objectId,void a.send("/app/deleteObject",z,JSON.stringify({objectId:s}));var s}},null,8,["onClick"])])])])))),128)),g(r,{type:"primary",size:"default",onClick:A},{default:m((()=>[O("发送")])),_:1})])])}}}))}}}));
