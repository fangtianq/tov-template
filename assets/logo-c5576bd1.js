import{b as Z,f as Y,u as Ne}from"./constants-0b468837.js";import{c4 as Oe,i as ee,bY as me,H as J,aW as $e,A as Q,aH as ve,n as L,g as m,d as N,u as te,t as q,v as pe,s as he,bn as ge,o as z,P as re,b as $,R as B,a4 as d,a as be,aV as _e,l as j,x as ye,y as Se,bR as Re,K as qe,a3 as P,F as ze,N as Fe,bV as je,cx as ke,aJ as ne,cy as H,w as R,c as Te,al as De,a9 as ie,S as Ue,U as ue,a8 as de,Q as k,b0 as Ge,V as Ke,W as He,_ as Ye,r as Je}from"./index-08a94d7c.js";import{a as we}from"./use-form-item-351b2825.js";import{d as Qe,t as Xe}from"./event-1da57d2d.js";import{S as Ze}from"./index-414d99d5.js";import{b as et}from"./_baseClone-e6d13761.js";import{_ as tt}from"./favicon-d22aecf5.js";function X(){if(!arguments.length)return[];var o=arguments[0];return Oe(o)?o:[o]}var rt=4;function ce(o){return et(o,rt)}const lt=ee({size:{type:String,values:me},disabled:Boolean}),ot=ee({...lt,model:Object,rules:{type:J(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),st={validate:(o,v,e)=>($e(o)||Q(o))&&ve(v)&&Q(e)};function at(){const o=L([]),v=m(()=>{if(!o.value.length)return"0";const u=Math.max(...o.value);return u?"".concat(u,"px"):""});function e(u){const i=o.value.indexOf(u);return i===-1&&v.value,i}function c(u,i){if(u&&i){const f=e(i);o.value.splice(f,1,u)}else u&&o.value.push(u)}function t(u){const i=e(u);i>-1&&o.value.splice(i,1)}return{autoLabelWidth:v,registerLabelWidth:c,deregisterLabelWidth:t}}const O=(o,v)=>{const e=X(v);return e.length>0?o.filter(c=>c.prop&&e.includes(c.prop)):o},nt="ElForm",it=N({name:nt}),ut=N({...it,props:ot,emits:st,setup(o,{expose:v,emit:e}){const c=o,t=[],u=we(),i=te("form"),f=m(()=>{const{labelPosition:s,inline:n}=c;return[i.b(),i.m(u.value||"default"),{[i.m("label-".concat(s))]:s,[i.m("inline")]:n}]}),x=s=>{t.push(s)},b=s=>{s.prop&&t.splice(t.indexOf(s),1)},a=(s=[])=>{c.model&&O(t,s).forEach(n=>n.resetField())},g=(s=[])=>{O(t,s).forEach(n=>n.clearValidate())},_=m(()=>!!c.model),C=s=>{if(t.length===0)return[];const n=O(t,s);return n.length?n:[]},E=async s=>W(void 0,s),w=async(s=[])=>{if(!_.value)return!1;const n=C(s);if(n.length===0)return!0;let y={};for(const S of n)try{await S.validate("")}catch(I){y={...y,...I}}return Object.keys(y).length===0?!0:Promise.reject(y)},W=async(s=[],n)=>{const y=!_e(n);try{const S=await w(s);return S===!0&&(n==null||n(S)),S}catch(S){if(S instanceof Error)throw S;const I=S;return c.scrollToError&&M(Object.keys(I)[0]),n==null||n(!1,I),y&&Promise.reject(I)}},M=s=>{var n;const y=O(t,s)[0];y&&((n=y.$el)==null||n.scrollIntoView(c.scrollIntoViewOptions))};return q(()=>c.rules,()=>{c.validateOnRuleChange&&E().catch(s=>Qe())},{deep:!0}),pe(Z,he({...ge(c),emit:e,resetFields:a,clearValidate:g,validateField:W,addField:x,removeField:b,...at()})),v({validate:E,validateField:W,resetFields:a,clearValidate:g,scrollToField:M}),(s,n)=>(z(),re("form",{class:B(d(f))},[$(s.$slots,"default")],2))}});var dt=be(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);const ct=["","error","validating","success"],ft=ee({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:J([String,Array])},required:{type:Boolean,default:void 0},rules:{type:J([Object,Array])},error:String,validateStatus:{type:String,values:ct},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:me}}),fe="ElLabelWrap";var mt=N({name:fe,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(o,{slots:v}){const e=j(Z,void 0),c=j(Y);c||Xe(fe,"usage: <el-form-item><label-wrap /></el-form-item>");const t=te("form"),u=L(),i=L(0),f=()=>{var a;if((a=u.value)!=null&&a.firstElementChild){const g=window.getComputedStyle(u.value.firstElementChild).width;return Math.ceil(Number.parseFloat(g))}else return 0},x=(a="update")=>{Fe(()=>{v.default&&o.isAutoWidth&&(a==="update"?i.value=f():a==="remove"&&(e==null||e.deregisterLabelWidth(i.value)))})},b=()=>x("update");return ye(()=>{b()}),Se(()=>{x("remove")}),Re(()=>b()),q(i,(a,g)=>{o.updateAll&&(e==null||e.registerLabelWidth(a,g))}),qe(m(()=>{var a,g;return(g=(a=u.value)==null?void 0:a.firstElementChild)!=null?g:null}),b),()=>{var a,g;if(!v)return null;const{isAutoWidth:_}=o;if(_){const C=e==null?void 0:e.autoLabelWidth,E=c==null?void 0:c.hasLabel,w={};if(E&&C&&C!=="auto"){const W=Math.max(0,Number.parseInt(C,10)-i.value),M=e.labelPosition==="left"?"marginRight":"marginLeft";W&&(w[M]="".concat(W,"px"))}return P("div",{ref:u,class:[t.be("item","label-wrap")],style:w},[(a=v.default)==null?void 0:a.call(v)])}else return P(ze,{ref:u},[(g=v.default)==null?void 0:g.call(v)])}}});const vt=["role","aria-labelledby"],pt=N({name:"ElFormItem"}),ht=N({...pt,props:ft,setup(o,{expose:v}){const e=o,c=je(),t=j(Z,void 0),u=j(Y,void 0),i=we(void 0,{formItem:!1}),f=te("form-item"),x=Ne().value,b=L([]),a=L(""),g=ke(a,100),_=L(""),C=L();let E,w=!1;const W=m(()=>{if((t==null?void 0:t.labelPosition)==="top")return{};const r=ne(e.labelWidth||(t==null?void 0:t.labelWidth)||"");return r?{width:r}:{}}),M=m(()=>{if((t==null?void 0:t.labelPosition)==="top"||t!=null&&t.inline)return{};if(!e.label&&!e.labelWidth&&Ie)return{};const r=ne(e.labelWidth||(t==null?void 0:t.labelWidth)||"");return!e.label&&!c.label?{marginLeft:r}:{}}),s=m(()=>[f.b(),f.m(i.value),f.is("error",a.value==="error"),f.is("validating",a.value==="validating"),f.is("success",a.value==="success"),f.is("required",Ee.value||e.required),f.is("no-asterisk",t==null?void 0:t.hideRequiredAsterisk),(t==null?void 0:t.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[f.m("feedback")]:t==null?void 0:t.statusIcon}]),n=m(()=>ve(e.inlineMessage)?e.inlineMessage:(t==null?void 0:t.inlineMessage)||!1),y=m(()=>[f.e("error"),{[f.em("error","inline")]:n.value}]),S=m(()=>e.prop?Q(e.prop)?e.prop:e.prop.join("."):""),I=m(()=>!!(e.label||c.label)),T=m(()=>e.for||(b.value.length===1?b.value[0]:void 0)),D=m(()=>!T.value&&I.value),Ie=!!u,le=m(()=>{const r=t==null?void 0:t.model;if(!(!r||!e.prop))return H(r,e.prop).value}),U=m(()=>{const{required:r}=e,l=[];e.rules&&l.push(...X(e.rules));const h=t==null?void 0:t.rules;if(h&&e.prop){const p=H(h,e.prop).value;p&&l.push(...X(p))}if(r!==void 0){const p=l.map((F,A)=>[F,A]).filter(([F])=>Object.keys(F).includes("required"));if(p.length>0)for(const[F,A]of p)F.required!==r&&(l[A]={...F,required:r});else l.push({required:r})}return l}),xe=m(()=>U.value.length>0),Ce=r=>U.value.filter(h=>!h.trigger||!r?!0:Array.isArray(h.trigger)?h.trigger.includes(r):h.trigger===r).map(({trigger:h,...p})=>p),Ee=m(()=>U.value.some(r=>r.required)),Le=m(()=>{var r;return g.value==="error"&&e.showMessage&&((r=t==null?void 0:t.showMessage)!=null?r:!0)}),oe=m(()=>"".concat(e.label||"").concat((t==null?void 0:t.labelSuffix)||"")),V=r=>{a.value=r},Me=r=>{var l,h;const{errors:p,fields:F}=r;V("error"),_.value=p?(h=(l=p==null?void 0:p[0])==null?void 0:l.message)!=null?h:"".concat(e.prop," is required"):"",t==null||t.emit("validate",e.prop,!1,_.value)},Ve=()=>{V("success"),t==null||t.emit("validate",e.prop,!0,"")},Ae=async r=>{const l=S.value;return new Ze({[l]:r}).validate({[l]:le.value},{firstFields:!0}).then(()=>(Ve(),!0)).catch(p=>(Me(p),Promise.reject(p)))},se=async(r,l)=>{if(w||!e.prop)return!1;const h=_e(l);if(!xe.value)return l==null||l(!1),!1;const p=Ce(r);return p.length===0?(l==null||l(!0),!0):(V("validating"),Ae(p).then(()=>(l==null||l(!0),!0)).catch(F=>{const{fields:A}=F;return l==null||l(!1,A),h?!1:Promise.reject(A)}))},G=()=>{V(""),_.value="",w=!1},ae=async()=>{const r=t==null?void 0:t.model;if(!r||!e.prop)return;const l=H(r,e.prop);w=!0,l.value=ce(E),await Fe(),G(),w=!1},Be=r=>{b.value.includes(r)||b.value.push(r)},Pe=r=>{b.value=b.value.filter(l=>l!==r)};q(()=>e.error,r=>{_.value=r||"",V(r?"error":"")},{immediate:!0}),q(()=>e.validateStatus,r=>V(r||""));const K=he({...ge(e),$el:C,size:i,validateState:a,labelId:x,inputIds:b,isGroup:D,hasLabel:I,addInputId:Be,removeInputId:Pe,resetField:ae,clearValidate:G,validate:se});return pe(Y,K),ye(()=>{e.prop&&(t==null||t.addField(K),E=ce(le.value))}),Se(()=>{t==null||t.removeField(K)}),v({size:i,validateMessage:_,validateState:a,validate:se,clearValidate:G,resetField:ae}),(r,l)=>{var h;return z(),re("div",{ref_key:"formItemRef",ref:C,class:B(d(s)),role:d(D)?"group":void 0,"aria-labelledby":d(D)?d(x):void 0},[P(d(mt),{"is-auto-width":d(W).width==="auto","update-all":((h=d(t))==null?void 0:h.labelWidth)==="auto"},{default:R(()=>[d(I)?(z(),Te(De(d(T)?"label":"div"),{key:0,id:d(x),for:d(T),class:B(d(f).e("label")),style:ie(d(W))},{default:R(()=>[$(r.$slots,"label",{label:d(oe)},()=>[Ue(ue(d(oe)),1)])]),_:3},8,["id","for","class","style"])):de("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),k("div",{class:B(d(f).e("content")),style:ie(d(M))},[$(r.$slots,"default"),P(Ge,{name:"".concat(d(f).namespace.value,"-zoom-in-top")},{default:R(()=>[d(Le)?$(r.$slots,"error",{key:0,error:_.value},()=>[k("div",{class:B(d(y))},ue(_.value),3)]):de("v-if",!0)]),_:3},8,["name"])],6)],10,vt)}}});var We=be(ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const Ct=Ke(dt,{FormItem:We}),Et=He(We);const gt={},bt=k("div",{class:"p-8"},[k("img",{src:tt,class:"w-12 h-12",alt:"tov"})],-1);function _t(o,v){const e=Je("router-link");return z(),re("div",null,[P(e,{to:"/"},{default:R(()=>[bt]),_:1})])}const Lt=Ye(gt,[["render",_t]]);export{Et as E,Lt as _,Ct as a};
