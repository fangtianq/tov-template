import{d as M,z as f,n as _,O as G,g as x,N as J,o as O,P,Q as U,x as X,S as F,F as Y,a7 as ee,c as te,w as S,U as ne,a4 as N,a3 as $,a5 as ae,au as E,aa as A}from"./index-08a94d7c.js";import{a as D}from"./request-ca3158a4.js";import{t as se,_ as K,c as oe}from"./Tag-38d73543.js";import{d as ie,c as H,u as re,e as W}from"./use-rtl-f285feb3.js";import{d as le,a as ue,_ as Q}from"./Button-12a7bc87.js";import{c as de,f as ce,e as me,d as L}from"./light-c70bd139.js";import{u as pe,N as ge}from"./Icon-dc3c264c.js";import{i as he,_ as fe}from"./Input-478165fd.js";import{s as _e,_ as ve}from"./Space-d3e9467e.js";function ye(t){switch(t){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error("".concat(t," has no smaller size."))}const Ce=M({name:"Add",render(){return f("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),be=ie({name:"DynamicTags",common:de,peers:{Input:he,Button:le,Tag:se,Space:_e},self(){return{inputWidth:"64px"}}}),Te=be,Re=H("dynamic-tags",[H("input",{minWidth:"var(--n-input-width)"})]),Ve=Object.assign(Object.assign(Object.assign({},W.props),oe),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),Ie=M({name:"DynamicTags",props:Ve,setup(t){const{mergedClsPrefixRef:v,inlineThemeDisabled:m}=re(t),{localeRef:p}=ue("DynamicTags"),u=ce(t),{mergedDisabledRef:o}=u,y=_(""),g=_(!1),n=_(!0),a=_(null),i=W("DynamicTags","-dynamic-tags",Re,Te,t,v),c=_(t.defaultValue),r=G(t,"value"),h=pe(r,c),d=x(()=>p.value.add),b=x(()=>ye(t.size)),T=x(()=>o.value||!!t.max&&h.value.length>=t.max);function V(e){const{onChange:s,"onUpdate:value":R,onUpdateValue:j}=t,{nTriggerFormInput:Z,nTriggerFormChange:q}=u;s&&L(s,e),j&&L(j,e),R&&L(R,e),c.value=e,Z(),q()}function I(e){const s=h.value.slice(0);s.splice(e,1),V(s)}function z(e){switch(e.key){case"Enter":C()}}function C(e){const s=e!=null?e:y.value;if(s){const R=h.value.slice(0);R.push(t.onCreate(s)),V(R)}g.value=!1,n.value=!0,y.value=""}function k(){C()}function B(){g.value=!0,J(()=>{var e;(e=a.value)===null||e===void 0||e.focus(),n.value=!1})}const w=x(()=>{const{self:{inputWidth:e}}=i.value;return{"--n-input-width":e}}),l=m?me("dynamic-tags",void 0,w,t):void 0;return{mergedClsPrefix:v,inputInstRef:a,localizedAdd:d,inputSize:b,inputValue:y,showInput:g,inputForceFocused:n,mergedValue:h,mergedDisabled:o,triggerDisabled:T,handleInputKeyUp:z,handleAddClick:B,handleInputBlur:k,handleCloseClick:I,handleInputConfirm:C,mergedTheme:i,cssVars:m?void 0:w,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){const{mergedTheme:t,cssVars:v,mergedClsPrefix:m,onRender:p,renderTag:u}=this;return p==null||p(),f(ve,{class:["".concat(m,"-dynamic-tags"),this.themeClass],size:"small",style:v,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:o,tagStyle:y,type:g,round:n,size:a,color:i,closable:c,mergedDisabled:r,showInput:h,inputValue:d,inputStyle:b,inputSize:T,inputForceFocused:V,triggerDisabled:I,handleInputKeyUp:z,handleInputBlur:C,handleAddClick:k,handleCloseClick:B,handleInputConfirm:w,$slots:l}=this;return this.mergedValue.map((e,s)=>u?u(e,s):f(K,{key:s,theme:o.peers.Tag,themeOverrides:o.peerOverrides.Tag,style:y,type:g,round:n,size:a,color:i,closable:c,disabled:r,onClose:()=>{B(s)}},{default:()=>typeof e=="string"?e:e.label})).concat(h?l.input?l.input({submit:w,deactivate:C}):f(fe,Object.assign({placeholder:"",size:T,style:b,autosize:!0},this.inputProps,{ref:"inputInstRef",value:d,onUpdateValue:e=>{this.inputValue=e},theme:o.peers.Input,themeOverrides:o.peerOverrides.Input,onKeyup:z,onBlur:C,internalForceFocus:V})):l.trigger?l.trigger({activate:k,disabled:I}):f(Q,{dashed:!0,disabled:I,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:T,onClick:k},{icon:()=>f(ge,{clsPrefix:m},{default:()=>f(Ce,null)})}))}})}}),ke={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},we=U("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"},null,-1),xe=[we];function Fe(t,v){return O(),P("svg",ke,xe)}const Se={name:"mdi-add",render:Fe},Oe={class:"pb-4"},ze={class:"bg-#f4f4f8 text-#333639 px-4 py-2"},Ne=M({__name:"rolePermissionModify",props:{refresh:{type:Function,default(){return()=>{}}}},setup(t){const v=t,m=_([]),p=_([]),u=_([]),o=n=>({label:"ROLE_"+n,value:"v"+n}),y=n=>{var i,c;const a=p.value;a.length>n.length?D.get("/8080/admin/role/delete",{id:(i=a.at(-1))==null?void 0:i.id}).then(r=>{E["".concat(r.data.status)]("".concat(r.data.msg))}):a.length<n.length&&D.get("/8080/admin/role/add",{name:(c=n.at(-1))==null?void 0:c.label}).then(r=>{E["".concat(r.data.status)]("".concat(r.data.msg))}),setTimeout(()=>{g(),v.refresh()},500)},g=()=>{D.get("/8080/admin/roles").then(n=>{const a=n.data;m.value=A.take(a,5),p.value=A.slice(a,5),u.value=A.slice(a,5).map(i=>i.name)})};return X(()=>{g()}),(n,a)=>{const i=K,c=Se,r=Q,h=Ie;return O(),P("div",Oe,[U("div",ze,[F(" 默认角色："),(O(!0),P(Y,null,ee(N(m),d=>(O(),te(i,{key:d.id,class:"ml-4",type:"success"},{default:S(()=>[F(ne(d.name),1)]),_:2},1024))),128))]),U("div",null,[F(" 添加角色："),$(h,{value:N(u),"onUpdate:value":[a[0]||(a[0]=d=>ae(u)?u.value=d:null),y],onCreate:o},{trigger:S(({activate:d,disabled:b})=>[$(r,{size:"small",type:"primary",dashed:"",disabled:b,onClick:T=>d()},{icon:S(()=>[$(c)]),default:S(()=>[F(" 添加 ")]),_:2},1032,["disabled","onClick"])]),_:1},8,["value"])])])}}});export{Ce as A,Ne as _};
