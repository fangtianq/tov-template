/* empty css             */import{_ as me,E as pe,a as ce,v as fe}from"./search-ea189aef.js";import{b as ge,E as _e,a as ve,c as ye}from"./table-column-0e3fc0de.js";/* empty css              *//* empty css            */import"./select-ccc78ac8.js";import"./scrollbar-c02d83c8.js";import"./popper-490b1252.js";import"./checkbox-bc390863.js";/* empty css                */import{E as be,a as we}from"./form-item-6a1a9d26.js";import{_ as he}from"./delete-fb803db9.js";import{_ as Ce}from"./add-9341d99d.js";import{E as ke}from"./button-bfcc4e4a.js";import{a as g}from"./request-af25b9b6.js";import{d as xe,g as I,e as n,h as Se,o as O,a as ze,w as t,x as l,y as o,A as u,O as Ve,c as Ee,b as z,z as q,a3 as r}from"./index-01622320.js";import{E as Ae}from"./el-overlay-17a36949.js";import{E as Fe}from"./index-38142232.js";const De={class:"block",style:{float:"right","margin-right":"10px","margin-top":"10px"}},Be={style:{width:"60%",margin:"0 auto"}},Pe={class:"dialog-footer"},Te={class:"block",style:{float:"right","margin-right":"10px"}},$e=xe({__name:"dictionaryList",setup(Re){const y=I({keyword1:"",keyword2:""}),b=n(),w=I({name:""}),V=n(),h=I({name:""}),C=n(!1),G=[30,50,80,100],H=[5,10],E=n(1),A=n(1),F=n(30),D=n(5),M=n(0),U=n(0),B=n([]),P=n([]);n(1),n(1);const k=n(!1),_=n(!1);n(!1),n(!1);const x=n([]),S=n([]),c=n(""),f=async()=>{C.value=!0;let a={startPage:E.value,pageSize:F.value,keyword:y.keyword1},e=await g.get("/8080/SysApi/v1/findAttributesByPage",a);if(!e.data){C.value=!1;return}e.data.status===200?(B.value=e.data.data,M.value=e.data.total):(r.error(e.data.msg),B.value=[]),C.value=!1},J=async a=>{a&&await a.validate((e,i)=>{e&&K()})},T=a=>{a&&a.resetFields()},K=async()=>{let a={name:w.name},e=await g.post("/8080/SysApi/v1/addAttributes",a);e.data&&(e.data.status===200?(T(b.value),r.success(e.data.msg),f()):r.error(e.data.msg))},Q=async()=>{if(x.value.length===0){r.warning("请选择需要删除的属性");return}Ae.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{W()}).catch(()=>{r.warning("已取消删除")})},W=async()=>{let a={ids:x.value},e=await g.post("/8080/SysApi/v1/delAttributes",a);e.data&&(e.data.status===200?r.success(e.data.msg):r.error(e.data.msg),f())},X=a=>{x.value=[],a&&a.forEach(e=>{x.value.push(e.id)})},Y=a=>{F.value=a,f()},Z=a=>{E.value=a,f()},ee=async a=>{a&&await a.validate((e,i)=>{e&&te()})},te=async()=>{let a={id:c.value,name:h.name},e=await g.post("/8080/SysApi/v1/addAttributeDetail",a);e.data&&(e.data.status===200?(T(V.value),v(c.value),r.success(e.data.msg)):r.error(e.data.msg))},v=async a=>{k.value=!0,c.value=a;let e={id:a,pageSize:D.value,startPage:A.value},i=await g.get("/8080/SysApi/v1/findAttributesDetailByPage",e);i.data&&(i.data.status===200?(P.value=i.data.data,U.value=i.data.total):(r.error(i.data.msg),P.value=[]))},ae=async()=>{if(S.value.length===0){r.warning("请选择需要删除的属性明细");return}let a={ids:S.value},e=await g.post("/8080/SysApi/v1/delAttributeDetails",a);e.data&&(e.data.status===200?r.success(e.data.msg):r.error(e.data.msg),v(c.value))},le=a=>{S.value=[],a&&a.forEach(e=>{S.value.push(e.id)})},oe=a=>{D.value=a,v(c.value)},ne=a=>{A.value=a,v(c.value)};return Se(()=>{f()}),(a,e)=>{const i=Fe,m=be,se=me,d=ke,re=Ce,ie=he,$=we,R=ge,p=_e,j=ve,L=pe,N=ce,de=ye,ue=fe;return O(),ze("div",null,[t(de,null,{default:l(()=>[t(R,{span:64,class:"toolbar",style:{"padding-bottom":"0px",with:"100%",height:"100%"}},{default:l(()=>[t($,{inline:!0,model:o(y)},{default:l(()=>[t(m,null,{default:l(()=>[t(i,{modelValue:o(y).keyword1,"onUpdate:modelValue":e[0]||(e[0]=s=>o(y).keyword1=s),placeholder:"属性"},null,8,["modelValue"])]),_:1}),t(m,null,{default:l(()=>[t(d,{type:"primary",onClick:f},{default:l(()=>[t(se),u("查询")]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(d,{type:"success",onClick:e[1]||(e[1]=s=>_.value=!0)},{default:l(()=>[t(re),u("新增")]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(d,{type:"danger",onClick:Q},{default:l(()=>[t(ie),u("删除")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(R,null,{default:l(()=>[Ve((O(),Ee(j,{"element-loading-text":"拼命加载中",data:o(B),onSelectionChange:X},{default:l(()=>[t(p,{type:"selection",width:"55"}),t(p,{prop:"id",label:"id"}),t(p,{prop:"name",label:"属性名称"}),t(p,{fixed:"right",label:"操作",width:"180px",align:"center"},{default:l(s=>[t(d,{type:"",size:"small",onClick:Ie=>v(s.row.id)},{default:l(()=>[u(" 属性明细 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ue,o(C)]])]),_:1}),t(R,null,{default:l(()=>[z("div",De,[t(L,{"current-page":o(E),"page-sizes":G,"page-size":o(F),layout:"total, sizes, prev, pager, next, jumper",total:o(M),onSizeChange:Y,onCurrentChange:Z},null,8,["current-page","page-size","total"])])]),_:1}),t(N,{modelValue:o(_),"onUpdate:modelValue":e[6]||(e[6]=s=>q(_)?_.value=s:null),title:"新增属性"},{footer:l(()=>[z("div",Pe,[t(d,{onClick:e[3]||(e[3]=s=>_.value=!1)},{default:l(()=>[u("取 消")]),_:1}),t(d,{onClick:e[4]||(e[4]=s=>T(o(b)))},{default:l(()=>[u("重置")]),_:1}),t(d,{type:"primary",onClick:e[5]||(e[5]=s=>J(o(b)))},{default:l(()=>[u("确 定")]),_:1})])]),default:l(()=>[z("div",Be,[t($,{ref_key:"ruleFormRef",ref:b,model:o(w),inline:!1,"label-width":"90px",class:"demo-ruleForm"},{default:l(()=>[t(m,{label:"属性名称",prop:"name",rules:[{required:!0,message:"请输入属性名称",trigger:"blur"}]},{default:l(()=>[t(i,{modelValue:o(w).name,"onUpdate:modelValue":e[2]||(e[2]=s=>o(w).name=s),type:"text",placeholder:"请输入属性名称","auto-complete":"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"]),t(N,{modelValue:o(k),"onUpdate:modelValue":e[10]||(e[10]=s=>q(k)?k.value=s:null),title:"属性明细",class:"p-6"},{default:l(()=>[t($,{ref_key:"detailRef",ref:V,model:o(h),inline:!0,"label-width":"90px",class:"demo-ruleForm"},{default:l(()=>[t(m,{label:"属性名称",prop:"name",rules:[{required:!0,message:"请输入属性明细名称",trigger:"blur"}]},{default:l(()=>[t(i,{modelValue:o(h).name,"onUpdate:modelValue":e[7]||(e[7]=s=>o(h).name=s),type:"text",placeholder:"请输入属性明细名称","auto-complete":"off"},null,8,["modelValue"])]),_:1}),t(m,null,{default:l(()=>[t(d,{class:"el-icon-arrow-right",type:"primary",onClick:e[8]||(e[8]=s=>ee(o(V)))},{default:l(()=>[u("新增")]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(d,{type:"danger",class:"el-icon-delete",onClick:e[9]||(e[9]=s=>ae())},{default:l(()=>[u("删除")]),_:1})]),_:1})]),_:1},8,["model"]),t(j,{data:o(P),onSelectionChange:le},{default:l(()=>[t(p,{type:"selection",width:"55"}),t(p,{property:"id",label:"id"}),t(p,{property:"name",label:"属性明细名称"})]),_:1},8,["data"]),z("div",Te,[t(L,{"current-page":o(A),"page-sizes":H,"page-size":o(D),layout:"total, sizes, prev, pager, next, jumper",total:o(U),onSizeChange:oe,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])]),_:1})])}}}),at=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));export{at as _};
