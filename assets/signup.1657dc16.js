import{a as N}from"./index.03762d86.js";import{h as v,a as w,b as l,d as $,ao as C,m as h,a_ as U,f as o,w as r,c4 as M,P as b,e as T,i as u,t as L,p as A,a6 as D,n as R,b2 as p,c5 as j,r as z}from"./index.a2f3aa43.js";/* empty css             */import{E as Z,a as q,_ as G}from"./logo.22500247.js";import"./popper.5dcda032.js";import{E as H}from"./popover.23405cd7.js";import{E as J}from"./button.0a17c480.js";/* empty css              */import{E as K}from"./index.9cd4e748.js";import{b as g}from"./route-block.6a611cbf.js";import"./event.ca9cda98.js";import"./index.e79d2809.js";import"./_Uint8Array.7facf9ad.js";import"./favicon.eb9475ba.js";import"./isNil.aac33454.js";import"./focus-trap.d4aa7b73.js";import"./index.81f2bc9c.js";import"./index.02a43520.js";import"./index.b49062f4.js";const O={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Q=l("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1),W=[Q];function X(V,e){return v(),w("svg",O,W)}const Y={name:"mdi-check",render:X},ee={class:"h-screen font-github"},se={class:"flex justify-center items-center flex-col"},oe=l("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign up to tov-template ",-1),te={class:"w-77 bg-github_bg dark:bg-github_bg_dark border-github_b rounded-xl border-1 p-4"},ne={class:"w-max h-max cursor-pointer"},ae=["src"],re=u("Sign up"),le={class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},ie=u(" Already have an account? "),de={class:"text-github_a"},ue=u(" Sign in \u2192 "),me=u(" . "),pe=$({__name:"signup",setup(V){N.get("api/article/all").then(t=>{});const e=C({username:"",password:"",checkPass:"",nickName:"",smsCodeInput:"",smsCode:"",smsCodeVisible:!1,smsCodeCanSend:!1,smsCodeTip:"\u5237\u65B0\u9A8C\u8BC1\u7801",captcha:h()}),c=t=>{e.smsCodeVisible=t},k=()=>{c(!0),e.smsCodeCanSend=!1,M().then(t=>{e.smsCode=t.url,e.captcha=t})},_=U.debounce(k,1e3,{leading:!0,trailing:!1}),S=R(),x=()=>{var t;e.smsCodeInput==""||e.smsCodeInput.length!=4||(t=e.captcha)==null||t.verify(e.smsCodeInput).then(s=>{c(!1),e.smsCodeCanSend=!0,e.smsCodeVisible=!1},s=>{s.code=="800"?_():p.error(s.rawMessage)}).catch(s=>{p.error(s)})},P=C({password:[{validator:(t,s,n)=>{if(s==="")n(new Error("Please input the password"));else{if(e.checkPass!==""){if(!m.value)return;m.value.validateField("checkPass",()=>null)}n()}},trigger:"blur"}],checkPass:[{validator:(t,s,n)=>{s===""?n(new Error("Please input the password again")):s!==e.password?n(new Error("Two inputs don't match!")):n()},trigger:"blur"}],smsCodeInput:[{validator:(t,s,n)=>{e.smsCodeCanSend?n():n(new Error("SmsCode don't match!"))},trigger:"blur"}]}),m=h(),E=t=>{!t||t.validate(s=>{if(s)j()(e.username,e.password).then(n=>{p.success("\u6CE8\u518C\u6210\u529F"),S.push("login")},n=>{p.error(`\u6CE8\u518C\u5931\u8D25\uFF1A${n.rawMessage}`)});else return!1})};return(t,s)=>{const n=G,d=K,i=Z,y=Y,f=J,I=H,F=z("router-link"),B=q;return v(),w("div",ee,[o(B,{ref_key:"ruleFormRef",ref:m,model:e,"label-position":"top",rules:P},{default:r(()=>[l("div",se,[o(n),oe,l("div",te,[o(i,{label:"Phone number"},{default:r(()=>[o(d,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=a=>e.username=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"Password",prop:"password"},{default:r(()=>[o(d,{modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(i,{label:"Confirm",prop:"checkPass"},{default:r(()=>[o(d,{modelValue:e.checkPass,"onUpdate:modelValue":s[2]||(s[2]=a=>e.checkPass=a),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(i,{label:"nickName"},{default:r(()=>[o(d,{modelValue:e.nickName,"onUpdate:modelValue":s[3]||(s[3]=a=>e.nickName=a)},null,8,["modelValue"])]),_:1}),o(i,{prop:"smsCodeInput"},{default:r(()=>[o(I,{visible:e.smsCodeVisible,placement:"top"},{reference:r(()=>[o(f,{id:"verify",class:b("text-github_a mb-1"),onClick:T(_)},{default:r(()=>[l("span",{class:b(e.smsCodeCanSend?"text-green-500":"")},[u(L(e.smsCodeTip)+" ",1),A(o(y,null,null,512),[[D,e.smsCodeCanSend]])],2)]),_:1},8,["onClick"])]),default:r(()=>[l("div",ne,[l("img",{src:e.smsCode},null,8,ae)])]),_:1},8,["visible"]),o(d,{modelValue:e.smsCodeInput,"onUpdate:modelValue":s[4]||(s[4]=a=>e.smsCodeInput=a),modelModifiers:{trim:!0},class:"w-8",disabled:!e.smsCodeVisible,onFocus:s[5]||(s[5]=a=>c(!0)),onInput:s[6]||(s[6]=a=>x())},null,8,["modelValue","disabled"])]),_:1}),o(i,null,{default:r(()=>[o(f,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:s[7]||(s[7]=a=>E(m.value))},{default:r(()=>[re]),_:1})]),_:1})]),l("div",le,[ie,l("a",de,[o(F,{to:"login"},{default:r(()=>[ue]),_:1})]),me])])]),_:1},8,["model","rules"])])}}});typeof g=="function"&&g(pe);export{pe as default};
