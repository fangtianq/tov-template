import{d as f,al as E,l as k,o as F,am as V,f as y,j as s,w as n,an as B,ao as b,m as C,ap as R,e as S,h as a,k as d,aq as P,ar as c,aj as N,as as T}from"./index.a5ffe1ae.js";import{E as U,a as j}from"./el-form-item.385862c4.js";import{E as M}from"./el-button.e7a1384f.js";import{E as I}from"./el-input.02a749f4.js";import{_ as $}from"./favicon.a1ca0290.js";import{b as p}from"./route-block.1e6a8648.js";import"./error.7e8331f1.js";import"./index.02e9a362.js";import"./index.8bfffa1c.js";const q={class:"bg-white h-screen font-github"},A={class:"flex justify-center items-center flex-col"},D=a("div",{class:"p-8"},[a("img",{src:$,class:"w-12 h-12",alt:"tov"})],-1),z=a("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign in to tov-template ",-1),G={class:"h-57 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},H=d("Sign in"),J=a("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[d(" New to Tov? "),a("a",{href:"signup",class:"text-github_a"},"Create an account"),d(" . ")],-1),K=f({name:"***",beforeRouteEnter(h,m,e){e(l=>{B.isEmpty(b().value)||l.router.replace(m.path)})}}),L=f({...K,setup(h,{expose:m}){const e=E({username:"",password:""}),l=k(),_=C(),g=R();F(()=>{});const v=i=>{!i||i.validate(o=>{if(o)P(e.username,e.password).then(t=>{b().value=t.getSessionToken(),c.success(`\u767B\u5F55\u6210\u529F\uFF0C\u6B22\u8FCE\u60A8${t.getUsername()}\u56DE\u6765~`);let{fromParams:r}=N(T());_.push(r.value.fromPath)},t=>{c.error(t.rawMessage)});else return!1})};return m({router:_,currentUser:V,route:g}),(i,o)=>{const t=I,r=U,w=M,x=j;return S(),y("div",q,[s(x,{ref_key:"ruleFormRef",ref:l,model:e,"label-position":"top"},{default:n(()=>[a("div",A,[D,z,a("div",G,[s(r,{label:"Phone number"},{default:n(()=>[s(t,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=u=>e.username=u)},null,8,["modelValue"])]),_:1}),s(r,{label:"Password"},{default:n(()=>[s(t,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=u=>e.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(r,null,{default:n(()=>[s(w,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:o[2]||(o[2]=u=>v(l.value))},{default:n(()=>[H]),_:1})]),_:1})]),J])]),_:1},8,["model"])])}}});typeof p=="function"&&p(L);export{L as default};
