System.register(["./index-legacy.b0cdf09c.js","./stats.module-legacy.c7c7edab.js"],(function(e,t){"use strict";var n,o,s,r,i,a,c,l,d,u,f,h,m,p,g,b,y,N,w,x,k,A,v,T,_,E,C,R,L,I,j,O,q,H,S,z,U,M,G,F,P,B,D,V,J,W,X,Y,Z;return{setters:[e=>{n=e.d,o=e.o,s=e.a,r=e.b},e=>{i=e.ap,a=e.q,c=e.L,l=e.f,d=e.F,u=e.V,f=e.j,h=e.e,m=e.m,p=e.g,g=e.aq,b=e.Q,y=e.af,N=e.O,w=e.Y,x=e.ac,k=e.ad,A=e.ar,v=e.am,T=e.a,_=e.w,E=e.a8,C=e.P,R=e.U,L=e.as,I=e.h,j=e.i,O=e.D,q=e.y,H=e.at,S=e.N,z=e.s,U=e.Z,M=e.u,G=e.z,F=e.c,P=e.H,B=e.G,D=e.R,V=e.a5,J=e.$,W=e.W,X=e.d,Y=e.C,Z=e.au}],execute:function(){class K extends i{constructor(e){super(e)}parse(e){const t=0,n=1,o=2,s=3,r=9,i=10,c=11,l=48,d=4,u=0,f=1,h=2,m=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let p=0;const g=new Uint8Array(e),b={id_length:g[p++],colormap_type:g[p++],image_type:g[p++],colormap_index:g[p++]|g[p++]<<8,colormap_length:g[p++]|g[p++]<<8,colormap_size:g[p++],origin:[g[p++]|g[p++]<<8,g[p++]|g[p++]<<8],width:g[p++]|g[p++]<<8,height:g[p++]|g[p++]<<8,pixel_size:g[p++],flags:g[p++]};!function(e){switch(e.image_type){case n:case r:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case o:case s:case i:case c:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(b),b.id_length+p>e.length&&console.error("THREE.TGALoader: No data."),p+=b.id_length;let y=!1,N=!1,w=!1;switch(b.image_type){case r:y=!0,N=!0;break;case n:N=!0;break;case i:y=!0;break;case o:break;case c:y=!0,w=!0;break;case s:w=!0}const x=new Uint8Array(b.width*b.height*4),k=function(e,t,n,o,s){let r,i;const a=n.pixel_size>>3,c=n.width*n.height*a;if(t&&(i=s.subarray(o,o+=n.colormap_length*(n.colormap_size>>3))),e){let e,t,n;r=new Uint8Array(c);let i=0;const l=new Uint8Array(a);for(;i<c;)if(e=s[o++],t=1+(127&e),128&e){for(n=0;n<a;++n)l[n]=s[o++];for(n=0;n<t;++n)r.set(l,i+n*a);i+=a*t}else{for(t*=a,n=0;n<t;++n)r[i+n]=s[o++];i+=t}}else r=s.subarray(o,o+=t?n.width*n.height:c);return{pixel_data:r,palettes:i}}(y,N,b,p,g);return function(e,t,n,o,s){let r,i,a,c,p,g;switch((b.flags&l)>>d){default:case h:r=0,a=1,p=t,i=0,c=1,g=n;break;case u:r=0,a=1,p=t,i=n-1,c=-1,g=-1;break;case m:r=t-1,a=-1,p=-1,i=0,c=1,g=n;break;case f:r=t-1,a=-1,p=-1,i=n-1,c=-1,g=-1}if(w)switch(b.pixel_size){case 8:!function(e,t,n,o,s,r,i,a){let c,l,d,u=0;const f=b.width;for(d=t;d!==o;d+=n)for(l=s;l!==i;l+=r,u++)c=a[u],e[4*(l+f*d)+0]=c,e[4*(l+f*d)+1]=c,e[4*(l+f*d)+2]=c,e[4*(l+f*d)+3]=255}(e,i,c,g,r,a,p,o);break;case 16:!function(e,t,n,o,s,r,i,a){let c,l,d=0;const u=b.width;for(l=t;l!==o;l+=n)for(c=s;c!==i;c+=r,d+=2)e[4*(c+u*l)+0]=a[d+0],e[4*(c+u*l)+1]=a[d+0],e[4*(c+u*l)+2]=a[d+0],e[4*(c+u*l)+3]=a[d+1]}(e,i,c,g,r,a,p,o);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(b.pixel_size){case 8:!function(e,t,n,o,s,r,i,a,c){const l=c;let d,u,f,h=0;const m=b.width;for(f=t;f!==o;f+=n)for(u=s;u!==i;u+=r,h++)d=a[h],e[4*(u+m*f)+3]=255,e[4*(u+m*f)+2]=l[3*d+0],e[4*(u+m*f)+1]=l[3*d+1],e[4*(u+m*f)+0]=l[3*d+2]}(e,i,c,g,r,a,p,o,s);break;case 16:!function(e,t,n,o,s,r,i,a){let c,l,d,u=0;const f=b.width;for(d=t;d!==o;d+=n)for(l=s;l!==i;l+=r,u+=2)c=a[u+0]+(a[u+1]<<8),e[4*(l+f*d)+0]=(31744&c)>>7,e[4*(l+f*d)+1]=(992&c)>>2,e[4*(l+f*d)+2]=(31&c)<<3,e[4*(l+f*d)+3]=32768&c?0:255}(e,i,c,g,r,a,p,o);break;case 24:!function(e,t,n,o,s,r,i,a){let c,l,d=0;const u=b.width;for(l=t;l!==o;l+=n)for(c=s;c!==i;c+=r,d+=3)e[4*(c+u*l)+3]=255,e[4*(c+u*l)+2]=a[d+0],e[4*(c+u*l)+1]=a[d+1],e[4*(c+u*l)+0]=a[d+2]}(e,i,c,g,r,a,p,o);break;case 32:!function(e,t,n,o,s,r,i,a){let c,l,d=0;const u=b.width;for(l=t;l!==o;l+=n)for(c=s;c!==i;c+=r,d+=4)e[4*(c+u*l)+2]=a[d+0],e[4*(c+u*l)+1]=a[d+1],e[4*(c+u*l)+0]=a[d+2],e[4*(c+u*l)+3]=a[d+3]}(e,i,c,g,r,a,p,o);break;default:console.error("THREE.TGALoader: Format not supported.")}}(x,b.width,b.height,k.pixel_data,k.palettes),{data:x,width:b.width,height:b.height,flipY:!0,generateMipmaps:!0,minFilter:a}}}class Q extends c{constructor(e){super(e)}load(e,t,n,o){const s=this,r=""===s.path?l.extractUrlBase(e):s.path,i=new d(s.manager);i.setPath(s.path),i.setRequestHeader(s.requestHeader),i.setWithCredentials(s.withCredentials),i.load(e,(function(n){try{t(s.parse(n,r))}catch(i){o?o(i):console.error(i),s.manager.itemError(e)}}),n,o)}parse(e,t){function n(e,t){const n=[],o=e.childNodes;for(let s=0,r=o.length;s<r;s++){const e=o[s];e.nodeName===t&&n.push(e)}return n}function o(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let o=0,s=t.length;o<s;o++)n[o]=t[o];return n}function s(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let o=0,s=t.length;o<s;o++)n[o]=parseFloat(t[o]);return n}function r(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let o=0,s=t.length;o<s;o++)n[o]=parseInt(t[o]);return n}function i(e){return e.substring(1)}function a(e){return 0===Object.keys(e).length}function c(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function l(e){return void 0!==e?e.textContent:"Y_UP"}function d(e,t,o,s){const r=n(e,t)[0];if(void 0!==r){const e=n(r,o);for(let t=0;t<e.length;t++)s(e[t])}}function W(e,t){for(const n in e)e[n].build=t(e[n])}function X(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function Y(e){const t={inputs:{}};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType&&"input"===o.nodeName){const e=i(o.getAttribute("source")),n=o.getAttribute("semantic");t.inputs[n]=e}}return t}function Z(e){const t={};let n=e.getAttribute("target").split("/");const o=n.shift();let s=n.shift();const r=-1!==s.indexOf("("),a=-1!==s.indexOf(".");if(a)n=s.split("."),s=n.shift(),t.member=n.shift();else if(r){const e=s.split("(");s=e.shift();for(let t=0;t<e.length;t++)e[t]=parseInt(e[t].replace(/\)/,""));t.indices=e}return t.id=o,t.sid=s,t.arraySyntax=r,t.memberSyntax=a,t.sampler=i(e.getAttribute("source")),t}function Q(e){const t=[],n=e.channels,o=e.samplers,s=e.sources;for(const r in n)if(n.hasOwnProperty(r)){const e=n[r],i=o[e.sampler],a=i.inputs.INPUT,c=i.inputs.OUTPUT;se(ee(e,s[a],s[c]),t)}return t}function $(e){return X(qt.animations[e],Q)}function ee(e,t,n){const o=qt.nodes[e.id],s=wt(o.id),r=o.transforms[e.sid],i=o.matrix.clone().transpose();let a,c,l,d,u,f;const h={};switch(r){case"matrix":for(l=0,d=t.array.length;l<d;l++)if(a=t.array[l],c=l*n.stride,void 0===h[a]&&(h[a]={}),!0===e.arraySyntax){const t=n.array[c],o=e.indices[0]+4*e.indices[1];h[a][o]=t}else for(u=0,f=n.stride;u<f;u++)h[a][u]=n.array[c+u];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',r)}const m=function(e,t){const n=[];for(const s in e)n.push({time:parseFloat(s),value:e[s]});n.sort(o);for(let s=0;s<16;s++)re(n,s,t.elements[s]);return n;function o(e,t){return e.time-t.time}}(h,i);return{name:s.uuid,keyframes:m}}const te=new u,ne=new u,oe=new b;function se(e,t){const n=e.keyframes,o=e.name,s=[],r=[],i=[],a=[];for(let c=0,l=n.length;c<l;c++){const e=n[c],t=e.time,o=e.value;lt.fromArray(o).transpose(),lt.decompose(te,oe,ne),s.push(t),r.push(te.x,te.y,te.z),i.push(oe.x,oe.y,oe.z,oe.w),a.push(ne.x,ne.y,ne.z)}return r.length>0&&t.push(new x(o+".position",s,r)),i.length>0&&t.push(new k(o+".quaternion",s,i)),a.length>0&&t.push(new x(o+".scale",s,a)),t}function re(e,t,n){let o,s,r,i=!0;for(s=0,r=e.length;s<r;s++)o=e[s],void 0===o.value[t]?o.value[t]=null:i=!1;if(!0===i)for(s=0,r=e.length;s<r;s++)o=e[s],o.value[t]=n;else!function(e,t){let n,o;for(let s=0,r=e.length;s<r;s++){const r=e[s];if(null===r.value[t]){if(n=ie(e,s,t),o=ae(e,s,t),null===n){r.value[t]=o.value[t];continue}if(null===o){r.value[t]=n.value[t];continue}ce(r,n,o,t)}}}(e,t)}function ie(e,t,n){for(;t>=0;){const o=e[t];if(null!==o.value[n])return o;t--}return null}function ae(e,t,n){for(;t<e.length;){const o=e[t];if(null!==o.value[n])return o;t++}return null}function ce(e,t,n,o){n.time-t.time!=0?e.value[o]=(e.time-t.time)*(n.value[o]-t.value[o])/(n.time-t.time)+t.value[o]:e.value[o]=t.value[o]}function le(e){const t=[],n=e.name,o=e.end-e.start||-1,s=e.animations;for(let r=0,i=s.length;r<i;r++){const e=$(s[r]);for(let n=0,o=e.length;n<o;n++)t.push(e[n])}return new w(n,o,t)}function de(e){return X(qt.clips[e],le)}function ue(e){const t={sources:{}};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=s(o.textContent);break;case"source":const e=o.getAttribute("id");t.sources[e]=Be(o);break;case"joints":t.joints=fe(o);break;case"vertex_weights":t.vertexWeights=he(o)}}return t}function fe(e){const t={inputs:{}};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType&&"input"===o.nodeName){const e=o.getAttribute("semantic"),n=i(o.getAttribute("source"));t.inputs[e]=n}}return t}function he(e){const t={inputs:{}};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"input":const e=o.getAttribute("semantic"),n=i(o.getAttribute("source")),s=parseInt(o.getAttribute("offset"));t.inputs[e]={id:n,offset:s};break;case"vcount":t.vcount=r(o.textContent);break;case"v":t.v=r(o.textContent)}}return t}function me(e){const t={id:e.id},n=qt.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){const t=4,n={joints:[],indices:{array:[],stride:t},weights:{array:[],stride:t}},o=e.sources,s=e.vertexWeights,r=s.vcount,i=s.v,a=s.inputs.JOINT.offset,c=s.inputs.WEIGHT.offset,l=e.sources[e.joints.inputs.JOINT],d=e.sources[e.joints.inputs.INV_BIND_MATRIX],u=o[s.inputs.WEIGHT.id].array;let f,h,m,p=0;for(f=0,m=r.length;f<m;f++){const e=r[f],o=[];for(h=0;h<e;h++){const e=i[p+a],t=u[i[p+c]];o.push({index:e,weight:t}),p+=2}for(o.sort(g),h=0;h<t;h++){const e=o[h];void 0!==e?(n.indices.array.push(e.index),n.weights.array.push(e.weight)):(n.indices.array.push(0),n.weights.array.push(0))}}for(e.bindShapeMatrix?n.bindMatrix=(new y).fromArray(e.bindShapeMatrix).transpose():n.bindMatrix=(new y).identity(),f=0,m=l.array.length;f<m;f++){const e=l.array[f],t=(new y).fromArray(d.array,f*d.stride).transpose();n.joints.push({name:e,boneInverse:t})}return n;function g(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function pe(e){return void 0!==e.build?e.build:e.init_from}function ge(e){const t=qt.images[e];return void 0!==t?X(t,pe):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function be(e){const t={surfaces:{},samplers:{}};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"newparam":ye(o,t);break;case"technique":t.technique=xe(o);break;case"extra":t.extra=Ee(o)}}return t}function ye(e,t){const n=e.getAttribute("sid");for(let o=0,s=e.childNodes.length;o<s;o++){const s=e.childNodes[o];if(1===s.nodeType)switch(s.nodeName){case"surface":t.surfaces[n]=Ne(s);break;case"sampler2D":t.samplers[n]=we(s)}}}function Ne(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"init_from"===o.nodeName&&(t.init_from=o.textContent)}return t}function we(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"source"===o.nodeName&&(t.source=o.textContent)}return t}function xe(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=o.nodeName,t.parameters=ke(o);break;case"extra":t.extra=Ee(o)}}return t}function ke(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[o.nodeName]=Ae(o);break;case"transparent":t[o.nodeName]={opaque:o.hasAttribute("opaque")?o.getAttribute("opaque"):"A_ONE",data:Ae(o)}}}return t}function Ae(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":t[o.nodeName]=s(o.textContent);break;case"float":t[o.nodeName]=parseFloat(o.textContent);break;case"texture":t[o.nodeName]={id:o.getAttribute("texture"),extra:ve(o)}}}return t}function ve(e){const t={technique:{}};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"extra"===o.nodeName&&Te(o,t)}return t}function Te(e,t){for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"technique"===o.nodeName&&_e(o,t)}}function _e(e,t){for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[o.nodeName]=parseFloat(o.textContent);break;case"wrapU":case"wrapV":"TRUE"===o.textContent.toUpperCase()?t.technique[o.nodeName]=1:"FALSE"===o.textContent.toUpperCase()?t.technique[o.nodeName]=0:t.technique[o.nodeName]=parseInt(o.textContent);break;case"bump":t[o.nodeName]=Re(o)}}}function Ee(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"technique"===o.nodeName&&(t.technique=Ce(o))}return t}function Ce(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"double_sided":t[o.nodeName]=parseInt(o.textContent);break;case"bump":t[o.nodeName]=Re(o)}}return t}function Re(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"texture"===o.nodeName&&(t[o.nodeName]={id:o.getAttribute("texture"),texcoord:o.getAttribute("texcoord"),extra:ve(o)})}return t}function Le(e){return e}function Ie(e){let t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));return n=n.toLowerCase(),t="tga"===n?Rt:Ct,t}function je(e){const t=(n=e.url,X(qt.effects[n],Le));var n;const o=t.profile.technique;let s;switch(o.type){case"phong":case"blinn":s=new v;break;case"lambert":s=new A;break;default:s=new f}function r(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o=t.profile.samplers[e.id];let s=null;if(void 0!==o?s=ge(t.profile.surfaces[o.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),s=ge(e.id)),null!==s){const t=Ie(s);if(void 0!==t){const o=t.load(s),r=e.extra;if(void 0!==r&&void 0!==r.technique&&!1===a(r.technique)){const e=r.technique;o.wrapS=e.wrapU?D:V,o.wrapT=e.wrapV?D:V,o.offset.set(e.offsetU||0,e.offsetV||0),o.repeat.set(e.repeatU||1,e.repeatV||1)}else o.wrapS=D,o.wrapT=D;return null!==n&&(o.encoding=n),o}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",s),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}s.name=e.name||"";const i=o.parameters;for(const a in i){const e=i[a];switch(a){case"diffuse":e.color&&s.color.fromArray(e.color),e.texture&&(s.map=r(e.texture,z));break;case"specular":e.color&&s.specular&&s.specular.fromArray(e.color),e.texture&&(s.specularMap=r(e.texture));break;case"bump":e.texture&&(s.normalMap=r(e.texture));break;case"ambient":e.texture&&(s.lightMap=r(e.texture,z));break;case"shininess":e.float&&s.shininess&&(s.shininess=e.float);break;case"emission":e.color&&s.emissive&&s.emissive.fromArray(e.color),e.texture&&(s.emissiveMap=r(e.texture,z))}}s.color.convertSRGBToLinear(),s.specular&&s.specular.convertSRGBToLinear(),s.emissive&&s.emissive.convertSRGBToLinear();let c=i.transparent,l=i.transparency;if(void 0===l&&c&&(l={float:1}),void 0===c&&l&&(c={opaque:"A_ONE",data:{color:[1,1,1,1]}}),c&&l)if(c.data.texture)s.transparent=!0;else{const e=c.data.color;switch(c.opaque){case"A_ONE":s.opacity=e[3]*l.float;break;case"RGB_ZERO":s.opacity=1-e[0]*l.float;break;case"A_ZERO":s.opacity=1-e[3]*l.float;break;case"RGB_ONE":s.opacity=e[0]*l.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',c.opaque)}s.opacity<1&&(s.transparent=!0)}if(void 0!==o.extra&&void 0!==o.extra.technique){const e=o.extra.technique;for(const t in e){const n=e[t];switch(t){case"double_sided":s.side=1===n?_:E;break;case"bump":s.normalMap=r(n.texture),s.normalScale=new T(1,1)}}}return s}function Oe(e){return X(qt.materials[e],je)}function qe(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if("technique_common"===n.nodeName)return He(n)}return{}}function He(e){const t={};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];switch(o.nodeName){case"perspective":case"orthographic":t.technique=o.nodeName,t.parameters=Se(o)}}return t}function Se(e){const t={};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];switch(o.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[o.nodeName]=parseFloat(o.textContent)}}return t}function ze(e){let t;switch(e.optics.technique){case"perspective":t=new C(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":let n=e.optics.parameters.ymag,o=e.optics.parameters.xmag;const s=e.optics.parameters.aspect_ratio;o=void 0===o?n*s:o,n=void 0===n?o/s:n,o*=.5,n*=.5,t=new R(-o,o,n,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new C}return t.name=e.name||"",t}function Ue(e){const t=qt.cameras[e];return void 0!==t?X(t,ze):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function Me(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=o.nodeName,t.parameters=Ge(o)}}return t}function Ge(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":const e=s(o.textContent);t.color=(new p).fromArray(e).convertSRGBToLinear();break;case"falloff_angle":t.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":const n=parseFloat(o.textContent);t.distance=n?Math.sqrt(1/n):0}}return t}function Fe(e){let t;switch(e.technique){case"directional":t=new O;break;case"point":t=new j;break;case"spot":t=new I;break;case"ambient":t=new L}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function Pe(e){const t=qt.lights[e];return void 0!==t?X(t,Fe):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function Be(e){const t={array:[],stride:3};for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"float_array":t.array=s(i.textContent);break;case"Name_array":t.array=o(i.textContent);break;case"technique_common":const e=n(i,"accessor")[0];void 0!==e&&(t.stride=parseInt(e.getAttribute("stride")))}}return t}function De(e){const t={};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];1===o.nodeType&&(t[o.getAttribute("semantic")]=i(o.getAttribute("source")))}return t}function Ve(e){const t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"input":const e=i(o.getAttribute("source")),n=o.getAttribute("semantic"),s=parseInt(o.getAttribute("offset")),a=parseInt(o.getAttribute("set")),c=a>0?n+a:n;t.inputs[c]={id:e,offset:s},t.stride=Math.max(t.stride,s+1),"TEXCOORD"===n&&(t.hasUV=!0);break;case"vcount":t.vcount=r(o.textContent);break;case"p":t.p=r(o.textContent)}}return t}function Je(e){let t=0;for(let n=0,o=e.length;n<o;n++)!0===e[n].hasUV&&t++;t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function We(e){const t={},n=e.sources,o=e.vertices,s=e.primitives;if(0===s.length)return{};const r=function(e){const t={};for(let n=0;n<e.length;n++){const o=e[n];void 0===t[o.type]&&(t[o.type]=[]),t[o.type].push(o)}return t}(s);for(const i in r){const e=r[i];Je(e),t[i]=Xe(e,n,o)}return t}function Xe(e,t,n){const o={},s={array:[],stride:0},r={array:[],stride:0},i={array:[],stride:0},a={array:[],stride:0},c={array:[],stride:0},l=[],d=4,u=[],f=4,h=new q,m=[];let p=0;for(let g=0;g<e.length;g++){const o=e[g],d=o.inputs;let f=0;switch(o.type){case"lines":case"linestrips":f=2*o.count;break;case"triangles":f=3*o.count;break;case"polylist":for(let e=0;e<o.count;e++){const t=o.vcount[e];switch(t){case 3:f+=3;break;case 4:f+=6;break;default:f+=3*(t-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",o.type)}h.addGroup(p,f,g),p+=f,o.material&&m.push(o.material);for(const h in d){const f=d[h];switch(h){case"VERTEX":for(const d in n){const h=n[d];switch(d){case"POSITION":const n=s.array.length;if(Ye(o,t[h],f.offset,s.array),s.stride=t[h].stride,t.skinWeights&&t.skinIndices&&(Ye(o,t.skinIndices,f.offset,l),Ye(o,t.skinWeights,f.offset,u)),!1===o.hasUV&&!0===e.uvsNeedsFix){const e=(s.array.length-n)/s.stride;for(let t=0;t<e;t++)i.array.push(0,0)}break;case"NORMAL":Ye(o,t[h],f.offset,r.array),r.stride=t[h].stride;break;case"COLOR":Ye(o,t[h],f.offset,c.array),c.stride=t[h].stride;break;case"TEXCOORD":Ye(o,t[h],f.offset,i.array),i.stride=t[h].stride;break;case"TEXCOORD1":Ye(o,t[h],f.offset,a.array),i.stride=t[h].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',d)}}break;case"NORMAL":Ye(o,t[f.id],f.offset,r.array),r.stride=t[f.id].stride;break;case"COLOR":Ye(o,t[f.id],f.offset,c.array,!0),c.stride=t[f.id].stride;break;case"TEXCOORD":Ye(o,t[f.id],f.offset,i.array),i.stride=t[f.id].stride;break;case"TEXCOORD1":Ye(o,t[f.id],f.offset,a.array),a.stride=t[f.id].stride}}}return s.array.length>0&&h.setAttribute("position",new H(s.array,s.stride)),r.array.length>0&&h.setAttribute("normal",new H(r.array,r.stride)),c.array.length>0&&h.setAttribute("color",new H(c.array,c.stride)),i.array.length>0&&h.setAttribute("uv",new H(i.array,i.stride)),a.array.length>0&&h.setAttribute("uv2",new H(a.array,a.stride)),l.length>0&&h.setAttribute("skinIndex",new H(l,d)),u.length>0&&h.setAttribute("skinWeight",new H(u,f)),o.data=h,o.type=e[0].type,o.materialKeys=m,o}function Ye(e,t,n,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=e.p,i=e.stride,a=e.vcount;function c(e){let t=r[e+n]*d;const i=t+d;for(;t<i;t++)o.push(l[t]);if(s){const e=o.length-d-1;Lt.setRGB(o[e+0],o[e+1],o[e+2]).convertSRGBToLinear(),o[e+0]=Lt.r,o[e+1]=Lt.g,o[e+2]=Lt.b}}const l=t.array,d=t.stride;if(void 0!==e.vcount){let e=0;for(let t=0,n=a.length;t<n;t++){const n=a[t];if(4===n){const t=e+1*i,n=e+2*i,o=e+3*i;c(e+0*i),c(t),c(o),c(t),c(n),c(o)}else if(3===n){const t=e+1*i,n=e+2*i;c(e+0*i),c(t),c(n)}else if(n>4)for(let t=1,o=n-2;t<=o;t++){const n=e+i*t,o=e+i*(t+1);c(e+0*i),c(n),c(o)}e+=i*n}}else for(let u=0,f=r.length;u<f;u+=i)c(u)}function Ze(e){return X(qt.geometries[e],We)}function Ke(e){return void 0!==e.build?e.build:e}function Qe(e,t){for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"joint":t.joints[o.getAttribute("sid")]=$e(o);break;case"link":t.links.push(tt(o))}}}function $e(e){let t;for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"prismatic":case"revolute":t=et(o)}}return t}function et(e){const t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new u,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"axis":const e=s(o.textContent);t.axis.fromArray(e);break;case"limits":const n=o.getElementsByTagName("max")[0],r=o.getElementsByTagName("min")[0];t.limits.max=parseFloat(n.textContent),t.limits.min=parseFloat(r.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function tt(e){const t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"attachment_full":t.attachments.push(nt(o));break;case"matrix":case"translate":case"rotate":t.transforms.push(ot(o))}}return t}function nt(e){const t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"link":t.links.push(tt(o));break;case"matrix":case"translate":case"rotate":t.transforms.push(ot(o))}}return t}function ot(e){const t={type:e.nodeName},n=s(e.textContent);switch(t.type){case"matrix":t.obj=new y,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new u,t.obj.fromArray(n);break;case"rotate":t.obj=new u,t.obj.fromArray(n),t.angle=N.degToRad(n[3])}return t}function st(e,t){for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];1===o.nodeType&&"technique_common"===o.nodeName&&rt(o,t)}}function rt(e,t){for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"inertia":t.inertia=s(o.textContent);break;case"mass":t.mass=s(o.textContent)[0]}}}function it(e){const t={target:e.getAttribute("target").split("/").pop()};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1===o.nodeType&&"axis"===o.nodeName){const e=o.getElementsByTagName("param")[0];t.axis=e.textContent;const n=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=n.substring(0,n.length-1)}}return t}function at(e){return void 0!==e.build?e.build:e}function ct(e){const t=[],n=vt.querySelector('[id="'+e.id+'"]');for(let o=0;o<n.childNodes.length;o++){const e=n.childNodes[o];if(1!==e.nodeType)continue;let r,i;switch(e.nodeName){case"matrix":r=s(e.textContent);const n=(new y).fromArray(r).transpose();t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:n});break;case"translate":case"scale":r=s(e.textContent),i=(new u).fromArray(r),t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:i});break;case"rotate":r=s(e.textContent),i=(new u).fromArray(r);const o=N.degToRad(r[3]);t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:i,angle:o})}}return t}const lt=new y,dt=new u;function ut(e){const t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new y,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(1!==o.nodeType)continue;let r;switch(o.nodeName){case"node":t.nodes.push(o.getAttribute("id")),ut(o);break;case"instance_camera":t.instanceCameras.push(i(o.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(ft(o));break;case"instance_light":t.instanceLights.push(i(o.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(ft(o));break;case"instance_node":t.instanceNodes.push(i(o.getAttribute("url")));break;case"matrix":r=s(o.textContent),t.matrix.multiply(lt.fromArray(r).transpose()),t.transforms[o.getAttribute("sid")]=o.nodeName;break;case"translate":r=s(o.textContent),dt.fromArray(r),t.matrix.multiply(lt.makeTranslation(dt.x,dt.y,dt.z)),t.transforms[o.getAttribute("sid")]=o.nodeName;break;case"rotate":r=s(o.textContent);const e=N.degToRad(r[3]);t.matrix.multiply(lt.makeRotationAxis(dt.fromArray(r),e)),t.transforms[o.getAttribute("sid")]=o.nodeName;break;case"scale":r=s(o.textContent),t.matrix.scale(dt.fromArray(r)),t.transforms[o.getAttribute("sid")]=o.nodeName;break;case"extra":break;default:console.log(o)}}return Nt(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):qt.nodes[t.id]=t,t}function ft(e){const t={id:i(e.getAttribute("url")),materials:{},skeletons:[]};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];switch(o.nodeName){case"bind_material":const e=o.getElementsByTagName("instance_material");for(let n=0;n<e.length;n++){const o=e[n],s=o.getAttribute("symbol"),r=o.getAttribute("target");t.materials[s]=i(r)}break;case"skeleton":t.skeletons.push(i(o.textContent))}}return t}function ht(e,t){const n=[],o=[];let s,r,i;for(s=0;s<e.length;s++){const o=e[s];let r;if(Nt(o))r=wt(o),mt(r,t,n);else if(a=o,void 0!==qt.visualScenes[a]){const e=qt.visualScenes[o].children;for(let o=0;o<e.length;o++){const s=e[o];"JOINT"===s.type&&mt(wt(s.id),t,n)}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",o)}var a;for(s=0;s<t.length;s++)for(r=0;r<n.length;r++)if(i=n[r],i.bone.name===t[s].name){o[s]=i,i.processed=!0;break}for(s=0;s<n.length;s++)i=n[s],!1===i.processed&&(o.push(i),i.processed=!0);const c=[],l=[];for(s=0;s<o.length;s++)i=o[s],c.push(i.bone),l.push(i.boneInverse);return new J(c,l)}function mt(e,t,n){e.traverse((function(e){if(!0===e.isBone){let o;for(let n=0;n<t.length;n++){const s=t[n];if(s.name===e.name){o=s.boneInverse;break}}void 0===o&&(o=new y),n.push({bone:e,boneInverse:o,processed:!1})}}))}function pt(e){const t=[],n=e.matrix,o=e.nodes,s=e.type,r=e.instanceCameras,i=e.instanceControllers,a=e.instanceLights,c=e.instanceGeometries,l=e.instanceNodes;for(let f=0,h=o.length;f<h;f++)t.push(wt(o[f]));for(let f=0,h=r.length;f<h;f++){const e=Ue(r[f]);null!==e&&t.push(e.clone())}for(let f=0,h=i.length;f<h;f++){const e=i[f],n=(d=e.id,X(qt.controllers[d],me)),o=yt(Ze(n.id),e.materials),s=ht(e.skeletons,n.skin.joints);for(let r=0,i=o.length;r<i;r++){const e=o[r];e.isSkinnedMesh&&(e.bind(s,n.skin.bindMatrix),e.normalizeSkinWeights()),t.push(e)}}var d;for(let f=0,h=a.length;f<h;f++){const e=Pe(a[f]);null!==e&&t.push(e.clone())}for(let f=0,h=c.length;f<h;f++){const e=c[f],n=yt(Ze(e.id),e.materials);for(let o=0,s=n.length;o<s;o++)t.push(n[o])}for(let f=0,h=l.length;f<h;f++)t.push(wt(l[f]).clone());let u;if(0===o.length&&1===t.length)u=t[0];else{u="JOINT"===s?new U:new S;for(let e=0;e<t.length;e++)u.add(t[e])}return u.name="JOINT"===s?e.sid:e.name,u.matrix.copy(n),u.matrix.decompose(u.position,u.quaternion,u.scale),u}const gt=new f({color:16711935});function bt(e,t){const n=[];for(let o=0,s=e.length;o<s;o++){const s=t[e[o]];void 0===s?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[o]),n.push(gt)):n.push(Oe(s))}return n}function yt(e,t){const n=[];for(const o in e){const s=e[o],r=bt(s.materialKeys,t);0===r.length&&("lines"===o||"linestrips"===o?r.push(new M):r.push(new v));const i=void 0!==s.data.attributes.skinIndex,a=1===r.length?r[0]:r;let c;switch(o){case"lines":c=new B(s.data,a);break;case"linestrips":c=new P(s.data,a);break;case"triangles":case"polylist":c=i?new G(s.data,a):new F(s.data,a)}n.push(c)}return n}function Nt(e){return void 0!==qt.nodes[e]}function wt(e){return X(qt.nodes[e],pt)}function xt(e){const t=new S;t.name=e.name;const n=e.children;for(let o=0;o<n.length;o++){const e=n[o];t.add(wt(e.id))}return t}function kt(e){return X(qt.visualScenes[e],xt)}if(0===e.length)return{scene:new h};const At=(new DOMParser).parseFromString(e,"application/xml"),vt=n(At,"COLLADA")[0],Tt=At.getElementsByTagName("parsererror")[0];if(void 0!==Tt){const e=n(Tt,"div")[0];let t;return t=e?e.textContent:function(e){let t="";const n=[e];for(;n.length;){const e=n.shift();e.nodeType===Node.TEXT_NODE?t+=e.textContent:(t+="\n",n.push.apply(n,e.childNodes))}return t.trim()}(Tt),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",t),null}const _t=vt.getAttribute("version");console.log("THREE.ColladaLoader: File version",_t);const Et=function(e){return{unit:c(n(e,"unit")[0]),upAxis:l(n(e,"up_axis")[0])}}(n(vt,"asset")[0]),Ct=new m(this.manager);let Rt;Ct.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),K&&(Rt=new K(this.manager),Rt.setPath(this.resourcePath||t));const Lt=new p,It=[];let jt={},Ot=0;const qt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};d(vt,"library_animations","animation",(function e(t){const n={sources:{},samplers:{},channels:{}};let o=!1;for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1!==r.nodeType)continue;let i;switch(r.nodeName){case"source":i=r.getAttribute("id"),n.sources[i]=Be(r);break;case"sampler":i=r.getAttribute("id"),n.samplers[i]=Y(r);break;case"channel":i=r.getAttribute("target"),n.channels[i]=Z(r);break;case"animation":e(r),o=!0;break;default:console.log(r)}}!1===o&&(qt.animations[t.getAttribute("id")||N.generateUUID()]=n)})),d(vt,"library_animation_clips","animation_clip",(function(e){const t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"instance_animation"===o.nodeName&&t.animations.push(i(o.getAttribute("url")))}qt.clips[e.getAttribute("id")]=t})),d(vt,"library_controllers","controller",(function(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"skin":t.id=i(o.getAttribute("source")),t.skin=ue(o);break;case"morph":t.id=i(o.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}qt.controllers[e.getAttribute("id")]=t})),d(vt,"library_images","image",(function(e){const t={init_from:n(e,"init_from")[0].textContent};qt.images[e.getAttribute("id")]=t})),d(vt,"library_effects","effect",(function(e){const t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"profile_COMMON"===o.nodeName&&(t.profile=be(o))}qt.effects[e.getAttribute("id")]=t})),d(vt,"library_materials","material",(function(e){const t={name:e.getAttribute("name")};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"instance_effect"===o.nodeName&&(t.url=i(o.getAttribute("url")))}qt.materials[e.getAttribute("id")]=t})),d(vt,"library_cameras","camera",(function(e){const t={name:e.getAttribute("name")};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"optics"===o.nodeName&&(t.optics=qe(o))}qt.cameras[e.getAttribute("id")]=t})),d(vt,"library_lights","light",(function(e){let t={};for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];1===o.nodeType&&"technique_common"===o.nodeName&&(t=Me(o))}qt.lights[e.getAttribute("id")]=t})),d(vt,"library_geometries","geometry",(function(e){const t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},o=n(e,"mesh")[0];if(void 0!==o){for(let e=0;e<o.childNodes.length;e++){const n=o.childNodes[e];if(1!==n.nodeType)continue;const s=n.getAttribute("id");switch(n.nodeName){case"source":t.sources[s]=Be(n);break;case"vertices":t.vertices=De(n);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",n.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(Ve(n));break;default:console.log(n)}}qt.geometries[e.getAttribute("id")]=t}})),d(vt,"library_nodes","node",ut),d(vt,"library_visual_scenes","visual_scene",(function(e){const t={name:e.getAttribute("name"),children:[]};!function(e){const t=e.getElementsByTagName("node");for(let n=0;n<t.length;n++){const e=t[n];!1===e.hasAttribute("id")&&e.setAttribute("id","three_default_"+Ot++)}}(e);const o=n(e,"node");for(let n=0;n<o.length;n++)t.children.push(ut(o[n]));qt.visualScenes[e.getAttribute("id")]=t})),d(vt,"library_kinematics_models","kinematics_model",(function(e){const t={name:e.getAttribute("name")||"",joints:{},links:[]};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];1===o.nodeType&&"technique_common"===o.nodeName&&Qe(o,t)}qt.kinematicsModels[e.getAttribute("id")]=t})),d(vt,"library_physics_models","physics_model",(function(e){const t={name:e.getAttribute("name")||"",rigidBodies:{}};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];1===o.nodeType&&"rigid_body"===o.nodeName&&(t.rigidBodies[o.getAttribute("name")]={},st(o,t.rigidBodies[o.getAttribute("name")]))}qt.physicsModels[e.getAttribute("id")]=t})),d(vt,"scene","instance_kinematics_scene",(function(e){const t={bindJointAxis:[]};for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];1===o.nodeType&&"bind_joint_axis"===o.nodeName&&t.bindJointAxis.push(it(o))}qt.kinematicsScenes[i(e.getAttribute("url"))]=t})),W(qt.animations,Q),W(qt.clips,le),W(qt.controllers,me),W(qt.images,pe),W(qt.effects,Le),W(qt.materials,je),W(qt.cameras,ze),W(qt.lights,Fe),W(qt.geometries,We),W(qt.visualScenes,xt),function(){const e=qt.clips;if(!0===a(e)){if(!1===a(qt.animations)){const e=[];for(const t in qt.animations){const n=$(t);for(let t=0,o=n.length;t<o;t++)e.push(n[t])}It.push(new w("default",-1,e))}}else for(const t in e)It.push(de(t))}(),function(){const e=Object.keys(qt.kinematicsModels)[0],t=Object.keys(qt.kinematicsScenes)[0],n=Object.keys(qt.visualScenes)[0];if(void 0===e||void 0===t)return;const o=(s=e,X(qt.kinematicsModels[s],Ke));var s;const r=function(e){return X(qt.kinematicsScenes[e],at)}(t),i=kt(n),a=r.bindJointAxis,c={};for(let u=0,f=a.length;u<f;u++){const e=a[u],t=vt.querySelector('[sid="'+e.target+'"]');if(t){const n=t.parentElement;l(e.jointIndex,n)}}function l(e,t){const n=t.getAttribute("name"),s=o.joints[e];i.traverse((function(o){o.name===n&&(c[e]={object:o,transforms:ct(t),joint:s,position:s.zeroPosition})}))}const d=new y;jt={joints:o&&o.joints,getJointValue:function(e){const t=c[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){const n=c[e];if(n){const o=n.joint;if(t>o.limits.max||t<o.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+o.limits.min+", max: "+o.limits.max+").");else if(o.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{const s=n.object,r=o.axis,i=n.transforms;lt.identity();for(let n=0;n<i.length;n++){const s=i[n];if(s.sid&&-1!==s.sid.indexOf(e))switch(o.type){case"revolute":lt.multiply(d.makeRotationAxis(r,N.degToRad(t)));break;case"prismatic":lt.multiply(d.makeTranslation(r.x*t,r.y*t,r.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+o.type)}else switch(s.type){case"matrix":lt.multiply(s.obj);break;case"translate":lt.multiply(d.makeTranslation(s.obj.x,s.obj.y,s.obj.z));break;case"scale":lt.scale(s.obj);break;case"rotate":lt.multiply(d.makeRotationAxis(s.obj,s.angle))}}s.matrix.copy(lt),s.matrix.decompose(s.position,s.quaternion,s.scale),c[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}();const Ht=function(e){return kt(i(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(vt,"scene")[0]);return Ht.animations=It,"Z_UP"===Et.upAxis&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),Ht.quaternion.setFromEuler(new g(-Math.PI/2,0,0))),Ht.scale.multiplyScalar(Et.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),It},kinematics:jt,library:qt,scene:Ht}}}const $={id:"container1",class:"flex justify-center items-center flex-col"};e("_",n({__name:"webgl_loader_collada",setup(e){const n=4*window.innerWidth/5,i=4*window.innerHeight/5;let a,c,l,d,u,f;return o((()=>{const e=document.getElementById("container1");function o(){l.aspect=n/i,l.updateProjectionMatrix(),u.setSize(n,i)}!function(){l=new C(45,n/i,.1,2e3),l.position.set(8,10,8),l.lookAt(0,3,0),d=new h,c=new Y;const s=new Z((function(){d.add(f)}));new Q(s).load(new URL(""+new URL("../models/collada/elf/elf.dae",t.meta.url).href,self.location).href,(function(e){f=e.scene}));const r=new L(13421772,.4);d.add(r);const m=new O(16777215,.8);m.position.set(1,1,0).normalize(),d.add(m),u=new W,u.outputEncoding=z,u.setPixelRatio(window.devicePixelRatio),u.setSize(n,i),null==e||e.appendChild(u.domElement),a=X(),a.dom.style.top="0",a.dom.style.left="0",a.dom.style.position="absolute",null==e||e.appendChild(a.dom),window.addEventListener("resize",o)}(),function e(){requestAnimationFrame(e),function(){const e=c.getDelta();void 0!==f&&(f.rotation.z+=.5*e),u.render(d,l)}(),a.update()}()})),(e,t)=>(s(),r("div",$))}}))}}}));
