import{_ as w}from"./lodash.d7946ac5.js";import{d as v,a1 as x,m as E,e as F,f as V,j as o,w as n,n as k,h as s,k as c}from"./index.2be39f57.js";import{c as y,l as B}from"./av.4cdc99ed.js";import{E as C,a as U,b as N,c as R,_ as S,d as p}from"./favicon.8eb2b981.js";import{b as f}from"./route-block.b5bad31b.js";import"./plugin-vue_export-helper.c87c145b.js";import"./index.9e678198.js";import"./icon.974cf4cc.js";const j={class:"bg-white h-screen font-github"},I={class:"flex justify-center items-center flex-col"},M=s("div",{class:"p-8"},[s("img",{src:S,class:"w-12 h-12",alt:"tov"})],-1),P=s("div",{class:"font-300 text-2xl tracking-github mb-4"}," Sign in to tov-template ",-1),T={class:"h-57 w-77 bg-github_bg border-github_b rounded-xl border-1 p-4"},$=c("Sign in"),A=s("div",{class:"mt-3 w-77 bg-white border-github_b rounded-xl border-1 p-4"},[c(" New to Tov? "),s("a",{href:"signup",class:"text-github_a"},"Create an account"),c(" . ")],-1),D={beforeRouteEnter(b,_,e){e(a=>{const{currentUser:l}=a,i=l();w.isEmpty(i)||a.router.replace("/app")})}},q=v({...D,__name:"login",setup(b,{expose:_}){const e=x({username:"",password:""}),a=E(),l=k(),i=d=>{!d||d.validate(t=>{if(t)B(e.username,e.password).then(r=>{p.success(`\u767B\u5F55\u6210\u529F\uFF0C\u6B22\u8FCE\u60A8${r.getUsername()}\u56DE\u6765~`),l.push("/app")},r=>{p.error(r.rawMessage)});else return!1})};return _({router:l,currentUser:y}),(d,t)=>{const r=C,m=U,g=N,h=R;return F(),V("div",j,[o(h,{ref_key:"ruleFormRef",ref:a,model:e,"label-position":"top"},{default:n(()=>[s("div",I,[M,P,s("div",T,[o(m,{label:"Phone number"},{default:n(()=>[o(r,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=u=>e.username=u)},null,8,["modelValue"])]),_:1}),o(m,{label:"Password"},{default:n(()=>[o(r,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=u=>e.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(m,null,{default:n(()=>[o(g,{class:"w-full rounded-2xl shadow-github_button",color:"#2da44e",type:"primary",onClick:t[2]||(t[2]=u=>i(a.value))},{default:n(()=>[$]),_:1})]),_:1})]),A])]),_:1},8,["model"])])}}});typeof f=="function"&&f(q);export{q as default};
